"use strict";(self.webpackChunktracker_web=self.webpackChunktracker_web||[]).push([[179],{2011:(ot,Te,P)=>{P.d(Te,{Dh:()=>pe,GT:()=>fe,cc:()=>Se,hO:()=>Ve,on:()=>B,pX:()=>oe,xv:()=>me});var m=P(4650),ne=P(127),N=P(5813);ot=P.hmd(ot);const ue=["ngOnDestroy"],oe=(ge,Ye,st,Ae={})=>new Proxy(ge,{get:(ve,be)=>st.runOutsideAngular(()=>{var je;if(ge[be])return!(null===(je=Ae?.spy)||void 0===je)&&je.get&&Ae.spy.get(be,ge[be]),ge[be];if(ue.indexOf(be)>-1)return()=>{};const ze=Ye.toPromise().then(V=>{const ye=V&&V[be];return"function"==typeof ye?ye.bind(V):ye&&ye.then?ye.then(Y=>st.run(()=>Y)):st.run(()=>ye)});return new Proxy(()=>{},{get:(V,ye)=>ze[ye],apply:(V,ye,Y)=>ze.then(ee=>{var ae;const re=ee&&ee(...Y);return!(null===(ae=Ae?.spy)||void 0===ae)&&ae.apply&&Ae.spy.apply(be,Y,re),re})})})}),fe=(ge,Ye)=>{Ye.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(Ae=>{Object.defineProperty(ge.prototype,Ae,Object.getOwnPropertyDescriptor(st.prototype||st,Ae))})})};class de{constructor(Ye){return Ye}}const pe=new m.OlP("angularfire2.app.options"),me=new m.OlP("angularfire2.app.name");function B(ge,Ye,st){const ve="object"==typeof st&&st||{};ve.name=ve.name||"string"==typeof st&&st||"[DEFAULT]";const je=ne.Z.apps.filter(ze=>ze&&ze.name===ve.name)[0]||Ye.runOutsideAngular(()=>ne.Z.initializeApp(ge,ve));try{JSON.stringify(ge)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(je)}const j=(ge,...Ye)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ge](...Ye)},J={provide:de,useFactory:B,deps:[pe,m.R0b,[new m.FiY,me]]};let Ve=(()=>{class ge{constructor(st){ne.Z.registerVersion("angularfire",N.q4.full,"core"),ne.Z.registerVersion("angularfire",N.q4.full,"app-compat"),ne.Z.registerVersion("angular",m.q4F.full,st.toString())}static initializeApp(st,Ae){return{ngModule:ge,providers:[{provide:pe,useValue:st},{provide:me,useValue:Ae}]}}}return ge.\u0275fac=function(st){return new(st||ge)(m.LFG(m.Lbi))},ge.\u0275mod=m.oAB({type:ge}),ge.\u0275inj=m.cJS({providers:[J]}),ge})();function Se(ge,Ye,st,Ae,ve){const[,be,je]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===ge)||[];if(be)return function Ie(ge,Ye){try{return ge.toString()===Ye.toString()}catch{return ge===Ye}}(ve,je)||(_e("error",`${Ye} was already initialized on the ${st} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:ve,was:je})),be;{const ze=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ge,ze,ve]),ze}}const Je=!!ot.hot,_e=(ge,...Ye)=>{(0,m.X6Q)()&&typeof console<"u"&&console[ge](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Te,P)=>{P.d(Te,{q4:()=>cs,iC:()=>En,HU:()=>yr,vb:()=>Vs,JM:()=>Za});var m=P(4650),ne=P(5867),N=P(5861),ue=P(9681),oe=P(2090),fe=P(4859),de=P(1877),pe=P(8766);const me="@firebase/installations",B="0.5.12",J=`w:${B}`,Ve="FIS_v2",Ye=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(b){return b instanceof oe.ZR&&b.code.includes("request-failed")}function Ae({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function ve(b){return{token:b.token,requestStatus:2,expiresIn:ee(b.expiresIn),creationTime:Date.now()}}function be(b,C){return je.apply(this,arguments)}function je(){return(je=(0,N.Z)(function*(b,C){const F=(yield C.json()).error;return Ye.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function ze({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function V(b,{refreshToken:C}){const x=ze(b);return x.append("Authorization",function ae(b){return`${Ve} ${b}`}(C)),x}function ye(b){return Y.apply(this,arguments)}function Y(){return(Y=(0,N.Z)(function*(b){const C=yield b();return C.status>=500&&C.status<600?b():C})).apply(this,arguments)}function ee(b){return Number(b.replace("s","000"))}function re(b,C){return Le.apply(this,arguments)}function Le(){return(Le=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:C},{fid:x}){const F=Ae(b),Q=ze(b),ie=C.getImmediate({optional:!0});if(ie){const nt=yield ie.getHeartbeatsHeader();nt&&Q.append("x-firebase-client",nt)}const $e={method:"POST",headers:Q,body:JSON.stringify({fid:x,authVersion:Ve,appId:b.appId,sdkVersion:J})},mt=yield ye(()=>fetch(F,$e));if(mt.ok){const nt=yield mt.json();return{fid:nt.fid||x,registrationStatus:2,refreshToken:nt.refreshToken,authToken:ve(nt.authToken)}}throw yield be("Create Installation",mt)})).apply(this,arguments)}function Oe(b){return new Promise(C=>{setTimeout(C,b)})}const Wt=/^[cdef][\w-]{21}$/;function Ge(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function nn(b){return function dt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Wt.test(x)?x:""}catch{return""}}function Sn(b){return`${b.appName}!${b.appId}`}const qt=new Map;function Yt(b,C){const x=Sn(b);rn(x,C),function So(b,C){const x=function Cr(){return!ai&&"BroadcastChannel"in self&&(ai=new BroadcastChannel("[Firebase] FID Change"),ai.onmessage=b=>{rn(b.data.key,b.data.fid)}),ai}();x&&x.postMessage({key:b,fid:C}),function Or(){0===qt.size&&ai&&(ai.close(),ai=null)}()}(x,C)}function rn(b,C){const x=qt.get(b);if(x)for(const F of x)F(C)}let ai=null;const ui="firebase-installations-store";let Ri=null;function gt(){return Ri||(Ri=(0,pe.X3)("firebase-installations-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(ui)}})),Ri}function an(b,C){return vi.apply(this,arguments)}function vi(){return(vi=(0,N.Z)(function*(b,C){const x=Sn(b),Q=(yield gt()).transaction(ui,"readwrite"),ie=Q.objectStore(ui),Me=yield ie.get(x);return yield ie.put(C,x),yield Q.done,(!Me||Me.fid!==C.fid)&&Yt(b,C.fid),C})).apply(this,arguments)}function xn(b){return ki.apply(this,arguments)}function ki(){return(ki=(0,N.Z)(function*(b){const C=Sn(b),F=(yield gt()).transaction(ui,"readwrite");yield F.objectStore(ui).delete(C),yield F.done})).apply(this,arguments)}function Yi(b,C){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,N.Z)(function*(b,C){const x=Sn(b),Q=(yield gt()).transaction(ui,"readwrite"),ie=Q.objectStore(ui),Me=yield ie.get(x),$e=C(Me);return void 0===$e?yield ie.delete(x):yield ie.put($e,x),yield Q.done,$e&&(!Me||Me.fid!==$e.fid)&&Yt(b,$e.fid),$e})).apply(this,arguments)}function hn(b){return qs.apply(this,arguments)}function qs(){return(qs=(0,N.Z)(function*(b){let C;const x=yield Yi(b.appConfig,F=>{const Q=un(F),ie=tt(b,Q);return C=ie.registrationPromise,ie.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function un(b){return Un(b||{fid:Ge(),registrationStatus:0})}function tt(b,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function qe(b,C){return xo.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:ir(b)}:{installationEntry:C}}function xo(){return(xo=(0,N.Z)(function*(b,C){try{const x=yield re(b,C);return an(b.appConfig,x)}catch(x){throw st(x)&&409===x.customData.serverCode?yield xn(b.appConfig):yield an(b.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function ir(b){return fn.apply(this,arguments)}function fn(){return(fn=(0,N.Z)(function*(b){let C=yield Ot(b.appConfig);for(;1===C.registrationStatus;)yield Oe(100),C=yield Ot(b.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield hn(b);return F||x}return C})).apply(this,arguments)}function Ot(b){return Yi(b,C=>{if(!C)throw Ye.create("installation-not-found");return Un(C)})}function Un(b){return function bs(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Qt(b,C){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:C},x){const F=Ft(b,x),Q=V(b,x),ie=C.getImmediate({optional:!0});if(ie){const nt=yield ie.getHeartbeatsHeader();nt&&Q.append("x-firebase-client",nt)}const $e={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:J,appId:b.appId}})},mt=yield ye(()=>fetch(F,$e));if(mt.ok)return ve(yield mt.json());throw yield be("Generate Auth Token",mt)})).apply(this,arguments)}function Ft(b,{fid:C}){return`${Ae(b)}/${C}/authTokens:generate`}function q(b){return $.apply(this,arguments)}function $(){return($=(0,N.Z)(function*(b,C=!1){let x;const F=yield Yi(b.appConfig,ie=>{if(!ct(ie))throw Ye.create("not-registered");const Me=ie.authToken;if(!C&&sn(Me))return ie;if(1===Me.requestStatus)return x=U(b,C),ie;{if(!navigator.onLine)throw Ye.create("app-offline");const $e=Yn(ie);return x=Ce(b,$e),$e}});return x?yield x:F.authToken})).apply(this,arguments)}function U(b,C){return H.apply(this,arguments)}function H(){return(H=(0,N.Z)(function*(b,C){let x=yield W(b.appConfig);for(;1===x.authToken.requestStatus;)yield Oe(100),x=yield W(b.appConfig);const F=x.authToken;return 0===F.requestStatus?q(b,C):F})).apply(this,arguments)}function W(b){return Yi(b,C=>{if(!ct(C))throw Ye.create("not-registered");return function Xe(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ce(b,C){return Be.apply(this,arguments)}function Be(){return(Be=(0,N.Z)(function*(b,C){try{const x=yield Qt(b,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield an(b.appConfig,F),x}catch(x){if(!st(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield an(b.appConfig,F)}else yield xn(b.appConfig);throw x}})).apply(this,arguments)}function ct(b){return void 0!==b&&2===b.registrationStatus}function sn(b){return 2===b.requestStatus&&!function Jt(b){const C=Date.now();return C<b.creationTime||b.creationTime+b.expiresIn<C+36e5}(b)}function Yn(b){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:C})}function pn(){return(pn=(0,N.Z)(function*(b){const C=b,{installationEntry:x,registrationPromise:F}=yield hn(C);return F?F.catch(console.error):q(C).catch(console.error),x.fid})).apply(this,arguments)}function hr(){return(hr=(0,N.Z)(function*(b,C=!1){const x=b;return yield We(x),(yield q(x,C)).token})).apply(this,arguments)}function We(b){return _t.apply(this,arguments)}function _t(){return(_t=(0,N.Z)(function*(b){const{registrationPromise:C}=yield hn(b);C&&(yield C)})).apply(this,arguments)}function Mt(b){return Ye.create("missing-app-config-values",{valueName:b})}const Ea="installations",wn=b=>{const C=b.getProvider("app").getImmediate(),x=function Ds(b){if(!b||!b.options)throw Mt("App Configuration");if(!b.name)throw Mt("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!b.options[x])throw Mt(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ue._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Cs=b=>{const C=b.getProvider("app").getImmediate(),x=(0,ue._getProvider)(C,Ea).getImmediate();return{getId:()=>function on(b){return pn.apply(this,arguments)}(x),getToken:Q=>function sr(b){return hr.apply(this,arguments)}(x,Q)}};(function fr(){(0,ue._registerComponent)(new fe.wA(Ea,wn,"PUBLIC")),(0,ue._registerComponent)(new fe.wA("installations-internal",Cs,"PRIVATE"))})(),(0,ue.registerVersion)(me,B),(0,ue.registerVersion)(me,B,"esm2017");const Ts="@firebase/remote-config",Nt=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kp{constructor(C,x,F,Q){this.client=C,this.storage=x,this.storageCache=F,this.logger=Q}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Q=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Q}.`),Q}fetch(C){var x=this;return(0,N.Z)(function*(){const[F,Q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Q&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Q;C.eTag=Q&&Q.eTag;const ie=yield x.client.fetch(C),Me=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Me.push(x.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Me),ie})()}}function Gl(b=navigator){return b.languages&&b.languages[0]||b.language}class Cc{constructor(C,x,F,Q,ie,Me){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=Q,this.apiKey=ie,this.appId=Me}fetch(C){var x=this;return(0,N.Z)(function*(){var F,Q,ie;const[Me,$e]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),nt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},at={sdk_version:x.sdkVersion,app_instance_id:Me,app_instance_id_token:$e,app_id:x.appId,language_code:Gl()},Hn={method:"POST",headers:ft,body:JSON.stringify(at)},Xr=fetch(nt,Hn),ea=new Promise((js,$s)=>{C.signal.addEventListener(()=>{const zs=new Error("The operation was aborted.");zs.name="AbortError",$s(zs)})});let gi;try{yield Promise.race([Xr,ea]),gi=yield Xr}catch(js){let $s="fetch-client-network";throw"AbortError"===(null===(F=js)||void 0===F?void 0:F.name)&&($s="fetch-timeout"),Nt.create($s,{originalErrorMessage:null===(Q=js)||void 0===Q?void 0:Q.message})}let Ci=gi.status;const md=gi.headers.get("ETag")||void 0;let Bc,ls;if(200===gi.status){let js;try{js=yield gi.json()}catch($s){throw Nt.create("fetch-client-parse",{originalErrorMessage:null===(ie=$s)||void 0===ie?void 0:ie.message})}Bc=js.entries,ls=js.state}if("INSTANCE_STATE_UNSPECIFIED"===ls?Ci=500:"NO_CHANGE"===ls?Ci=304:("NO_TEMPLATE"===ls||"EMPTY_CONFIG"===ls)&&(Bc={}),304!==Ci&&200!==Ci)throw Nt.create("fetch-status",{httpStatus:Ci});return{status:Ci,eTag:md,config:Bc}})()}}class Op{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,N.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var Q=this;return(0,N.Z)(function*(){yield function Qn(b,C){return new Promise((x,F)=>{const Q=Math.max(C-Date.now(),0),ie=setTimeout(x,Q);b.addEventListener(()=>{clearTimeout(ie),F(Nt.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ie=yield Q.client.fetch(C);return yield Q.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Wl(b){if(!(b instanceof oe.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ie))throw ie;const Me={throttleEndTimeMillis:Date.now()+(0,oe.$s)(F),backoffCount:F+1};return yield Q.storage.setThrottleMetadata(Me),Q.attemptFetch(C,Me)}})()}}class Kl{constructor(C,x,F,Q,ie){this.app=C,this._client=x,this._storageCache=F,this._storage=Q,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Tc(b,C){var x;const F=b.target.error||void 0;return Nt.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Ss="app_namespace_store";class ql{constructor(C,x,F,Q=function Lp(){return new Promise((b,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Q=>{C(Tc(Q,"storage-open"))},F.onsuccess=Q=>{b(Q.target.result)},F.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(Ss,{keyPath:"compositeKey"})}}catch(F){C(Nt.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Q,ie)=>{var Me;const mt=F.transaction([Ss],"readonly").objectStore(Ss),nt=x.createCompositeKey(C);try{const ft=mt.get(nt);ft.onerror=at=>{ie(Tc(at,"storage-get"))},ft.onsuccess=at=>{const Hn=at.target.result;Q(Hn?Hn.value:void 0)}}catch(ft){ie(Nt.create("storage-get",{originalErrorMessage:null===(Me=ft)||void 0===Me?void 0:Me.message}))}})})()}set(C,x){var F=this;return(0,N.Z)(function*(){const Q=yield F.openDbPromise;return new Promise((ie,Me)=>{var $e;const nt=Q.transaction([Ss],"readwrite").objectStore(Ss),ft=F.createCompositeKey(C);try{const at=nt.put({compositeKey:ft,value:x});at.onerror=Hn=>{Me(Tc(Hn,"storage-set"))},at.onsuccess=()=>{ie()}}catch(at){Me(Nt.create("storage-set",{originalErrorMessage:null===($e=at)||void 0===$e?void 0:$e.message}))}})})()}delete(C){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Q,ie)=>{var Me;const mt=F.transaction([Ss],"readwrite").objectStore(Ss),nt=x.createCompositeKey(C);try{const ft=mt.delete(nt);ft.onerror=at=>{ie(Tc(at,"storage-delete"))},ft.onsuccess=()=>{Q()}}catch(ft){ie(Nt.create("storage-delete",{originalErrorMessage:null===(Me=ft)||void 0===Me?void 0:Me.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Ta{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,N.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Q=C.storage.getActiveConfig(),ie=yield x;ie&&(C.lastFetchStatus=ie);const Me=yield F;Me&&(C.lastSuccessfulFetchTimestampMillis=Me);const $e=yield Q;$e&&(C.activeConfig=$e)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ii(){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,N.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Po(){(0,ue._registerComponent)(new fe.wA("remote-config",function b(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),Q=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Nt.create("registration-window");if(!(0,oe.hl)())throw Nt.create("indexed-db-unavailable");const{projectId:ie,apiKey:Me,appId:$e}=F.options;if(!ie)throw Nt.create("registration-project-id");if(!Me)throw Nt.create("registration-api-key");if(!$e)throw Nt.create("registration-app-id");const mt=new ql($e,F.name,x=x||"firebase"),nt=new Ta(mt),ft=new de.Yd(Ts);ft.logLevel=de.in.ERROR;const at=new Cc(Q,ue.SDK_VERSION,x,ie,Me,$e),Hn=new Op(at,mt),Xr=new kp(Hn,mt,nt,ft),ea=new Kl(F,Xr,nt,mt,ft);return function Tr(b){const C=(0,oe.m9)(b);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ea),ea},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Ts,"0.3.11"),(0,ue.registerVersion)(Ts,"0.3.11","esm2017")}();const Lo="/firebase-messaging-sw.js",Ni="/firebase-cloud-messaging-push-scope",Js="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Uo="google.c.a.c_id",Ma="google.c.a.c_l",Jl="google.c.a.ts",Xl="google.c.a.e";var Jn=(()=>{return(b=Jn||(Jn={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Jn;var b})();function Pr(b){const C=new Uint8Array(b);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ed(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Q=new Uint8Array(F.length);for(let ie=0;ie<F.length;++ie)Q[ie]=F.charCodeAt(ie);return Q}const Vo="fcm_token_details_db",Qr="fcm_token_object_Store";function Nn(b){return td.apply(this,arguments)}function td(){return td=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Vo))return null;let C=null;return(yield(0,pe.X3)(Vo,5,{upgrade:(F=(0,N.Z)(function*(Q,ie,Me,$e){var mt;if(ie<2||!Q.objectStoreNames.contains(Qr))return;const nt=$e.objectStore(Qr),ft=yield nt.index("fcmSenderId").get(b);if(yield nt.clear(),ft)if(2===ie){const at=ft;if(!at.auth||!at.p256dh||!at.endpoint)return;C={token:at.fcmToken,createTime:null!==(mt=at.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:at.auth,p256dh:at.p256dh,endpoint:at.endpoint,swScope:at.swScope,vapidKey:"string"==typeof at.vapidKey?at.vapidKey:Pr(at.vapidKey)}}}else if(3===ie){const at=ft;C={token:at.fcmToken,createTime:at.createTime,subscriptionOptions:{auth:Pr(at.auth),p256dh:Pr(at.p256dh),endpoint:at.endpoint,swScope:at.swScope,vapidKey:Pr(at.vapidKey)}}}else if(4===ie){const at=ft;C={token:at.fcmToken,createTime:at.createTime,subscriptionOptions:{auth:Pr(at.auth),p256dh:Pr(at.p256dh),endpoint:at.endpoint,swScope:at.swScope,vapidKey:Pr(at.vapidKey)}}}}),function(ie,Me,$e,mt){return F.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Vo),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),Oh(C)?C:null;var F}),td.apply(this,arguments)}function Oh(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:C}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const es="firebase-messaging-store";let Sa=null;function ts(){return Sa||(Sa=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(es)}})),Sa}function pr(b){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,N.Z)(function*(b){const C=jo(b),F=yield(yield ts()).transaction(es).objectStore(es).get(C);if(F)return F;{const Q=yield Nn(b.appConfig.senderId);if(Q)return yield Ei(b,Q),Q}})).apply(this,arguments)}function Ei(b,C){return ns.apply(this,arguments)}function ns(){return(ns=(0,N.Z)(function*(b,C){const x=jo(b),Q=(yield ts()).transaction(es,"readwrite");return yield Q.objectStore(es).put(C,x),yield Q.done,C})).apply(this,arguments)}function rs(b){return is.apply(this,arguments)}function is(){return(is=(0,N.Z)(function*(b){const C=jo(b),F=(yield ts()).transaction(es,"readwrite");yield F.objectStore(es).delete(C),yield F.done})).apply(this,arguments)}function jo({appConfig:b}){return b.appId}const Dn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function nd(b,C){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,N.Z)(function*(b,C){var x;const F=yield De(b),Q=Rs(C),ie={method:"POST",headers:F,body:JSON.stringify(Q)};let Me;try{Me=yield(yield fetch($o(b.appConfig),ie)).json()}catch($e){throw Dn.create("token-subscribe-failed",{errorInfo:null===(x=$e)||void 0===x?void 0:x.toString()})}if(Me.error)throw Dn.create("token-subscribe-failed",{errorInfo:Me.error.message});if(!Me.token)throw Dn.create("token-subscribe-no-token");return Me.token})).apply(this,arguments)}function Mc(b,C){return eo.apply(this,arguments)}function eo(){return(eo=(0,N.Z)(function*(b,C){var x;const F=yield De(b),Q=Rs(C.subscriptionOptions),ie={method:"PATCH",headers:F,body:JSON.stringify(Q)};let Me;try{Me=yield(yield fetch(`${$o(b.appConfig)}/${C.token}`,ie)).json()}catch($e){throw Dn.create("token-update-failed",{errorInfo:null===(x=$e)||void 0===x?void 0:x.toString()})}if(Me.error)throw Dn.create("token-update-failed",{errorInfo:Me.error.message});if(!Me.token)throw Dn.create("token-update-no-token");return Me.token})).apply(this,arguments)}function xs(b,C){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,N.Z)(function*(b,C){var x;const Q={method:"DELETE",headers:yield De(b)};try{const Me=yield(yield fetch(`${$o(b.appConfig)}/${C}`,Q)).json();if(Me.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:Me.error.message})}catch(ie){throw Dn.create("token-unsubscribe-failed",{errorInfo:null===(x=ie)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function $o({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function De(b){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,N.Z)(function*({appConfig:b,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Rs({p256dh:b,auth:C,endpoint:x,vapidKey:F}){const Q={web:{endpoint:x,auth:C,p256dh:b}};return F!==Js&&(Q.web.applicationPubKey=F),Q}const zo=6048e5;function gn(b){return xa.apply(this,arguments)}function xa(){return(xa=(0,N.Z)(function*(b){const C=yield Nh(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:C.endpoint,auth:Pr(C.getKey("auth")),p256dh:Pr(C.getKey("p256dh"))},F=yield pr(b.firebaseDependencies);if(F){if(Vn(F.subscriptionOptions,x))return Date.now()>=F.createTime+zo?Ra(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield xs(b.firebaseDependencies,F.token)}catch(Q){console.warn(Q)}return Ho(b.firebaseDependencies,x)}return Ho(b.firebaseDependencies,x)})).apply(this,arguments)}function ks(b){return di.apply(this,arguments)}function di(){return(di=(0,N.Z)(function*(b){const C=yield pr(b.firebaseDependencies);C&&(yield xs(b.firebaseDependencies,C.token),yield rs(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ra(b,C){return ka.apply(this,arguments)}function ka(){return(ka=(0,N.Z)(function*(b,C){try{const x=yield Mc(b.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Ei(b.firebaseDependencies,F),x}catch(x){throw yield ks(b),x}})).apply(this,arguments)}function Ho(b,C){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,N.Z)(function*(b,C){const F={token:yield nd(b,C),createTime:Date.now(),subscriptionOptions:C};return yield Ei(b,F),F.token})).apply(this,arguments)}function Nh(b,C){return Os.apply(this,arguments)}function Os(){return(Os=(0,N.Z)(function*(b,C){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ed(C)})})).apply(this,arguments)}function Vn(b,C){return C.vapidKey===b.vapidKey&&C.endpoint===b.endpoint&&C.auth===b.auth&&C.p256dh===b.p256dh}function Pi(b){const C={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Na(b,C){if(!C.notification)return;b.notification={};const x=C.notification.title;x&&(b.notification.title=x);const F=C.notification.body;F&&(b.notification.body=F);const Q=C.notification.image;Q&&(b.notification.image=Q)}(C,b),function to(b,C){!C.data||(b.data=C.data)}(C,b),function ss(b,C){var x,F,Q,ie,Me;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const $e=null!==(Q=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Q?Q:null===(ie=C.notification)||void 0===ie?void 0:ie.click_action;$e&&(b.fcmOptions.link=$e);const mt=null===(Me=C.fcmOptions)||void 0===Me?void 0:Me.analytics_label;mt&&(b.fcmOptions.analyticsLabel=mt)}(C,b),C}function Ac(b){return"object"==typeof b&&!!b&&Uo in b}function Sc(b,C){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function Pa(b){return Dn.create("missing-app-config-values",{valueName:b})}Sc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xc{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function rd(b){if(!b||!b.options)throw Pa("App Configuration Object");if(!b.name)throw Pa("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of C)if(!x[F])throw Pa(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Q,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function no(b){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,N.Z)(function*(b){var C;try{b.swRegistration=yield navigator.serviceWorker.register(Lo,{scope:Ni}),b.swRegistration.update().catch(()=>{})}catch(x){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function La(b,C){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,N.Z)(function*(b,C){if(!C&&!b.swRegistration&&(yield no(b)),C||!b.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");b.swRegistration=C}})).apply(this,arguments)}function Go(b,C){return Au.apply(this,arguments)}function Au(){return(Au=(0,N.Z)(function*(b,C){C?b.vapidKey=C:b.vapidKey||(b.vapidKey=Js)})).apply(this,arguments)}function xu(){return(xu=(0,N.Z)(function*(b,C){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield Go(b,C?.vapidKey),yield La(b,C?.serviceWorkerRegistration),gn(b)})).apply(this,arguments)}function Ru(b,C,x){return ku.apply(this,arguments)}function ku(){return(ku=(0,N.Z)(function*(b,C,x){const F=Wo(C);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Uo],message_name:x[Ma],message_time:x[Jl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wo(b){switch(b){case Jn.NOTIFICATION_CLICKED:return"notification_open";case Jn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ou(){return(Ou=(0,N.Z)(function*(b,C){const x=C.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Jn.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Pi(x)):b.onMessageHandler.next(Pi(x)));const F=x.data;Ac(F)&&"1"===F[Xl]&&(yield Ru(b,x.messageType,F))})).apply(this,arguments)}const Xn="@firebase/messaging",In=b=>{const C=new xc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ph(b,C){return Ou.apply(this,arguments)}(C,x)),C},Fa=b=>{const C=b.getProvider("messaging").getImmediate();return{getToken:F=>function Su(b,C){return xu.apply(this,arguments)}(C,F)}};function Lh(){return kc.apply(this,arguments)}function kc(){return(kc=(0,N.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function id(){(0,ue._registerComponent)(new fe.wA("messaging",In,"PUBLIC")),(0,ue._registerComponent)(new fe.wA("messaging-internal",Fa,"PRIVATE")),(0,ue.registerVersion)(Xn,"0.9.16"),(0,ue.registerVersion)(Xn,"0.9.16","esm2017")}();const Li="analytics",Ko="firebase_id",Fi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Va="https://www.googletagmanager.com/gtag/js",ar=new de.Yd("@firebase/analytics");function Bh(b){return Promise.all(b.map(C=>C.catch(x=>x)))}function dy(b,C){const x=document.createElement("script");x.src=`${Va}?l=${b}&id=${C}`,x.async=!0,document.head.appendChild(x)}function Ba(b,C,x,F,Q,ie){return ja.apply(this,arguments)}function ja(){return(ja=(0,N.Z)(function*(b,C,x,F,Q,ie){const Me=F[Q];try{if(Me)yield C[Me];else{const mt=(yield Bh(x)).find(nt=>nt.measurementId===Q);mt&&(yield C[mt.appId])}}catch($e){ar.error($e)}b("config",Q,ie)})).apply(this,arguments)}function ad(b,C,x,F,Q){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,N.Z)(function*(b,C,x,F,Q){try{let ie=[];if(Q&&Q.send_to){let Me=Q.send_to;Array.isArray(Me)||(Me=[Me]);const $e=yield Bh(x);for(const mt of Me){const nt=$e.find(at=>at.measurementId===mt),ft=nt&&C[nt.appId];if(!ft){ie=[];break}ie.push(ft)}}0===ie.length&&(ie=Object.values(C)),yield Promise.all(ie),b("event",F,Q||{})}catch(ie){ar.error(ie)}})).apply(this,arguments)}function $a(){const b=window.document.getElementsByTagName("script");for(const C of Object.values(b))if(C.src&&C.src.includes(Va))return C;return null}const gr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ld=new class io{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Pn(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ht(b){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,N.Z)(function*(b){var C;const{appId:x,apiKey:F}=b,Q={method:"GET",headers:Pn(F)},ie=Fi.replace("{app-id}",x),Me=yield fetch(ie,Q);if(200!==Me.status&&304!==Me.status){let $e="";try{const mt=yield Me.json();null!==(C=mt.error)&&void 0!==C&&C.message&&($e=mt.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:$e})}return Me.json()})).apply(this,arguments)}function Bn(b){return so.apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(b,C=ld,x){const{appId:F,apiKey:Q,measurementId:ie}=b.options;if(!F)throw gr.create("no-app-id");if(!Q){if(ie)return{measurementId:ie,appId:F};throw gr.create("no-api-key")}const Me=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new cn;return setTimeout((0,N.Z)(function*(){$e.abort()}),void 0!==x?x:6e4),Zo({appId:F,apiKey:Q,measurementId:ie},Me,$e,C)})).apply(this,arguments)}function Zo(b,C,x){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,N.Z)(function*(b,{throttleEndTimeMillis:C,backoffCount:x},F,Q=ld){var ie,Me;const{appId:$e,measurementId:mt}=b;try{yield qo(F,C)}catch(nt){if(mt)return ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${null===(ie=nt)||void 0===ie?void 0:ie.message}]`),{appId:$e,measurementId:mt};throw nt}try{const nt=yield Ht(b);return Q.deleteThrottleMetadata($e),nt}catch(nt){const ft=nt;if(!Pu(ft)){if(Q.deleteThrottleMetadata($e),mt)return ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:$e,measurementId:mt};throw nt}const at=503===Number(null===(Me=ft?.customData)||void 0===Me?void 0:Me.httpStatus)?(0,oe.$s)(x,Q.intervalMillis,30):(0,oe.$s)(x,Q.intervalMillis),Hn={throttleEndTimeMillis:Date.now()+at,backoffCount:x+1};return Q.setThrottleMetadata($e,Hn),ar.debug(`Calling attemptFetch again in ${at} millis`),Zo(b,Hn,F,Q)}})).apply(this,arguments)}function qo(b,C){return new Promise((x,F)=>{const Q=Math.max(C-Date.now(),0),ie=setTimeout(x,Q);b.addEventListener(()=>{clearTimeout(ie),F(gr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Pu(b){if(!(b instanceof oe.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}class cn{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let os,Yo;function oo(){return(oo=(0,N.Z)(function*(b,C,x,F,Q){if(Q&&Q.global)b("event",x,F);else{const ie=yield C;b("event",x,Object.assign(Object.assign({},F),{send_to:ie}))}})).apply(this,arguments)}function co(b){Yo=b}function Ln(b){os=b}function $n(){return as.apply(this,arguments)}function as(){return(as=(0,N.Z)(function*(){var b;if(!(0,oe.hl)())return ar.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(C){return ar.warn(gr.create("indexeddb-unavailable",{errorInfo:null===(b=C)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Ls(){return(Ls=(0,N.Z)(function*(b,C,x,F,Q,ie,Me){var $e;const mt=Bn(b);mt.then(Xr=>{x[Xr.measurementId]=Xr.appId,b.options.measurementId&&Xr.measurementId!==b.options.measurementId&&ar.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Xr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xr=>ar.error(Xr)),C.push(mt);const nt=$n().then(Xr=>{if(Xr)return F.getId()}),[ft,at]=yield Promise.all([mt,nt]);$a()||dy(ie,ft.measurementId),Yo&&(Q("consent","default",Yo),co(void 0)),Q("js",new Date);const Hn=null!==($e=Me?.config)&&void 0!==$e?$e:{};return Hn.origin="firebase",Hn.update=!0,null!=at&&(Hn[Ko]=at),Q("config",ft.measurementId,Hn),os&&(Q("set",os),Ln(void 0)),ft.measurementId})).apply(this,arguments)}class ln{constructor(C){this.app=C}_delete(){return delete Mr[this.app.options.appId],Promise.resolve()}}let Mr={},Ar=[];const Fs={};let mr,$t,Di="dataLayer",Qo=!1;function Vp(b,C,x){!function Up(){const b=[];if((0,oe.ru)()&&b.push("This is a browser extension environment."),(0,oe.zI)()||b.push("Cookies are not available."),b.length>0){const C=b.map((F,Q)=>`(${Q+1}) ${F}`).join(" "),x=gr.create("invalid-analytics-context",{errorInfo:C});ar.warn(x.message)}}();const F=b.options.appId;if(!F)throw gr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw gr.create("no-api-key");ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Mr[F])throw gr.create("already-exists",{id:F});if(!Qo){!function hy(b){let C=[];Array.isArray(window[b])?C=window[b]:window[b]=C}(Di);const{wrappedGtag:ie,gtagCore:Me}=function jh(b,C,x,F,Q){let ie=function(...Me){window[F].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ie=window[Q]),window[Q]=function ud(b,C,x,F){function ie(){return(ie=(0,N.Z)(function*(Me,$e,mt){try{"event"===Me?yield ad(b,C,x,$e,mt):"config"===Me?yield Ba(b,C,x,F,$e,mt):"consent"===Me?b("consent","update",mt):b("set",$e)}catch(nt){ar.error(nt)}})).apply(this,arguments)}return function Q(Me,$e,mt){return ie.apply(this,arguments)}}(ie,b,C,x),{gtagCore:ie,wrappedGtag:window[Q]}}(Mr,Ar,Fs,Di,"gtag");$t=ie,mr=Me,Qo=!0}return Mr[F]=function Fn(b,C,x,F,Q,ie,Me){return Ls.apply(this,arguments)}(b,Ar,Fs,C,mr,Di,x),new ln(b)}function jp(){return lo.apply(this,arguments)}function lo(){return(lo=(0,N.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const Lr="@firebase/analytics";!function fd(){(0,ue._registerComponent)(new fe.wA(Li,(C,{options:x})=>Vp(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ue._registerComponent)(new fe.wA("analytics-internal",function b(C){try{const x=C.getProvider(Li).getImmediate();return{logEvent:(F,Q,ie)=>function $p(b,C,x,F){b=(0,oe.m9)(b),function ht(b,C,x,F,Q){return oo.apply(this,arguments)}($t,Mr[b.app.options.appId],C,x,F).catch(Q=>ar.error(Q))}(x,F,Q,ie)}}catch(x){throw gr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ue.registerVersion)(Lr,"0.8.0"),(0,ue.registerVersion)(Lr,"0.8.0","esm2017")}();var Jo=P(4408),Uu=P(7565);const pd=new class Lc extends Uu.v{}(class Fu extends Jo.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):C.flush(this)}});var gd=P(4986),us=P(8505),mn=P(9468),Wa=P(5363);const cs=new m.GfV("7.4.1"),Fc="__angularfire_symbol__analyticsIsSupportedValue",Vu="__angularfire_symbol__analyticsIsSupported",ho="__angularfire_symbol__remoteConfigIsSupportedValue",Us="__angularfire_symbol__remoteConfigIsSupported",Bu="__angularfire_symbol__messagingIsSupportedValue",Ka="__angularfire_symbol__messagingIsSupported";function Za(b,C,x){if(C){if(1===C.length)return C[0];const ie=C.filter(Me=>Me.app===x);if(1===ie.length)return ie[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Vu]||(globalThis[Vu]=jp().then(b=>globalThis[Fc]=b).catch(()=>globalThis[Fc]=!1)),globalThis[Ka]||(globalThis[Ka]=Lh().then(b=>globalThis[Bu]=b).catch(()=>globalThis[Bu]=!1)),globalThis[Us]||(globalThis[Us]=Ii().then(b=>globalThis[ho]=b).catch(()=>globalThis[ho]=!1));const Vs=(b,C)=>{const x=C?[C]:(0,ne.C6)(),F=[];return x.forEach(Q=>{Q.container.getProvider(b).instances.forEach(Me=>{F.includes(Me)||F.push(Me)})}),F};function Bs(){}class cr{constructor(C,x=pd){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const Q=this.zone;return this.delegate.schedule(function(Me){Q.runGuarded(()=>{C.apply(this,[Me])})},x,F)}}class fo{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bs,{},Bs,Bs)),x.pipe((0,us.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yr=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new cr(Zone.current)),this.insideAngular=x.run(()=>new cr(Zone.current,gd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function _r(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function En(b){return _r(),function Vc(b){return function(x){return(x=x.lift(new fo(b.ngZone))).pipe((0,mn.R)(b.outsideAngular),(0,Wa.Q)(b.insideAngular))}}(_r())(b)}},2090:(ot,Te,P)=>{P.d(Te,{$s:()=>bs,BH:()=>Ve,G6:()=>ze,L:()=>pe,LL:()=>Le,Mn:()=>be,Sg:()=>Se,UG:()=>_e,US:()=>fe,ZB:()=>j,ZR:()=>re,b$:()=>st,d:()=>Ae,eu:()=>ye,hl:()=>V,jU:()=>ge,m9:()=>Ft,ne:()=>gt,pd:()=>ui,r3:()=>kr,ru:()=>Ye,tV:()=>me,uI:()=>Je,vZ:()=>ai,w1:()=>ve,xO:()=>xi,xb:()=>rn,z$:()=>Ie,zI:()=>Y,zd:()=>qi});const ue=function(q){const $=[];let U=0;for(let H=0;H<q.length;H++){let W=q.charCodeAt(H);W<128?$[U++]=W:W<2048?($[U++]=W>>6|192,$[U++]=63&W|128):55296==(64512&W)&&H+1<q.length&&56320==(64512&q.charCodeAt(H+1))?(W=65536+((1023&W)<<10)+(1023&q.charCodeAt(++H)),$[U++]=W>>18|240,$[U++]=W>>12&63|128,$[U++]=W>>6&63|128,$[U++]=63&W|128):($[U++]=W>>12|224,$[U++]=W>>6&63|128,$[U++]=63&W|128)}return $},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,$){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let W=0;W<q.length;W+=3){const Ce=q[W],Be=W+1<q.length,ct=Be?q[W+1]:0,sn=W+2<q.length,Jt=sn?q[W+2]:0;let on=(15&ct)<<2|Jt>>6,pn=63&Jt;sn||(pn=64,Be||(on=64)),H.push(U[Ce>>2],U[(3&Ce)<<4|ct>>4],U[on],U[pn])}return H.join("")},encodeString(q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(q):this.encodeByteArray(ue(q),$)},decodeString(q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(q):function(q){const $=[];let U=0,H=0;for(;U<q.length;){const W=q[U++];if(W<128)$[H++]=String.fromCharCode(W);else if(W>191&&W<224){const Ce=q[U++];$[H++]=String.fromCharCode((31&W)<<6|63&Ce)}else if(W>239&&W<365){const sn=((7&W)<<18|(63&q[U++])<<12|(63&q[U++])<<6|63&q[U++])-65536;$[H++]=String.fromCharCode(55296+(sn>>10)),$[H++]=String.fromCharCode(56320+(1023&sn))}else{const Ce=q[U++],Be=q[U++];$[H++]=String.fromCharCode((15&W)<<12|(63&Ce)<<6|63&Be)}}return $.join("")}(this.decodeStringToByteArray(q,$))},decodeStringToByteArray(q,$){this.init_();const U=$?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let W=0;W<q.length;){const Ce=U[q.charAt(W++)],ct=W<q.length?U[q.charAt(W)]:0;++W;const Jt=W<q.length?U[q.charAt(W)]:64;++W;const Xe=W<q.length?U[q.charAt(W)]:64;if(++W,null==Ce||null==ct||null==Jt||null==Xe)throw Error();H.push(Ce<<2|ct>>4),64!==Jt&&(H.push(ct<<4&240|Jt>>2),64!==Xe&&H.push(Jt<<6&192|Xe))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},pe=function(q){return function(q){const $=ue(q);return fe.encodeByteArray($,!0)}(q).replace(/\./g,"")},me=function(q){try{return fe.decodeString(q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function j(q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return $}for(const U in $)!$.hasOwnProperty(U)||!J(U)||(q[U]=j(q[U],$[U]));return q}function J(q){return"__proto__"!==q}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,U)=>{this.resolve=$,this.reject=U})}wrapCallback($){return(U,H)=>{U?this.reject(U):this.resolve(H),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(U):$(U,H))}}}function Se(q,$){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=$||"demo-project",W=q.iat||0,Ce=q.sub||q.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Be=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:W,exp:W+3600,auth_time:W,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},q);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Be)),""].join(".")}function Ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ge(){return"object"==typeof self&&self.self===self}function Ye(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Ie().indexOf("Electron/")>=0}function ve(){const q=Ie();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function be(){return Ie().indexOf("MSAppHost/")>=0}function ze(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){return"object"==typeof indexedDB}function ye(){return new Promise((q,$)=>{try{let U=!0;const H="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(H);W.onsuccess=()=>{W.result.close(),U||self.indexedDB.deleteDatabase(H),q(!0)},W.onupgradeneeded=()=>{U=!1},W.onerror=()=>{var Ce;$((null===(Ce=W.error)||void 0===Ce?void 0:Ce.message)||"")}}catch(U){$(U)}})}function Y(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class re extends Error{constructor($,U,H){super(U),this.code=$,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor($,U,H){this.service=$,this.serviceName=U,this.errors=H}create($,...U){const H=U[0]||{},W=`${this.service}/${$}`,Ce=this.errors[$],Be=Ce?function Oe(q,$){return q.replace(dt,(U,H)=>{const W=$[H];return null!=W?String(W):`<${H}?>`})}(Ce,H):"Error";return new re(W,`${this.serviceName}: ${Be} (${W}).`,H)}}const dt=/\{\$([^}]+)}/g;function kr(q,$){return Object.prototype.hasOwnProperty.call(q,$)}function rn(q){for(const $ in q)if(Object.prototype.hasOwnProperty.call(q,$))return!1;return!0}function ai(q,$){if(q===$)return!0;const U=Object.keys(q),H=Object.keys($);for(const W of U){if(!H.includes(W))return!1;const Ce=q[W],Be=$[W];if(Cr(Ce)&&Cr(Be)){if(!ai(Ce,Be))return!1}else if(Ce!==Be)return!1}for(const W of H)if(!U.includes(W))return!1;return!0}function Cr(q){return null!==q&&"object"==typeof q}function xi(q){const $=[];for(const[U,H]of Object.entries(q))Array.isArray(H)?H.forEach(W=>{$.push(encodeURIComponent(U)+"="+encodeURIComponent(W))}):$.push(encodeURIComponent(U)+"="+encodeURIComponent(H));return $.length?"&"+$.join("&"):""}function qi(q){const $={};return q.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[W,Ce]=H.split("=");$[decodeURIComponent(W)]=decodeURIComponent(Ce)}}),$}function ui(q){const $=q.indexOf("?");if(!$)return"";const U=q.indexOf("#",$);return q.substring($,U>0?U:void 0)}function gt(q,$){const U=new an(q,$);return U.subscribe.bind(U)}class an{constructor($,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{$(this)}).catch(H=>{this.error(H)})}next($){this.forEachObserver(U=>{U.next($)})}error($){this.forEachObserver(U=>{U.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,U,H){let W;if(void 0===$&&void 0===U&&void 0===H)throw new Error("Missing Observer.");W=function xn(q,$){if("object"!=typeof q||null===q)return!1;for(const U of $)if(U in q&&"function"==typeof q[U])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:U,complete:H},void 0===W.next&&(W.next=ki),void 0===W.error&&(W.error=ki),void 0===W.complete&&(W.complete=ki);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),Ce}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,$)}sendOne($,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{U(this.observers[$])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ki(){}function bs(q,$=1e3,U=2){const H=$*Math.pow(U,q),W=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+W)}function Ft(q){return q&&q._delegate?q._delegate:q}},8836:(ot,Te,P)=>{var m=P(4650);let ne=null;function N(){return ne}const de=new m.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function me(){return(0,m.LFG)(j)}()},providedIn:"platform"}),n})();const B=new m.OlP("Location Initialized");let j=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){J()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){J()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ve(){return new j((0,m.LFG)(de))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Ye)},providedIn:"root"}),n})();const ge=new m.OlP("appBaseHref");let Ye=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Je(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Je(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(ge,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),st=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(ge,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(je(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Se,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(m.LFG(_e))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ve(){return new Ae((0,m.LFG)(_e))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class Oo{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ji=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Oo(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),On(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{On(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function On(n,e){n.context.$implicit=e.item}let Tr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Yr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){No("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){No("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Yr{constructor(){this.$implicit=null,this.ngIf=null}}function No(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Aa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const Jn="browser";function Du(n){return n===Jn}function Qr(n){return"server"===n}let Xs=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Jr((0,m.LFG)(de),window)}),n})();class Jr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Sa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=es(this.window.history)||es(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function es(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ei extends class Bo extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){ne||(ne=n)}(new Ei)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function rs(){return ns=ns||document.querySelector("base"),ns?ns.getAttribute("href"):null}();return null==t?null:function jo(n){is=is||document.createElement("a"),is.setAttribute("href",n);const e=is.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let is,ns=null;const vt=new m.OlP("TRANSITION_ID"),nd=[{provide:m.ip1,useFactory:function Dn(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[vt,de,m.zs3],multi:!0}];let Mc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const eo=new m.OlP("EventManagerPlugins");let xs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(eo),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Tu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let $o=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends $o{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Pt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Pt))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Pt(n){N().remove(n)}const Rs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zo=/%COMP%/g;function Ho(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ho(n,o,t):(o=o.replace(zo,n),t.push(o))}return t}function Oa(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Os=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Vn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ss(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case m.ifc.ShadowDom:return new Ac(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ho(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(xs),m.LFG(De),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Vn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Rs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(to(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(to(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Rs[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Rs[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Oa(r)):this.eventManager.addEventListener(e,t,Oa(r))}}function to(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ss extends Vn{constructor(e,t,r,o){super(e),this.component=r;const u=Ho(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ra(n){return"_ngcontent-%COMP%".replace(zo,n)}(o+"-"+r.id),this.hostAttr=function ka(n){return"_nghost-%COMP%".replace(zo,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ac extends Vn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ho(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Sc=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const rd=["alt","control","meta","shift"],xc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},no={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let La=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(rd.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=d,g}static getEventFullKey(t){let r="",o=function Rc(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&no.hasOwnProperty(e)&&(e=no[e]))}return xc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),rd.forEach(u=>{u!=o&&(0,Mu[u])(t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ph=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:Jn},{provide:m.g9A,useValue:function xu(){Ei.makeCurrent()},multi:!0},{provide:de,useFactory:function ku(){return(0,m.RDi)(document),document},deps:[]}]),Ou=new m.OlP(""),Xn=[{provide:m.rWj,useClass:class Cu{addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],hi=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Ru(){return new m.qLn},deps:[]},{provide:eo,useClass:Sc,multi:!0,deps:[de,m.R0b,m.Lbi]},{provide:eo,useClass:La,multi:!0,deps:[de]},{provide:Os,useClass:Os,deps:[xs,De,m.AFp]},{provide:m.FYo,useExisting:Os},{provide:$o,useExisting:De},{provide:De,useClass:De,deps:[de]},{provide:xs,useClass:xs,deps:[eo,m.R0b]},{provide:class pr{},useClass:Mc,deps:[]},[]];let In=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:vt,useExisting:m.AFp},nd]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ou,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...hi,...Xn],imports:[Aa,m.hGG]}),n})(),sd=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function kc(){return new sd((0,m.LFG)(de))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Pn=P(7579);class Ht extends Pn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Cn=P(9751);const{isArray:Bn}=Array,{getPrototypeOf:so,prototype:Zo,keys:Ha}=Object;var cn=P(8996),os=P(4671),ht=P(4004);const{isArray:oo}=Array;var bi=P(7669),jn=P(5403),Ga=P(9672);function fi(...n){const e=(0,bi.yG)(n),t=(0,bi.jO)(n),{args:r,keys:o}=function qo(n){if(1===n.length){const e=n[0];if(Bn(e))return{args:e,keys:null};if(function Pu(n){return n&&"object"==typeof n&&so(n)===Zo}(e)){const t=Ha(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,cn.D)([],e);const u=new Cn.y(function Ps(n,e,t=os.y){return r=>{Yo(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let w=0;w<o;w++)Yo(e,()=>{const D=(0,cn.D)(n[w],e);let S=!1;D.subscribe((0,jn.x)(r,k=>{u[w]=k,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function uo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):os.y));return t?u.pipe(function ao(n){return(0,ht.U)(e=>function Nc(n,e){return oo(e)?n(...e):n(e)}(n,e))}(t)):u}function Yo(n,e,t){n?(0,Ga.f)(t,n,e):e()}var co=P(8421),Ln=P(4482);function $n(n,e){return(0,Ln.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,jn.x)(r,w=>{o?.unsubscribe();let D=0;const S=u++;(0,co.Xf)(n(w,S)).subscribe(o=(0,jn.x)(r,k=>r.next(e?e(w,k,S,D++):k),()=>{o=null,g()}))},()=>{d=!0,g()}))})}var as=P(515);function Fn(n){return n<=0?()=>as.E:(0,Ln.e)((e,t)=>{let r=0;e.subscribe((0,jn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}var Ls=P(5032);function ln(n){return(0,Ln.e)((e,t)=>{(0,co.Xf)(n).subscribe((0,jn.x)(t,()=>t.complete(),Ls.Z)),!t.closed&&e.subscribe(t)})}const Mr=["*"];class Ar{constructor(e){this._ngZone=e,this._pending=[],this._listeners=[],this._targetStream=new Ht(void 0)}_clearListeners(){for(const e of this._listeners)e.remove();this._listeners=[]}getLazyEmitter(e){return this._targetStream.pipe($n(t=>{const r=new Cn.y(o=>{if(!t)return void this._pending.push({observable:r,observer:o});const u=t.addListener(e,d=>{this._ngZone.run(()=>o.next(d))});return this._listeners.push(u),()=>u.remove()});return r}))}setTarget(e){const t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}}const Fs={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"};let mr=(()=>{class n{constructor(t,r,o){if(this._elementRef=t,this._ngZone=r,this._eventManager=new Ar(this._ngZone),this.height="500px",this.width="500px",this._options=Fs,this.mapInitialized=new m.vpe,this.authFailure=new m.vpe,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=Du(o),this._isBrowser){const u=window;this._existingAuthFailureCallback=u.gm_authFailure,u.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}set center(t){this._center=t}set zoom(t){this._zoom=t}set options(t){this._options=t||Fs}ngOnChanges(t){(t.height||t.width)&&this._setSize();const r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&null!=this._zoom&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),this._ngZone.runOutsideAngular(()=>{this.googleMap=new google.maps.Map(this._mapEl,this._combineOptions())}),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap))}ngOnDestroy(){this._eventManager.destroy(),this._isBrowser&&(window.gm_authFailure=this._existingAuthFailureCallback)}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_setSize(){if(this._mapEl){const t=this._mapEl.style;t.height=null===this.height?"":Qo(this.height)||"500px",t.width=null===this.width?"":Qo(this.width)||"500px"}}_combineOptions(){const t=this._options||{};return{...t,center:this._center||t.center||Fs.center,zoom:this._zoom??t.zoom??Fs.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||Fs.mapTypeId}}_assertInitialized(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.R0b),m.Y36(m.Lbi))},n.\u0275cmp=m.Xpm({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[m.TTD],ngContentSelectors:Mr,decls:2,vars:0,consts:[[1,"map-container"]],template:function(t,r){1&t&&(m.F$t(),m._UZ(0,"div",0),m.Hsn(1))},encapsulation:2,changeDetection:0}),n})();const $t=/([A-Za-z%]+)$/;function Qo(n){return null==n?"":$t.test(n)?n:`${n}px`}const fy={position:{lat:37.421995,lng:-122.084092}};let Hh=(()=>{class n{constructor(t,r){this._googleMap=t,this._ngZone=r,this._eventManager=new Ar(this._ngZone),this.animationChanged=this._eventManager.getLazyEmitter("animation_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.clickableChanged=this._eventManager.getLazyEmitter("clickable_changed"),this.cursorChanged=this._eventManager.getLazyEmitter("cursor_changed"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.draggableChanged=this._eventManager.getLazyEmitter("draggable_changed"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.flatChanged=this._eventManager.getLazyEmitter("flat_changed"),this.iconChanged=this._eventManager.getLazyEmitter("icon_changed"),this.mapMousedown=this._eventManager.getLazyEmitter("mousedown"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.mapMouseup=this._eventManager.getLazyEmitter("mouseup"),this.positionChanged=this._eventManager.getLazyEmitter("position_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.shapeChanged=this._eventManager.getLazyEmitter("shape_changed"),this.titleChanged=this._eventManager.getLazyEmitter("title_changed"),this.visibleChanged=this._eventManager.getLazyEmitter("visible_changed"),this.zindexChanged=this._eventManager.getLazyEmitter("zindex_changed")}set title(t){this._title=t}set position(t){this._position=t}set label(t){this._label=t}set clickable(t){this._clickable=t}set options(t){this._options=t}set icon(t){this._icon=t}set visible(t){this._visible=t}ngOnInit(){this._googleMap._isBrowser&&(this._ngZone.runOutsideAngular(()=>{this.marker=new google.maps.Marker(this._combineOptions())}),this._assertInitialized(),this.marker.setMap(this._googleMap.googleMap),this._eventManager.setTarget(this.marker))}ngOnChanges(t){const{marker:r,_title:o,_position:u,_label:d,_clickable:g,_icon:w,_visible:D}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&void 0!==o&&r.setTitle(o),t.position&&u&&r.setPosition(u),t.label&&void 0!==d&&r.setLabel(d),t.clickable&&void 0!==g&&r.setClickable(g),t.icon&&w&&r.setIcon(w),t.visible&&void 0!==D&&r.setVisible(D))}ngOnDestroy(){this._eventManager.destroy(),this.marker&&this.marker.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_combineOptions(){const t=this._options||fy;return{...t,title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible}}_assertInitialized(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(mr),m.Y36(m.R0b))},n.\u0275dir=m.lG2({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged"},exportAs:["mapMarker"],features:[m.TTD]}),n})(),Uu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function lt(...n){const e=(0,bi.yG)(n);return(0,cn.D)(n,e)}const us=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var mn=P(8189);function cs(...n){return function Wa(){return(0,mn.J)(1)}()((0,cn.D)(n,(0,bi.yG)(n)))}function Fc(n){return new Cn.y(e=>{(0,co.Xf)(n()).subscribe(e)})}var Vu=P(9635),ho=P(576);function Us(n,e){const t=(0,ho.m)(n)?n:()=>n,r=o=>o.error(t());return new Cn.y(e?o=>e.schedule(r,0,o):r)}var Bu=P(727);function Ka(){return(0,Ln.e)((n,e)=>{let t=null;n._refCount++;const r=(0,jn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Xo extends Cn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ln.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,jn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bu.w0.EMPTY)}return e}refCount(){return Ka()(this)}}function ju(...n){const e=(0,bi.yG)(n);return(0,Ln.e)((t,r)=>{(e?cs(n,t,e):cs(n,t)).subscribe(r)})}function Sr(n,e){return(0,Ln.e)((t,r)=>{let o=0;t.subscribe((0,jn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var ur=P(5577);function Za(n){return(0,Ln.e)((e,t)=>{let r=!1;e.subscribe((0,jn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Vs(n=Bs){return(0,Ln.e)((e,t)=>{let r=!1;e.subscribe((0,jn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Bs(){return new us}function cr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Sr((o,u)=>n(o,u,r)):os.y,Fn(1),t?Za(e):Vs(()=>new us))}function fo(n,e){return(0,ho.m)(e)?(0,ur.z)(n,e,1):(0,ur.z)(n,1)}var yr=P(8505);function _r(n){return(0,Ln.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,jn.x)(t,void 0,void 0,d=>{u=(0,co.Xf)(n(d,_r(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function $u(n,e,t,r,o){return(u,d)=>{let g=t,w=e,D=0;u.subscribe((0,jn.x)(d,S=>{const k=D++;w=g?n(w,S,k):(g=!0,S),r&&d.next(w)},o&&(()=>{g&&d.next(w),d.complete()})))}}function lr(n,e){return(0,Ln.e)($u(n,e,arguments.length>=2,!0))}function po(n){return n<=0?()=>as.E:(0,Ln.e)((e,t)=>{let r=[];e.subscribe((0,jn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Uc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Sr((o,u)=>n(o,u,r)):os.y,po(1),t?Za(e):Vs(()=>new us))}function zu(n){return(0,Ln.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Rt="primary";class b{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function C(n){return new b(n)}function x(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Q(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!ie(n[o],e[o]))return!1;return!0}function ie(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Me(n){return Array.prototype.concat.apply([],n)}function $e(n){return n.length>0?n[n.length-1]:null}function nt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ft(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,cn.D)(Promise.resolve(n)):lt(n)}const Xr={exact:function md(n,e,t){if(!go(n.segments,e.segments)||!$s(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!md(n.children[r],e.children[r],t))return!1;return!0},subset:ls},ea={exact:function Ci(n,e){return Q(n,e)},subset:function Bc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ie(n[t],e[t]))},ignored:()=>!0};function gi(n,e,t){return Xr[t.paths](n.root,e.root,t.matrixParams)&&ea[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ls(n,e,t){return js(n,e,e.segments,t)}function js(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!go(o,t)||e.hasChildren()||!$s(o,t,r))}if(n.segments.length===t.length){if(!go(n.segments,t)||!$s(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ls(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(go(n.segments,o)&&$s(n.segments,o,r)&&n.children[Rt])&&js(n.children[Rt],e,u,r)}}function $s(n,e,t){return e.every((r,o)=>ea[t](n[o].parameters,r.parameters))}class zs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=C(this.queryParams)),this._queryParamMap}toString(){return Hp.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,nt(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gh(this)}}class jc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=C(this.parameters)),this._parameterMap}toString(){return Kp(this)}}function go(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Hu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new zp},providedIn:"root"}),n})();class zp{parse(e){const t=new Kh(e);return new zs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${qa(e.root,!0)}`,r=function vd(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${$c(t)}=${$c(o)}`).join("&"):`${$c(t)}=${$c(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _d(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Hp=new zp;function Gh(n){return n.segments.map(e=>Kp(e)).join("/")}function qa(n,e){if(!n.hasChildren())return Gh(n);if(e){const t=n.children[Rt]?qa(n.children[Rt],!1):"",r=[];return nt(n.children,(o,u)=>{u!==Rt&&r.push(`${u}:${qa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function py(n,e){let t=[];return nt(n.children,(r,o)=>{o===Rt&&(t=t.concat(e(r,o)))}),nt(n.children,(r,o)=>{o!==Rt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Rt?[qa(n.children[Rt],!1)]:[`${o}:${qa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${Gh(n)}/${t[0]}`:`${Gh(n)}/(${t.join("//")})`}}function Gp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $c(n){return Gp(n).replace(/%3B/gi,";")}function zc(n){return Gp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ds(n){return decodeURIComponent(n)}function Wp(n){return ds(n.replace(/\+/g,"%20"))}function Kp(n){return`${zc(n.path)}${function Lw(n){return Object.keys(n).map(e=>`;${zc(e)}=${zc(n[e])}`).join("")}(n.parameters)}`}const Wh=/^[^\/()?;=#]+/;function Gu(n){const e=n.match(Wh);return e?e[0]:""}const Zp=/^[^=?&#]+/,Yp=/^[^&#]+/;class Kh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new Ut(e,t)),r}parseSegment(){const e=Gu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new jc(ds(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Gu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Gu(this.remaining);o&&(r=o,this.capture(r))}e[ds(t)]=ds(r)}parseQueryParam(e){const t=function qp(n){const e=n.match(Zp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function gy(n){const e=n.match(Yp);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Wp(t),u=Wp(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Gu(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new m.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Rt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Rt]:new Ut([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function Zh(n){return n.segments.length>0?new Ut([],{[Rt]:n}):n}function Wu(n){const e={};for(const r of Object.keys(n.children)){const u=Wu(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function my(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}function ei(n){return n instanceof zs}function _y(n,e,t,r,o){if(0===t.length)return Qa(e.root,e.root,e.root,r,o);const u=function Jp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ta(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return nt(u.outlets,(w,D)=>{g[D]="string"==typeof w?w.split("/"):w}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,w)=>{0==w&&"."===g||(0==w&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new ta(t,e,r)}(t);return u.toRoot()?Qa(e.root,e.root,new Ut([],{}),r,o):function d(w){const D=function wy(n,e,t,r){if(n.isAbsolute)return new Ku(e.root,!0,0);if(-1===r)return new Ku(t,t===e.root,0);return function Ja(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new m.vHH(4005,!1);o=r.segments.length}return new Ku(r,!1,o-u)}(t,r+(wd(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=D.processChildren?hs(D.segmentGroup,D.index,u.commands):Ui(D.segmentGroup,D.index,u.commands);return Qa(e.root,D.segmentGroup,S,r,o)}(n.snapshot?._lastPathIndex)}function wd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Id(n){return"object"==typeof n&&null!=n&&n.outlets}function Qa(n,e,t,r,o){let d,u={};r&&nt(r,(w,D)=>{u[D]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),d=n===e?t:vy(n,e,t);const g=Zh(Wu(d));return new zs(g,u,o)}function vy(n,e,t){const r={};return nt(n.children,(o,u)=>{r[u]=o===e?t:vy(o,e,t)}),new Ut(n.segments,r)}class ta{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wd(r[0]))throw new m.vHH(4003,!1);const o=r.find(Id);if(o&&o!==$e(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ku{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ui(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return hs(n,e,t);const r=function tg(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(Id(g))break;const w=`${g}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!Ey(w,D,d))return u;r+=2}else{if(!Ey(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ut(n.segments.slice(0,r.pathIndex),{});return u.children[Rt]=new Ut(n.segments.slice(r.pathIndex),n.children),hs(u,0,o)}return r.match&&0===o.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?Ed(n,e,t):r.match?hs(n,0,o):Ed(n,e,t)}function hs(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function eg(n){return Id(n[0])?n[0].outlets:{[Rt]:n}}(t),o={};return nt(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Ui(n.children[d],e,u))}),nt(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Ut(n.segments,o)}}function Ed(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Id(u)){const w=bd(u.outlets);return new Ut(r,w)}if(0===o&&wd(t[0])){r.push(new jc(n.segments[e].path,Iy(t[0]))),o++;continue}const d=Id(u)?u.outlets[Rt]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&wd(g)?(r.push(new jc(d,Iy(g))),o+=2):(r.push(new jc(d,{})),o++)}return new Ut(r,{})}function bd(n){const e={};return nt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ed(new Ut([],{}),0,t))}),e}function Iy(n){const e={};return nt(n,(t,r)=>e[r]=`${t}`),e}function Ey(n,e,t){return n==t.path&&Q(e,t.parameters)}class na{constructor(e,t){this.id=e,this.url=t}}class Hc extends na{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mo extends na{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xa extends na{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qh extends na{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Uw extends na{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ng extends na{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yh extends na{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qh extends na{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class by extends na{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dy{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gc{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Dd{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cy{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jh{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rg{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gn{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ig{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Wc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Wc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ra(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ra(e,this._root).map(t=>t.value)}}function Wc(n,e){if(n===e.value)return e;for(const t of e.children){const r=Wc(n,t);if(r)return r}return null}function ra(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ra(n,t);if(r.length)return r.unshift(e),r}return[]}class yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function eu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sg extends ig{constructor(e,t){super(e),this.snapshot=t,Td(this,e)}toString(){return this.snapshot.toString()}}function og(n,e){const t=function My(n,e){const d=new ia([],{},{},"",{},Rt,e,null,n.root,-1,{});return new Cd("",new yo(d,[]))}(n,e),r=new Ht([new jc("",{})]),o=new Ht({}),u=new Ht({}),d=new Ht({}),g=new Ht(""),w=new Kc(r,o,d,g,u,Rt,e,t.root);return w.snapshot=t.root,new sg(new yo(w,[]),t)}class Kc{constructor(e,t,r,o,u,d,g,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>C(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>C(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ag(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function tu(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ia{constructor(e,t,r,o,u,d,g,w,D,S,k,z){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=S,this._correctedLastPathIndex=z??S,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=C(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=C(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Cd extends ig{constructor(e,t){super(t),this.url=e,Td(this,t)}toString(){return Zc(this._root)}}function Td(n,e){e.value._routerState=n,e.children.forEach(t=>Td(n,t))}function Zc(n){const e=n.children.length>0?` { ${n.children.map(Zc).join(", ")} } `:"";return`${n.value}${e}`}function Xh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Q(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Q(e.params,t.params)||n.params.next(t.params),function F(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Q(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Q(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fr(n,e){const t=Q(n.params,e.params)&&function yd(n,e){return go(n,e)&&n.every((t,r)=>Q(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fr(n.parent,e.parent))}function sa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Vw(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return sa(n,r,o);return sa(n,r)})}(n,e,t);return new yo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>sa(n,g)),d}}const r=function ef(n){return new Kc(new Ht(n.url),new Ht(n.params),new Ht(n.queryParams),new Ht(n.fragment),new Ht(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>sa(n,u));return new yo(r,o)}}const nu="ngNavigationCancelingError";function tf(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ei(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Md(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Md(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[nu]=!0,r.cancellationCode=e,t&&(r.url=t),r}function oa(n){return _o(n)&&ei(n.url)}function _o(n){return n&&n[nu]}class Ad{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new aa,this.attachRef=null}}let aa=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ad,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sd=!1;let qc=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=o||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Sd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Sd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Sd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,Sd);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,w=new Yc(t,g,o.injector);if(r&&function er(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(d);this.activated=o.createComponent(D,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(aa),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Yc{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Kc?this.route:e===aa?this.childContexts:this.parent.get(e,t)}}let Qc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[qc],encapsulation:2}),n})();function qu(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xc(n){const e=n.children&&n.children.map(Xc),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=Qc),t}function Vi(n){return n.outlet||Rt}function rf(n,e){const t=n.filter(r=>Vi(r)===e);return t.push(...n.filter(r=>Vi(r)!==e)),t}function y(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class p{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=eu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),nt(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=eu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=eu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=eu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new rg(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Cy(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Xh(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),Xh(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=y(o.snapshot),w=g?.get(m._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=g,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class v{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class M{constructor(e,t){this.component=e,this.route=t}}function O(n,e,t){const r=n._root;return Fe(r,e?e._root:null,t,[r.value])}function ce(n,e,t){return(y(e)??t).get(n)}function Fe(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=eu(e);return n.children.forEach(d=>{(function Qe(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function yt(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!go(n.url,e.url);case"pathParamsOrQueryParamsChange":return!go(n.url,e.url)||!Q(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fr(n,e)||!Q(n.queryParams,e.queryParams);default:return!Fr(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new v(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Fe(n,e,u.component?g?g.children:null:t,r,o),w&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new M(g.outlet.component,d))}else d&&ut(e,g,o),o.canActivateChecks.push(new v(r)),Fe(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),nt(u,(d,g)=>ut(d,t.getContext(g),o)),o}function ut(n,e,t){const r=eu(n),o=n.value;nt(r,(u,d)=>{ut(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new M(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Tn(n){return"function"==typeof n}function af(n){return n instanceof us||"EmptyError"===n?.name}const ca=Symbol("INITIAL_VALUE");function Qu(){return $n(n=>fi(n.map(e=>e.pipe(Fn(1),ju(ca)))).pipe((0,ht.U)(e=>{for(const t of e)if(!0!==t){if(t===ca)return ca;if(!1===t||t instanceof zs)return t}return!0}),Sr(e=>e!==ca),Fn(1)))}function ky(n){return(0,Vu.z)((0,yr.b)(e=>{if(ei(e))throw tf(0,e)}),(0,ht.U)(e=>!0===e))}const Ny={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dg(n,e,t,r,o){const u=nl(n,e,t);return u.matched?function Oy(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?lt(o.map(d=>{const g=n.get(d),w=function cg(n){return n&&Tn(n.canMatch)}(g)?g.canMatch(e,t):g(e,t);return ft(w)})).pipe(Qu(),ky()):lt(!0)}(r=qu(e,r),e,t).pipe((0,ht.U)(d=>!0===d?u:{...Ny})):lt(u)}function nl(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ny}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||x)(t,n,e);if(!o)return{...Ny};const u={};nt(o.posParams,(g,w)=>{u[w]=g.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function hg(n,e,t,r,o="corrected"){if(t.length>0&&function Ww(n,e,t){return t.some(r=>fg(n,e,r)&&Vi(r)!==Rt)}(n,t,r)){const d=new Ut(e,function Kb(n,e,t,r){const o={};o[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Vi(u)!==Rt){const d=new Ut([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Vi(u)]=d}return o}(n,e,r,new Ut(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Zb(n,e,t){return t.some(r=>fg(n,e,r))}(n,t,r)){const d=new Ut(n.segments,function Wb(n,e,t,r,o,u){const d={};for(const g of r)if(fg(n,t,g)&&!o[Vi(g)]){const w=new Ut([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Vi(g)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ut(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function fg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Kw(n,e,t,r){return!!(Vi(n)===r||r!==Rt&&fg(e,t,n))&&("**"===n.path||nl(e,n,t).matched)}function Zw(n,e,t){return 0===e.length&&!n.children[t]}const kd=!1;class pg{constructor(e){this.segmentGroup=e||null}}class qw{constructor(e){this.urlTree=e}}function uf(n){return Us(new pg(n))}function Py(n){return Us(new qw(n))}class Ly{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=hg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Rt).pipe((0,ht.U)(u=>this.createUrlTree(Wu(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_r(u=>{if(u instanceof qw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof pg?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Rt).pipe((0,ht.U)(o=>this.createUrlTree(Wu(o),e.queryParams,e.fragment))).pipe(_r(o=>{throw o instanceof pg?this.noMatchError(o):o}))}noMatchError(e){return new m.vHH(4002,kd)}createUrlTree(e,t,r){const o=Zh(e);return new zs(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ht.U)(u=>new Ut([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,cn.D)(o).pipe(fo(u=>{const d=r.children[u],g=rf(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,ht.U)(w=>({segment:w,outlet:u})))}),lr((u,d)=>(u[d.outlet]=d.segment,u),{}),Uc())}expandSegment(e,t,r,o,u,d){return(0,cn.D)(r).pipe(fo(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe(_r(D=>{if(D instanceof pg)return lt(null);throw D}))),cr(g=>!!g),_r((g,w)=>{if(af(g))return Zw(t,o,u)?lt(new Ut([],{})):uf(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return Kw(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):uf(t):uf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Py(u):this.lineralizeSegments(r,u).pipe((0,ur.z)(d=>{const g=new Ut(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:w,remainingSegments:D,positionalParamSegments:S}=nl(t,o,u);if(!g)return uf(t);const k=this.applyRedirectCommands(w,o.redirectTo,S);return o.redirectTo.startsWith("/")?Py(k):this.lineralizeSegments(o,k).pipe((0,ur.z)(z=>this.expandSegment(e,t,r,z.concat(D),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=qu(r,e),r.loadChildren?(r._loadedRoutes?lt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ht.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Ut(o,{})))):lt(new Ut(o,{}))):dg(t,r,o,e).pipe($n(({matched:d,consumedSegments:g,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,ur.z)(S=>{const k=S.injector??e,z=S.routes,{segmentGroup:X,slicedSegments:se}=hg(t,g,w,z),xe=new Ut(X.segments,X.children);if(0===se.length&&xe.hasChildren())return this.expandChildren(k,z,xe).pipe((0,ht.U)(Bt=>new Ut(g,Bt)));if(0===z.length&&0===se.length)return lt(new Ut(g,{}));const Ue=Vi(r)===u;return this.expandSegment(k,xe,z,se,Ue?Rt:u,!0).pipe((0,ht.U)(Ct=>new Ut(g.concat(Ct.segments),Ct.children)))})):uf(t)))}getChildConfig(e,t,r){return t.children?lt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?lt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Gw(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?lt(!0):lt(o.map(d=>{const g=n.get(d),w=function el(n){return n&&Tn(n.canLoad)}(g)?g.canLoad(e,t):g(e,t);return ft(w)})).pipe(Qu(),ky())}(e,t,r).pipe((0,ur.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,yr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Yb(n){return Us(Md(kd,3))}())):lt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return lt(r);if(o.numberOfChildren>1||!o.children[Rt])return Us(new m.vHH(4e3,kd));o=o.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new zs(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return nt(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return nt(t.children,(g,w)=>{d[w]=this.createSegmentGroup(e,g,r,o)}),new Ut(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new m.vHH(4001,kd);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class mi{}class Qb{constructor(e,t,r,o,u,d,g,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g,this.urlSerializer=w}recognize(){const e=hg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Rt).pipe((0,ht.U)(t=>{if(null===t)return null;const r=new ia([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new yo(r,t),u=new Cd(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=ag(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,cn.D)(Object.keys(r.children)).pipe(fo(o=>{const u=r.children[o],d=rf(t,o);return this.processSegmentGroup(e,d,u,o)}),lr((o,u)=>o&&u?(o.push(...u),o):null),function En(n,e=!1){return(0,Ln.e)((t,r)=>{let o=0;t.subscribe((0,jn.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),Za(null),Uc(),(0,ht.U)(o=>{if(null===o)return null;const u=Uy(o);return function Jb(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,cn.D)(t).pipe(fo(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),cr(d=>!!d),_r(d=>{if(af(d))return Zw(r,o,u)?lt([]):lt(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Kw(t,r,o,u))return lt(null);let d;if("**"===t.path){const g=o.length>0?$e(o).parameters:{},w=Jw(r)+o.length;d=lt({snapshot:new ia(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eI(t),Vi(t),t.component??t._loadedComponent??null,t,Vy(r),w,tI(t),w),consumedSegments:[],remainingSegments:[]})}else d=dg(r,t,o,e).pipe((0,ht.U)(({matched:g,consumedSegments:w,remainingSegments:D,parameters:S})=>{if(!g)return null;const k=Jw(r)+w.length;return{snapshot:new ia(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eI(t),Vi(t),t.component??t._loadedComponent??null,t,Vy(r),k,tI(t),k),consumedSegments:w,remainingSegments:D}}));return d.pipe($n(g=>{if(null===g)return lt(null);const{snapshot:w,consumedSegments:D,remainingSegments:S}=g;e=t._injector??e;const k=t._loadedInjector??e,z=function Qw(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:X,slicedSegments:se}=hg(r,D,S,z.filter(Ue=>void 0===Ue.redirectTo),this.relativeLinkResolution);if(0===se.length&&X.hasChildren())return this.processChildren(k,z,X).pipe((0,ht.U)(Ue=>null===Ue?null:[new yo(w,Ue)]));if(0===z.length&&0===se.length)return lt([new yo(w,[])]);const xe=Vi(t)===u;return this.processSegment(k,z,X,se,xe?Rt:u).pipe((0,ht.U)(Ue=>null===Ue?null:[new yo(w,Ue)]))}))}}function Xb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Uy(n){const e=[],t=new Set;for(const r of n){if(!Xb(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Uy(r.children);e.push(new yo(r.value,o))}return e.filter(r=>!t.has(r))}function Vy(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Jw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function eI(n){return n.data||{}}function tI(n){return n.resolve||{}}const By=Symbol("RouteTitle");function iD(n){return"string"==typeof n.title||null===n.title}function gg(n){return $n(e=>{const t=n(e);return t?(0,cn.D)(t).pipe((0,ht.U)(()=>e)):lt(e)})}let sD=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Rt);return r}getResolvedTitleForRoute(t){return t.data[By]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(vo)},providedIn:"root"}),n})(),vo=(()=>{class n extends sD{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(sd))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class jy{}class oD extends class $y{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const zy=new m.OlP("",{providedIn:"root",factory:()=>({})}),Hy=new m.OlP("ROUTES");let mg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return lt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ft(t.loadComponent()).pipe((0,yr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),zu(()=>{this.componentLoaders.delete(t)})),o=new Xo(r,()=>new Pn.x).pipe(Ka());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return lt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ht.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,D,S=!1;Array.isArray(g)?D=g:(w=g.create(t).injector,D=Me(w.get(Hy,[],m.XFs.Self|m.XFs.Optional)));return{routes:D.map(Xc),injector:w}}),zu(()=>{this.childrenLoaders.delete(r)})),d=new Xo(u,()=>new Pn.x).pipe(Ka());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return ft(t()).pipe((0,ur.z)(r=>r instanceof m.YKP||Array.isArray(r)?lt(r):(0,cn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Gy{}class Wy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function VT(n){throw n}function Ld(n,e,t){return e.parse("/")}const Ky={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function yg(){const n=(0,m.f3M)(Hu),e=(0,m.f3M)(aa),t=(0,m.f3M)(Ae),r=(0,m.f3M)(m.zs3),o=(0,m.f3M)(m.Sil),u=(0,m.f3M)(Hy,{optional:!0})??[],d=(0,m.f3M)(zy,{optional:!0})??{},g=(0,m.f3M)(vo),w=(0,m.f3M)(sD,{optional:!0}),D=(0,m.f3M)(Gy,{optional:!0}),S=(0,m.f3M)(jy,{optional:!0}),k=new Mi(null,n,e,t,r,o,Me(u));return D&&(k.urlHandlingStrategy=D),S&&(k.routeReuseStrategy=S),k.titleStrategy=w??g,function aD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,k),k}let Mi=(()=>{class n{constructor(t,r,o,u,d,g,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Pn.x,this.errorHandler=VT,this.malformedUriErrorHandler=Ld,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>lt(void 0),this.urlHandlingStrategy=new Wy,this.routeReuseStrategy=new oD,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(mg),this.configLoader.onLoadEndListener=z=>this.triggerEvent(new Gc(z)),this.configLoader.onLoadStartListener=z=>this.triggerEvent(new Dy(z)),this.ngModule=d.get(m.h0i),this.console=d.get(m.c2e);const k=d.get(m.R0b);this.isNgZoneEnabled=k instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Hn(){return new zs(new Ut([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=og(this.currentUrlTree,this.rootComponentType),this.transitions=new Ht({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Sr(o=>0!==o.id),(0,ht.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$n(o=>{let u=!1,d=!1;return lt(o).pipe((0,yr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$n(g=>{const w=this.browserUrlTree.toString(),D=!this.navigated||g.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return iI(g.source)&&(this.browserUrlTree=g.extractedUrl),lt(g).pipe($n(k=>{const z=this.transitions.getValue();return r.next(new Hc(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),z!==this.transitions.getValue()?as.E:Promise.resolve(k)}),function Yw(n,e,t,r){return $n(o=>function Ti(n,e,t,r,o){return new Ly(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,ht.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,yr.b)(k=>{this.currentNavigation={...this.currentNavigation,finalUrl:k.urlAfterRedirects},o.urlAfterRedirects=k.urlAfterRedirects}),function tD(n,e,t,r,o,u){return(0,ur.z)(d=>function Fy(n,e,t,r,o,u,d="emptyOnly",g="legacy"){return new Qb(n,e,t,r,o,d,g,u).recognize().pipe($n(w=>null===w?function cf(n){return new Cn.y(e=>e.error(n))}(new mi):lt(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,ht.U)(g=>({...d,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,yr.b)(k=>{if(o.targetSnapshot=k.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const X=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(X,k)}this.browserUrlTree=k.urlAfterRedirects}const z=new Uw(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);r.next(z)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:X,source:se,restoredState:xe,extras:Ue}=g,Et=new Hc(z,this.serializeUrl(X),se,xe);r.next(Et);const Ct=og(X,this.rootComponentType).snapshot;return lt(o={...g,targetSnapshot:Ct,urlAfterRedirects:X,extras:{...Ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),as.E}),(0,yr.b)(g=>{const w=new ng(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(w)}),(0,ht.U)(g=>o={...g,guards:O(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function jw(n,e){return(0,ur.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?lt({...t,guardsResult:!0}):function lg(n,e,t,r){return(0,cn.D)(n).pipe((0,ur.z)(o=>function Hw(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?lt(u.map(g=>{const w=ce(g,e,o);return ft(function ug(n){return n&&Tn(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):w(n,e,t,r)).pipe(cr())})).pipe(Qu()):lt(!0)}(o.component,o.route,t,e,r)),cr(o=>!0!==o,!0))}(d,r,o,n).pipe((0,ur.z)(g=>g&&function fs(n){return"boolean"==typeof n}(g)?function $w(n,e,t,r){return(0,cn.D)(e).pipe(fo(o=>cs(function Gb(n,e){return null!==n&&e&&e(new Dd(n)),lt(!0)}(o.route.parent,r),function FT(n,e){return null!==n&&e&&e(new Jh(n)),lt(!0)}(o.route,r),function Ry(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function K(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Fc(()=>lt(d.guards.map(w=>{const D=ce(w,d.node,t);return ft(function tl(n){return n&&Tn(n.canActivateChild)}(D)?D.canActivateChild(r,n):D(r,n)).pipe(cr())})).pipe(Qu())));return lt(u).pipe(Qu())}(n,o.path,t),function zw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return lt(!0);const o=r.map(u=>Fc(()=>{const d=ce(u,e,t);return ft(function sf(n){return n&&Tn(n.canActivate)}(d)?d.canActivate(e,n):d(e,n)).pipe(cr())}));return lt(o).pipe(Qu())}(n,o.route,t))),cr(o=>!0!==o,!0))}(r,u,n,e):lt(g)),(0,ht.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,yr.b)(g=>{if(o.guardsResult=g.guardsResult,ei(g.guardsResult))throw tf(0,g.guardsResult);const w=new Yh(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(w)}),Sr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),gg(g=>{if(g.guards.canActivateChecks.length)return lt(g).pipe((0,yr.b)(w=>{const D=new Qh(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),$n(w=>{let D=!1;return lt(w).pipe(function Nd(n,e){return(0,ur.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return lt(t);let u=0;return(0,cn.D)(o).pipe(fo(d=>function ru(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!iD(o)&&(u[By]=o.title),function nD(n,e,t,r){const o=function rD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return lt({});const u={};return(0,cn.D)(o).pipe((0,ur.z)(d=>function UT(n,e,t,r){const o=ce(n,e,r);return ft(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe(cr(),(0,yr.b)(g=>{u[d]=g}))),po(1),function Vc(n){return(0,ht.U)(()=>n)}(u),_r(d=>af(d)?as.E:Us(d)))}(u,n,e,r).pipe((0,ht.U)(d=>(n._resolvedData=d,n.data=ag(n,t).resolve,o&&iD(o)&&(n.data[By]=o.title),null)))}(d.route,r,n,e)),(0,yr.b)(()=>u++),po(1),(0,ur.z)(d=>u===o.length?lt(t):as.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,yr.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,yr.b)(w=>{const D=new by(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),gg(g=>{const w=D=>{const S=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,yr.b)(k=>{D.component=k}),(0,ht.U)(()=>{})));for(const k of D.children)S.push(...w(k));return S};return fi(w(g.targetSnapshot.root)).pipe(Za(),Fn(1))}),gg(()=>this.afterPreactivation()),(0,ht.U)(g=>{const w=function Zu(n,e,t){const r=sa(n,e._root,t?t._root:void 0);return new sg(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return o={...g,targetRouterState:w}}),(0,yr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,ht.U)(r=>(new p(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,yr.b)({next(){u=!0},complete(){u=!0}}),zu(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),_r(g=>{if(d=!0,_o(g)){oa(g)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new Xa(o.id,this.serializeUrl(o.extractedUrl),g.message,g.cancellationCode);if(r.next(w),oa(g)){const D=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iI(o.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new qh(o.id,this.serializeUrl(o.extractedUrl),g,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(g))}catch(D){o.reject(D)}}return as.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Xc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:w}=r,D=o||this.routerState.root,S=w?this.currentUrlTree.fragment:d;let k=null;switch(g){case"merge":k={...this.currentUrlTree.queryParams,...u};break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=u||null}return null!==k&&(k=this.removeEmptyProps(k)),_y(D,this.currentUrlTree,t,k,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ei(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function uD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...Ky}:!1===r?{...rI}:r,ei(t))return gi(this.currentUrlTree,t,o);const u=this.parseUrl(t);return gi(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new mo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let g,w,D;d?(g=d.resolve,w=d.reject,D=d.promise):D=new Promise((z,X)=>{g=z,w=X});const S=++this.navigationId;let k;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),k=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):k=0,this.setTransition({id:S,targetPageId:k,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:w,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new Xa(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:function(){return yg()},providedIn:"root"}),n})();function iI(n){return"imperative"!==n}class _g{}let aI=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Sr(t=>t instanceof mo),fo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,m.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,g=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,cn.D)(o).pipe((0,mn.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):lt(null);const u=o.pipe((0,ur.z)(d=>null===d?lt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,cn.D)([u,d]).pipe((0,mn.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Mi),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(_g),m.LFG(mg))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const uI=new m.OlP("");let cI=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof mo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Yy=new m.OlP("ROUTER_FORROOT_GUARD"),Qy=new m.OlP(""),dD=[Ae,{provide:Hu,useClass:zp},{provide:Mi,useFactory:yg},aa,{provide:Kc,useFactory:function BT(n){return n.routerState.root},deps:[Mi]},mg];function vg(){return new m.PXZ("Router",Mi)}let lI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dD,[],Xy(t),{provide:Yy,useFactory:Jy,deps:[[Mi,new m.FiY,new m.tp0]]},{provide:zy,useValue:r||{}},r?.useHash?{provide:_e,useClass:st}:{provide:_e,useClass:Ye},{provide:uI,useFactory:()=>{const n=(0,m.f3M)(Mi),e=(0,m.f3M)(Xs),t=(0,m.f3M)(zy);return t.scrollOffset&&e.setOffset(t.scrollOffset),new cI(n,e,t)}},r?.preloadingStrategy?fD(r.preloadingStrategy):[],{provide:m.PXZ,multi:!0,useFactory:vg},r?.initialNavigation?pI(r):[],[{provide:df,useFactory:wg},{provide:m.tb,multi:!0,useExisting:df}]]}}static forChild(t){return{ngModule:n,providers:[Xy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Yy,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Jy(n){return"guarded"}function Xy(n){return[{provide:Hy,multi:!0,useValue:n}]}function wg(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Mi),o=n.get(t_);1===n.get(rl)&&r.initialNavigation(),n.get(Qy,null,m.XFs.Optional)?.setUpPreloading(),n.get(uI,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const df=new m.OlP("");function pI(n){return["disabled"===n.initialNavigation?[{provide:m.ip1,multi:!0,useFactory:()=>{const n=(0,m.f3M)(Mi);return()=>{n.setUpLocationChangeListener()}}},{provide:rl,useValue:2}]:[],"enabledBlocking"===n.initialNavigation?[{provide:rl,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:n=>{const e=n.get(B,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(o=>{const u=n.get(Mi),d=n.get(t_);(function r(o){n.get(Mi).events.pipe(Sr(d=>d instanceof mo||d instanceof Xa||d instanceof qh),(0,ht.U)(d=>d instanceof mo||d instanceof Xa&&(0===d.code||1===d.code)&&null),Sr(d=>null!==d),Fn(1)).subscribe(()=>{o()})})(()=>{o(!0),t=!0}),u.afterPreactivation=()=>(o(!0),t||d.closed?lt(void 0):d),u.initialNavigation()}))}}]:[]]}const t_=new m.OlP("",{factory:()=>new Pn.x}),rl=new m.OlP("",{providedIn:"root",factory:()=>1});function fD(n){return[aI,{provide:Qy,useExisting:aI},{provide:_g,useExisting:n}]}var r_=P(4986),xr=P(5813);function Ig(){return(0,Ln.e)((n,e)=>{let t,r=!1;n.subscribe((0,jn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function mI(n,e){return n===e}var rt,wo=P(2011),gD=(P(1451),P(3942)),we=P(5861),ti=P(9681),Eg=P(4859),su=P(1877),zt=P(2090),mD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ou={},bg=bg||{},xt=mD||self;function Dg(){}function i_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Tt(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Cg="closure_uid_"+(1e9*Math.random()>>>0),_I=0;function yD(n,e,t){return n.call.apply(n.bind,arguments)}function _D(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Ur(n,e,t){return(Ur=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yD:_D).apply(null,arguments)}function Tg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Vr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function Ju(){this.s=this.s,this.o=this.o}var zT={};Ju.prototype.s=!1,Ju.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function yI(n){return Object.prototype.hasOwnProperty.call(n,Cg)&&n[Cg]||(n[Cg]=++_I)}(this);delete zT[n]}},Ju.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const s_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},o_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function vI(n){return Array.prototype.concat.apply([],arguments)}function hf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ud(n){return/^[\s\xa0]*$/.test(n)}var ji,wI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Bi(n,e){return-1!=n.indexOf(e)}function II(n,e){return n<e?-1:n>e?1:0}e:{var EI=xt.navigator;if(EI){var a_=EI.userAgent;if(a_){ji=a_;break e}}ji=""}function bI(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function DI(n){const e={};for(const t in n)e[t]=n[t];return e}var sl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<sl.length;u++)t=sl[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Mg(n){return Mg[" "](n),n}Mg[" "]=Dg;var ff,n,wD=Bi(ji,"Opera"),ol=Bi(ji,"Trident")||Bi(ji,"MSIE"),TI=Bi(ji,"Edge"),u_=TI||ol,MI=Bi(ji,"Gecko")&&!(Bi(ji.toLowerCase(),"webkit")&&!Bi(ji,"Edge"))&&!(Bi(ji,"Trident")||Bi(ji,"MSIE"))&&!Bi(ji,"Edge"),ID=Bi(ji.toLowerCase(),"webkit")&&!Bi(ji,"Edge");function AI(){var n=xt.document;return n?n.documentMode:void 0}e:{var c_="",Sg=(n=ji,MI?/rv:([^\);]+)(\)|;)/.exec(n):TI?/Edge\/([\d\.]+)/.exec(n):ol?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ID?/WebKit\/(\S+)/.exec(n):wD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Sg&&(c_=Sg?Sg[1]:""),ol){var xg=AI();if(null!=xg&&xg>parseFloat(c_)){ff=String(xg);break e}}ff=c_}var l_={};var GT=xt.document&&ol&&(AI()||parseInt(ff,10))||void 0,Vd=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",Dg,e),xt.removeEventListener("test",Dg,e)}catch{}return n}();function ni(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Bd(n,e){if(ni.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(MI){e:{try{Mg(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Rg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bd.Z.h.call(this)}}ni.prototype.h=function(){this.defaultPrevented=!0},Vr(Bd,ni);var Rg={2:"touch",3:"pen",4:"mouse"};Bd.prototype.h=function(){Bd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ai="closure_listenable_"+(1e6*Math.random()|0),xI=0;function ED(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++xI,this.ca=this.fa=!1}function jd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Hs(n){this.src=n,this.g={},this.h=0}function gf(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=s_(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(jd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kg(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Hs.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=kg(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new ED(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var mf="closure_lm_"+(1e6*Math.random()|0),RI={};function d_(n,e,t,r,o){if(r&&r.once)return yf(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)d_(n,e[u],t,r,o);return null}return t=p_(t),n&&n[Ai]?n.N(e,t,Tt(r)?!!r.capture:!!r,o):bD(n,e,t,!1,r,o)}function bD(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Tt(o)?!!o.capture:!!o,g=h_(n);if(g||(n[mf]=g=new Hs(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function Og(){var e=WT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Vd||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Pg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yf(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)yf(n,e[u],t,r,o);return null}return t=p_(t),n&&n[Ai]?n.O(e,t,Tt(r)?!!r.capture:!!r,o):bD(n,e,t,!0,r,o)}function Ng(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ng(n,e[u],t,r,o);else r=Tt(r)?!!r.capture:!!r,t=p_(t),n&&n[Ai]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kg(u=n.g[e],t,r,o))&&(jd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=h_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kg(e,t,r,o)),(t=-1<n?e[n]:null)&&_f(t))}function _f(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ai])gf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Pg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=h_(e))?(gf(t,n),0==t.h&&(t.src=null,e[mf]=null)):jd(n)}}}function Pg(n){return n in RI?RI[n]:RI[n]="on"+n}function WT(n,e){if(n.ca)n=!0;else{e=new Bd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&_f(n),n=t.call(r,e)}return n}function h_(n){return(n=n[mf])instanceof Hs?n:null}var f_="__closure_events_fn_"+(1e9*Math.random()>>>0);function p_(n){return"function"==typeof n?n:(n[f_]||(n[f_]=function(e){return n.handleEvent(e)}),n[f_])}function Br(){Ju.call(this),this.i=new Hs(this),this.P=this,this.I=null}function jr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ni(e,n);else if(e instanceof ni)e.target=e.target||n;else{var o=e;CI(e=new ni(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=g_(d,r,!0,e)&&o}if(o=g_(d=e.g=n,r,!0,e)&&o,o=g_(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=g_(d=e.g=t[u],r,!1,e)&&o}function g_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var g=d.listener,w=d.ia||d.src;d.fa&&gf(n.i,d),o=!1!==g.call(w,r)&&o}}return o&&!r.defaultPrevented}Vr(Br,Ju),Br.prototype[Ai]=!0,Br.prototype.removeEventListener=function(n,e,t,r){Ng(this,n,e,t,r)},Br.prototype.M=function(){if(Br.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jd(t[r]);delete n.g[e],n.h--}}this.I=null},Br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var m_=xt.JSON.stringify;function KT(){var n=CD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var NI,y_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new DD,n=>n.reset());class DD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function __(n){xt.setTimeout(()=>{throw n},0)}function OI(n,e){NI||function ZT(){var n=xt.Promise.resolve(void 0);NI=function(){n.then(qT)}}(),PI||(NI(),PI=!0),CD.add(n,e)}var PI=!1,CD=new class kI{constructor(){this.h=this.g=null}add(e,t){const r=y_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function qT(){for(var n;n=KT();){try{n.h.call(n.g)}catch(t){__(t)}var e=y_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}PI=!1}function v_(n,e){Br.call(this),this.h=n||1,this.g=e||xt,this.j=Ur(this.kb,this),this.l=Date.now()}function LI(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function FI(n,e,t){if("function"==typeof n)t&&(n=Ur(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ur(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function TD(n){n.g=FI(()=>{n.g=null,n.i&&(n.i=!1,TD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Vr(v_,Br),(rt=v_.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jr(this,"tick"),this.da&&(LI(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){v_.Z.M.call(this),LI(this),delete this.g};class Xu extends Ju{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:TD(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function al(n){Ju.call(this),this.h=n,this.g={}}Vr(al,Ju);var UI=[];function w_(n,e,t,r){Array.isArray(t)||(t&&(UI[0]=t.toString()),t=UI);for(var o=0;o<t.length;o++){var u=d_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Lg(n){bI(n.g,function(e,t){this.g.hasOwnProperty(t)&&_f(e)},n),n.g={}}function vf(){this.g=!0}function ps(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function AD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return m_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}al.prototype.M=function(){al.Z.M.call(this),Lg(this)},al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vf.prototype.Aa=function(){this.g=!1},vf.prototype.info=function(){};var au={},BI=null;function wf(){return BI=BI||new Br}function jI(n){ni.call(this,au.Ma,n)}function If(n){const e=wf();jr(e,new jI(e,n))}function Ef(n,e){ni.call(this,au.STAT_EVENT,n),this.stat=e}function vr(n){const e=wf();jr(e,new Ef(e,n))}function Fg(n,e){ni.call(this,au.Na,n),this.size=e}function la(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}au.Ma="serverreachability",Vr(jI,ni),au.STAT_EVENT="statevent",Vr(Ef,ni),au.Na="timingevent",Vr(Fg,ni);var ul={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$d={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function E_(){}function D_(){}E_.prototype.h=null;var Df,cl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bf(){ni.call(this,"d")}function Ug(){ni.call(this,"c")}function Vg(){}function Bg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new al(this),this.P=zI,this.W=new v_(n=u_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $I}function $I(){this.i=null,this.g="",this.h=!1}Vr(bf,ni),Vr(Ug,ni),Vr(Vg,E_),Vg.prototype.g=function(){return new XMLHttpRequest},Vg.prototype.i=function(){return{}},Df=new Vg;var zI=45e3,C_={},Cf={};function jg(n,e,t){n.K=1,n.v=Tf(uu(e)),n.s=t,n.U=!0,HI(n,null)}function HI(n,e){n.F=Date.now(),$g(n),n.A=uu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Kg(t.h,"t",r),n.C=0,t=n.l.H,n.h=new $I,n.g=vl(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Xu(Ur(n.Ia,n,n.g),n.O)),w_(n.V,n.g,"readystatechange",n.gb),e=n.H?DI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),If(1),function I_(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),w=0;w<g.length;w++){var D=g[w].split("=");if(1<D.length){var S=D[0];D=D[1];var k=S.split("_");d=2<=k.length&&"type"==k[1]?d+(S+"=")+D+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function $i(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function T_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=SD(n,t),o==Cf){4==e&&(n.o=4,vr(14),r=!1),ps(n.j,n.m,null,"[Incomplete Response]");break}if(o==C_){n.o=4,vr(15),ps(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ps(n.j,n.m,o,null),M_(n,o)}$i(n)&&o!=Cf&&o!=C_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,vr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),tc(e),e.L=!0,vr(11))):(ps(n.j,n.m,t,"[Invalid Chunked Response]"),ll(n),Hd(n))}function SD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Cf:(t=Number(e.substring(t,r)),isNaN(t)?C_:(r+=1)+t>e.length?Cf:(e=e.substr(r,t),n.C=r+t,e))}function $g(n){n.Y=Date.now()+n.P,GI(n,n.P)}function GI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=la(Ur(n.eb,n),e)}function zd(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function Hd(n){0==n.l.G||n.I||gl(n.l,n)}function ll(n){zd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,LI(n.W),Lg(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function M_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Io(t.i,n)))if(t.I=n.N,!n.J&&Io(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;fu(t),nm(t)}Of(t),vr(18)}}else t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=la(Ur(t.ab,t),6e3));if(1>=Zg(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Gs(t,11)}else if((n.J||t.g==n)&&fu(t),!Ud(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const S=D[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const k=D[4];null!=k&&(t.za=k,t.h.info("SVER="+t.za));const z=D[5];null!=z&&"number"==typeof z&&0<z&&(t.K=r=1.5*z,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const X=n.g;if(X){const se=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(se){var u=r.i;!u.g&&(Bi(se,"spdy")||Bi(se,"quic")||Bi(se,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Kd(u,u.h),u.h=null))}if(r.D){const xe=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.sa=xe,Wn(r.F,r.D,xe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=_l(r,r.H?r.la:null,r.W),d.J){Sf(r.i,d);var g=d,w=r.K;w&&g.setTimeout(w),g.B&&(zd(g),$g(g)),r.g=d}else ys(r);0<t.l.length&&ms(t)}else"stop"!=D[0]&&"close"!=D[0]||Gs(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Gs(t,7):N_(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}If(4)}catch{}}function zg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(i_(n)||"string"==typeof n)o_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(i_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function xD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(i_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Gd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Gd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Hg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];dl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)dl(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function dl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=Bg.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==du(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const S=du(this.g);var e=this.g.Da();const k=this.g.ba();if(!(3>S)&&(3!=S||u_||this.g&&(this.h.h||this.g.ga()||u0(this.g)))){this.I||4!=S||7==e||If(8==e||0>=k?3:2),zd(this);var t=this.g.ba();this.N=t;t:if($i(this)){var r=u0(this.g);n="";var o=r.length,u=4==du(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ll(this),Hd(this);var d="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function MD(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,w=this.g;if((g=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ud(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,vr(12),ll(this),Hd(this);break e}ps(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,M_(this,t)}this.U?(T_(this,S,d),u_&&this.i&&3==S&&(w_(this.V,this.W,"tick",this.fb),this.W.start())):(ps(this.j,this.m,d,null),M_(this,d)),4==S&&ll(this),this.i&&!this.I&&(4==S?gl(this.l,this):(this.i=!1,$g(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,vr(12)):(this.o=0,vr(13)),ll(this),Hd(this)}}}catch{}},rt.fb=function(){if(this.g){var n=du(this.g),e=this.g.ga();this.C<e.length&&(zd(this),T_(this,n,e),this.i&&4!=n&&$g(this))}},rt.cancel=function(){this.I=!0,ll(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function VI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(If(3),vr(17)),ll(this),this.o=2,Hd(this)):GI(this,this.Y-n)},(rt=Gd.prototype).R=function(){Hg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return Hg(this),this.g.concat()},rt.get=function(n,e){return dl(this.h,n)?this.h[n]:e},rt.set=function(n,e){dl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var WI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ec(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ec){this.g=void 0!==e?e:n.g,gs(this,n.j),this.s=n.s,Wd(this,n.i),Gg(this,n.m),this.l=n.l,e=n.h;var t=new fl;t.i=e.i,e.g&&(t.g=new Gd(e.g),t.h=e.h),ZI(this,t),this.o=n.o}else n&&(t=String(n).match(WI))?(this.g=!!e,gs(this,t[1]||"",!0),this.s=Mf(t[2]||""),Wd(this,t[3]||"",!0),Gg(this,t[4]),this.l=Mf(t[5]||"",!0),ZI(this,t[6]||"",!0),this.o=Mf(t[7]||"")):(this.g=!!e,this.h=new fl(null,this.g))}function uu(n){return new ec(n)}function gs(n,e,t){n.j=t?Mf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Wd(n,e,t){n.i=t?Mf(e,!0):e}function Gg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ZI(n,e,t){e instanceof fl?(n.h=e,function FD(n,e){e&&!n.j&&(cu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(PD(this,r),Kg(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=hl(e,ND)),n.h=new fl(e,n.g))}function Wn(n,e,t){n.h.set(e,t)}function Tf(n){return Wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Mf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,OD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function OD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ec.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hl(e,qI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hl(e,qI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(hl(t,"/"==t.charAt(0)?A_:Wg,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hl(t,YI)),n.join("")};var qI=/[#\/\?@]/g,Wg=/[#\?:]/g,A_=/[#\?]/g,ND=/[#\?@]/g,YI=/#/g;function fl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function cu(n){n.g||(n.g=new Gd,n.h=0,n.i&&function KI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PD(n,e){cu(n),e=Af(n,e),dl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,dl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Hg(n)))}function LD(n,e){return cu(n),e=Af(n,e),dl(n.g.h,e)}function Kg(n,e,t){PD(n,e),0<t.length&&(n.i=null,n.g.set(Af(n,e),hf(t)),n.h+=t.length)}function Af(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function S_(n){this.l=n||JI,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=fl.prototype).add=function(n,e){cu(this),this.i=null,n=Af(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){cu(this),this.g.forEach(function(t,r){o_(t,function(o){n.call(e,o,r,this)},this)},this)},rt.T=function(){cu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},rt.R=function(n){cu(this);var e=[];if("string"==typeof n)LD(this,n)&&(e=vI(e,this.g.get(Af(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=vI(e,n[t])}return e},rt.set=function(n,e){return cu(this),this.i=null,LD(this,n=Af(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var JI=10;function x_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Zg(n){return n.h?1:n.g?n.g.size:0}function Io(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Kd(n,e){n.g?n.g.add(e):n.h=e}function Sf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Zd(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return hf(n.i)}function R_(){}function k_(){this.g=new R_}function XI(n,e,t){const r=t||"";try{zg(n,function(o,u){let d=o;Tt(o)&&(d=m_(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function qg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function lu(n){this.l=n.$b||null,this.j=n.ib||!1}function Yg(n,e){Br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=e0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}S_.prototype.cancel=function(){if(this.i=Zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},R_.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},R_.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},Vr(lu,E_),lu.prototype.g=function(){return new Yg(this.l,this.j)},lu.prototype.i=function(n){return function(){return n}}({}),Vr(Yg,Br);var e0=0;function t0(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Qg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xf(n)}function xf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Yg.prototype).open=function(n,e){if(this.readyState!=e0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xf(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qg(this)),this.readyState=e0},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xf(this)),this.g&&(this.readyState=3,xf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;t0(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Qg(this):xf(this),3==this.readyState&&t0(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,Qg(this))},rt.Ta=function(n){this.g&&(this.response=n,Qg(this))},rt.ha=function(){this.g&&Qg(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Yg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var VD=xt.JSON.parse;function wr(n){Br.call(this),this.headers=new Gd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=n0,this.K=this.L=!1}Vr(wr,Br);var n0="",YT=/^https?$/i,r0=["POST","PUT"];function BD(n){return"content-type"==n.toLowerCase()}function Jg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,s0(n),Xg(n)}function s0(n){n.D||(n.D=!0,jr(n,"complete"),jr(n,"error"))}function o0(n){if(n.h&&typeof bg<"u"&&(!n.C[1]||4!=du(n)||2!=n.ba()))if(n.v&&4==du(n))FI(n.Fa,0,n);else if(jr(n,"readystatechange"),4==du(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(WI)[1]||null;if(!o&&xt.self&&xt.self.location){var u=xt.self.location.protocol;o=u.substr(0,u.length-1)}r=!YT.test(o?o.toLowerCase():"")}t=r}if(t)jr(n,"complete"),jr(n,"success");else{n.m=6;try{var d=2<du(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.ba()+"]",s0(n)}}finally{Xg(n)}}}function Xg(n,e){if(n.g){a0(n);const t=n.g,r=n.C[0]?Dg:null;n.g=null,n.C=null,e||jr(n,"ready");try{t.onreadystatechange=r}catch{}}}function a0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function du(n){return n.g?n.g.readyState:0}function u0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case n0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function hu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function em(n){let e="";return bI(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Wn(n,e,t))}function tm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qd(n){this.za=0,this.l=[],this.h=new vf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=tm("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=tm("baseRetryDelayMs",5e3,n),this.$a=tm("retryDelaySeedMs",1e4,n),this.Ya=tm("forwardChannelMaxRetries",2,n),this.ra=tm("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new S_(n&&n.concurrentRequestLimit),this.Ca=new k_,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function N_(n){if(rm(n),3==n.G){var e=n.V++,t=uu(n.F);Wn(t,"SID",n.J),Wn(t,"RID",e),Wn(t,"TYPE","terminate"),Eo(n,t),(e=new Bg(n,n.h,e,void 0)).K=2,e.v=Tf(uu(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),$g(e)}yl(n)}function nm(n){n.g&&(tc(n),n.g.cancel(),n.g=null)}function rm(n){nm(n),n.u&&(xt.clearTimeout(n.u),n.u=null),fu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function P_(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ms(n)}function ms(n){x_(n.i)||n.m||(n.m=!0,OI(n.Ha,n),n.C=0)}function ri(n,e){var t;t=e?e.m:n.V++;const r=uu(n.F);Wn(r,"SID",n.J),Wn(r,"RID",t),Wn(r,"AID",n.U),Eo(n,r),n.o&&n.s&&hu(r,n.o,n.s),t=new Bg(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=kf(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Kd(n.i,t),jg(t,r,e)}function Eo(n,e){n.j&&zg({},function(t,r){Wn(e,r,t)})}function kf(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ur(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let w=0;w<t;w++){let D=o[w].h;const S=o[w].g;if(D-=u,0>D)u=Math.max(0,o[w].h-100),g=!1;else try{XI(S,d,"req"+D+"_")}catch{r&&r(S)}}if(g){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function ys(n){n.g||n.u||(n.Y=1,OI(n.Ga,n),n.A=0)}function Of(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=la(Ur(n.Ga,n),ml(n,n.A)),n.A++,0))}function tc(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function pl(n){n.g=new Bg(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=uu(n.oa);Wn(e,"RID","rpc"),Wn(e,"SID",n.J),Wn(e,"CI",n.N?"0":"1"),Wn(e,"AID",n.U),Eo(n,e),Wn(e,"TYPE","xmlhttp"),n.o&&n.s&&hu(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Tf(uu(e)),t.s=null,t.U=!0,HI(t,n)}function fu(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function gl(n,e){var t=null;if(n.g==e){fu(n),tc(n),n.g=null;var r=2}else{if(!Io(n.i,e))return;t=e.D,Sf(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;jr(r=wf(),new Fg(r,t,e,o)),ms(n)}else ys(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Rf(n,e){return!(Zg(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=la(Ur(n.Ha,n,e),ml(n,n.C)),n.C++,0)))}(n,e)||2==r&&Of(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Gs(n,5);break;case 4:Gs(n,10);break;case 3:Gs(n,6);break;default:Gs(n,2)}}function ml(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Gs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ur(n.jb,n);t||(t=new ec("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||gs(t,"https"),Tf(t)),function UD(n,e){const t=new vf;if(xt.Image){const r=new Image;r.onload=Tg(qg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Tg(qg,t,r,"TestLoadImage: error",!1,e),r.onabort=Tg(qg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Tg(qg,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else vr(2);n.G=0,n.j&&n.j.va(e),yl(n),rm(n)}function yl(n){n.G=0,n.I=-1,n.j&&((0!=Zd(n.i).length||0!=n.l.length)&&(n.i.i.length=0,hf(n.l),n.l.length=0),n.j.ua())}function _l(n,e,t){let r=function RD(n){return n instanceof ec?uu(n):new ec(n,void 0)}(t);if(""!=r.i)e&&Wd(r,e+"."+r.i),Gg(r,r.m);else{const o=xt.location;r=function kD(n,e,t,r){var o=new ec(null,void 0);return n&&gs(o,n),e&&Wd(o,e),t&&Gg(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&bI(n.aa,function(o,u){Wn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Wn(r,e,t),Wn(r,"VER",n.ma),Eo(n,r),r}function vl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wr(t&&n.Ba&&!n.qa?new lu({ib:!0}):n.qa)).L=n.H,e}function L_(){}function Nf(){if(ol&&!(10<=Number(GT)))throw Error("Environmental error: no available transport.")}function zi(n,e){Br.call(this),this.g=new qd(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ud(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ud(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new wl(this)}function F_(n){bf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function U_(){Ug.call(this),this.status=1}function wl(n){this.g=n}(rt=wr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Df.g(),this.C=function b_(n){return n.h||(n.h=n.i())}(this.u?this.u:Df),this.g.onreadystatechange=Ur(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Jg(this,u)}n=t||"";const o=new Gd(this.headers);r&&zg(r,function(u,d){o.set(d,u)}),r=function il(n){e:{var e=BD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=s_(r0,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{a0(this),0<this.B&&((this.K=function O_(n){return ol&&function HT(){return function Ag(n){var e=l_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=wI(String(ff)).split("."),t=wI("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=II(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||II(0==o[2].length,0==u[2].length)||II(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ur(this.pa,this)):this.A=FI(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Jg(this,u)}},rt.pa=function(){typeof bg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jr(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,jr(this,"complete"),jr(this,"abort"),Xg(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xg(this,!0)),wr.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?o0(this):this.cb())},rt.cb=function(){o0(this)},rt.ba=function(){try{return 2<du(this)?this.g.status:-1}catch{return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),VD(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=qd.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Bg(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=DI(u),CI(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=kf(this,o,e),Wn(t=uu(this.F),"RID",n),Wn(t,"CVER",22),this.D&&Wn(t,"X-HTTP-Session-Id",this.D),Eo(this,t),this.o&&u&&hu(t,this.o,u),Kd(this.i,o),this.Ra&&Wn(t,"TYPE","init"),this.ja?(Wn(t,"$req",e),Wn(t,"SID","null"),o.$=!0,jg(o,t,null)):jg(o,t,e),this.G=2}}else 3==this.G&&(n?ri(this,n):0==this.l.length||x_(this.i)||ri(this))},rt.Ga=function(){if(this.u=null,pl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=la(Ur(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vr(10),nm(this),pl(this))},rt.ab=function(){null!=this.v&&(this.v=null,nm(this),Of(this),vr(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),vr(2)):(this.h.info("Failed to ping google.com"),vr(1))},(rt=L_.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},Nf.prototype.g=function(n,e){return new zi(n,e)},Vr(zi,Br),zi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),OI(Ur(n.hb,n,e))),vr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=_l(n,null,n.W),ms(n)},zi.prototype.close=function(){N_(this.g)},zi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,P_(this.g,e)}else this.v?((e={}).__data__=m_(n),P_(this.g,e)):P_(this.g,n)},zi.prototype.M=function(){this.g.j=null,delete this.j,N_(this.g),delete this.g,zi.Z.M.call(this)},Vr(F_,bf),Vr(U_,Ug),Vr(wl,L_),wl.prototype.xa=function(){jr(this.g,"a")},wl.prototype.wa=function(n){jr(this.g,new F_(n))},wl.prototype.va=function(n){jr(this.g,new U_(n))},wl.prototype.ua=function(){jr(this.g,"b")},Nf.prototype.createWebChannel=Nf.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,$d.COMPLETE="complete",D_.EventType=cl,cl.OPEN="a",cl.CLOSE="b",cl.ERROR="c",cl.MESSAGE="d",Br.prototype.listen=Br.prototype.N,wr.prototype.listenOnce=wr.prototype.O,wr.prototype.getLastError=wr.prototype.La,wr.prototype.getLastErrorCode=wr.prototype.Da,wr.prototype.getStatus=wr.prototype.ba,wr.prototype.getResponseJson=wr.prototype.Qa,wr.prototype.getResponseText=wr.prototype.ga,wr.prototype.send=wr.prototype.ea;var c0=ou.createWebChannelTransport=function(){return new Nf},l0=ou.getStatEventTarget=function(){return wf()},im=ou.ErrorCode=ul,jD=ou.EventType=$d,$D=ou.Event=au,d0=ou.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},h0=ou.FetchXmlHttpFactory=lu,sm=ou.WebChannel=D_,zD=ou.XhrIo=wr;const om="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let Yd="9.9.2";const bo=new su.Yd("@firebase/firestore");function Qd(){return bo.logLevel}function Ne(n,...e){if(bo.logLevel<=su.in.DEBUG){const t=e.map(am);bo.debug(`Firestore (${Yd}): ${n}`,...t)}}function Kn(n,...e){if(bo.logLevel<=su.in.ERROR){const t=e.map(am);bo.error(`Firestore (${Yd}): ${n}`,...t)}}function pu(n,...e){if(bo.logLevel<=su.in.WARN){const t=e.map(am);bo.warn(`Firestore (${Yd}): ${n}`,...t)}}function am(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Yd}) INTERNAL ASSERTION FAILED: `+n;throw Kn(e),new Error(e)}function bt(n,e){n||it()}function Ze(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends zt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class B_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ir.UNAUTHENTICATED))}shutdown(){}}class g0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class m0{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let d=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new $r,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=d;e.enqueueRetryable((0,we.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new $r)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new B_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Ir(e)}}class HD{constructor(e,t,r){this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class y0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new HD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _0{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new j_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function w0(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $_{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=w0(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function Il(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function z_(n){return n+"\0"}class Mn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Mn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Mn(0,0))}static max(){return new Dt(new Mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jd{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Jd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends Jd{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const GD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends Jd{construct(e,t,r){return new tr(e,t,r)}static isValidIdentifier(e){return GD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new ke(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new ke(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new ke(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new ke(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(t)}static emptyPath(){return new tr([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Xt.fromString(e))}static fromName(e){return new He(Xt.fromString(e).popFirst(5))}static empty(){return new He(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Xt(e.slice()))}}class um{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function dr(n){return n.fields.find(e=>2===e.kind)}function nc(n){return n.fields.filter(e=>2!==e.kind)}um.UNKNOWN_ID=-1;class cm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pf(0,zr.min())}}function H_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Dt.fromTimestamp(1e9===r?new Mn(t+1,0):new Mn(t,r));return new zr(o,He.empty(),e)}function G_(n){return new zr(n.readTime,n.key,-1)}class zr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zr(Dt.min(),He.empty(),-1)}static max(){return new zr(Dt.max(),He.empty(),-1)}}function W_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}const E0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function rc(n){return lm.apply(this,arguments)}function lm(){return lm=(0,we.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==E0)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),lm.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(o=>o?le.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new le((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let w=0;w<u;w++){const D=w;t(e[D]).next(S=>{d[D]=S,++g,g===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new le((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Lf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new $r,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Ff(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const o=dm(r.target.error);this.T.reject(new Ff(e,o))}}static open(e,t,r,o){try{return new Lf(t,e.transaction(o,r))}catch(u){throw new Ff(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ha(t)}}class _s{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===_s.v((0,zt.z$)())&&Kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),ii(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,zt.hl)())return!1;if(_s.S())return!0;const e=(0,zt.z$)(),t=_s.v(e),r=0<t&&t<10,o=_s.D(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,we.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Ff(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new ke(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new ke(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Ff(e,g))},u.onupgradeneeded=d=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.P.M(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,we.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.k(e);const w=Lf.open(u.db,e,d?"readonly":"readwrite",r),D=o(w).next(S=>(w.R(),S)).catch(S=>(w.abort(S),le.reject(S))).toPromise();return D.catch(()=>{}),yield w.A,D}catch(w){const D=w,S="FirebaseError"!==D.name&&g<3;if(Ne("SimpleDb","Transaction failed with error:",D.message,"Retrying:",S),u.close(),!S)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class da{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return ii(this.$.delete())}}class Ff extends ke{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ic(n){return"IndexedDbTransactionError"===n.name}class ha{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ii(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),ii(this.store.add(e))}get(e){return ii(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),ii(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),ii(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.G(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new le((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}W(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.G(o,(u,d,g)=>g.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.G(o,t)}Y(e){const t=this.cursor({});return new le((r,o)=>{t.onerror=u=>{const d=dm(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}G(e,t){const r=[];return new le((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const w=new da(g),D=t(g.primaryKey,g.value,w);if(D instanceof le){const S=D.catch(k=>(w.done(),le.reject(k)));r.push(S)}w.isDone?o():null===w.U?g.continue():g.continue(w.U)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ii(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=dm(r.target.error);t(o)}})}let Ws=!1;function dm(n){const e=_s.v((0,zt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ws||(Ws=!0,setTimeout(()=>{throw r},0)),r}}return n}class b0{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){ic(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield rc(r)}yield t.Z(1)}))}}class KD{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let o=t,u=!0;return le.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ne("IndexBackiller",`Processing collection: ${d}`),this.nt(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.st(o,u)).next(g=>(Ne("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}st(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=G_(u);W_(d,r)>0&&(r=d)}),new zr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function D0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function El(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Hi.ot=-1;class bn{constructor(e,t){this.comparator=e,this.root=t||Hr.EMPTY}insert(e,t){return new bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hr.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fm(this.root,e,this.comparator,!1)}getReverseIterator(){return new fm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fm(this.root,e,this.comparator,!0)}}class fm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Hr.RED,this.left=o??Hr.EMPTY,this.right=u??Hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Hr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Hr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Hr.EMPTY=null,Hr.RED=!0,Hr.BLACK=!1,Hr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Hr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Z_(this.data.getIterator())}getIteratorFrom(e){return new Z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class Z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bl(n){return n.hasNext()?n.getNext():void 0}class yi{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new yi([])}unionWith(e){let t=new dn(tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Er(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Er(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const C0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gu(n){if(bt(!!n),"string"==typeof n){let e=0;const t=C0.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(n.seconds),nanos:An(n.nanos)}}function An(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sc(n){return"string"==typeof n?Er.fromBase64String(n):Er.fromUint8Array(n)}function pm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function q_(n){const e=n.mapValue.fields.__previous_value__;return pm(e)?q_(e):e}function Xd(n){const e=gu(n.mapValue.fields.__local_write_time__.timestampValue);return new Mn(e.seconds,e.nanos)}class T0{constructor(e,t,r,o,u,d,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=w}}class fa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}function eh(n){return null==n}function th(n){return 0===n&&1/n==-1/0}function M0(n){return"number"==typeof n&&Number.isInteger(n)&&!th(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const oc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gm={nullValue:"NULL_VALUE"};function Dl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pm(n)?4:R0(n)?9007199254740991:10:it()}function pa(n,e){if(n===e)return!0;const t=Dl(n);if(t!==Dl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xd(n).isEqual(Xd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=gu(r.timestampValue),d=gu(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,sc(n.bytesValue).isEqual(sc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return An(r.geoPointValue.latitude)===An(o.geoPointValue.latitude)&&An(r.geoPointValue.longitude)===An(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return An(r.integerValue)===An(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=An(r.doubleValue),d=An(o.doubleValue);return u===d?th(u)===th(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Il(n.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(D0(u)!==D0(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!pa(u[g],d[g])))return!1;return!0}(n,e);default:return it()}var o}function Uf(n,e){return void 0!==(n.values||[]).find(t=>pa(t,e))}function ac(n,e){if(n===e)return 0;const t=Dl(n),r=Dl(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=An(o.integerValue||o.doubleValue),g=An(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return A0(n.timestampValue,e.timestampValue);case 4:return A0(Xd(n),Xd(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(o,u){const d=sc(o),g=sc(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let w=0;w<d.length&&w<g.length;w++){const D=St(d[w],g[w]);if(0!==D)return D}return St(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=St(An(o.latitude),An(u.latitude));return 0!==d?d:St(An(o.longitude),An(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let w=0;w<d.length&&w<g.length;++w){const D=ac(d[w],g[w]);if(D)return D}return St(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===oc.mapValue&&u===oc.mapValue)return 0;if(o===oc.mapValue)return 1;if(u===oc.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),w=u.fields||{},D=Object.keys(w);g.sort(),D.sort();for(let S=0;S<g.length&&S<D.length;++S){const k=St(g[S],D[S]);if(0!==k)return k;const z=ac(d[g[S]],w[D[S]]);if(0!==z)return z}return St(g.length,D.length)}(n.mapValue,e.mapValue);default:throw it()}}function A0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=gu(n),r=gu(e),o=St(t.seconds,r.seconds);return 0!==o?o:St(t.nanos,r.nanos)}function nh(n){return Y_(n)}function Y_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=gu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sc(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Y_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${Y_(r.fields[g])}`;return u+"}"}(n.mapValue):it();var e}function Cl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Q_(n){return!!n&&"integerValue"in n}function Vf(n){return!!n&&"arrayValue"in n}function S0(n){return!!n&&"nullValue"in n}function x0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mm(n){return!!n&&"mapValue"in n}function Bf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return El(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function R0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function k0(n){return"nullValue"in n?gm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cl(fa.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function O0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cl(fa.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?oc:it()}function J_(n,e){const t=ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function X_(n,e){const t=ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bf(t)}setAll(e){let t=tr.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=Bf(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());mm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];mm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){El(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Gr(Bf(this.value))}}function ev(n){const e=[];return El(n.fields,(t,r)=>{const o=new tr([t]);if(mm(r)){const u=ev(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new yi(e)}class yn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new yn(e,0,Dt.min(),Dt.min(),Gr.empty(),0)}static newFoundDocument(e,t,r){return new yn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new yn(e,2,t,Dt.min(),Gr.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,Dt.min(),Gr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class N0{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.ut=null}}function tv(n,e=null,t=[],r=[],o=null,u=null,d=null){return new N0(n,e,t,r,o,u,d)}function uc(n){const e=Ze(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+nh(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),eh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nh(r)).join(",")),e.ut=t}return e.ut}function Do(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!vm(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!pa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zn(n.startAt,e.startAt)&&Zn(n.endAt,e.endAt)}function ym(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _m(n,e){return n.filters.filter(t=>t instanceof Rr&&t.field.isEqual(e))}function Tl(n,e,t){let r=gm,o=!0;for(const u of _m(n,e)){let d=gm,g=!0;switch(u.op){case"<":case"<=":d=k0(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=gm}J_({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];J_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function qD(n,e,t){let r=oc,o=!0;for(const u of _m(n,e)){let d=oc,g=!0;switch(u.op){case">=":case">":d=O0(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=oc}X_({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];X_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Rr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new QT(e,t,r):"array-contains"===t?new wt(e,r):"in"===t?new QD(e,r):"not-in"===t?new JD(e,r):"array-contains-any"===t?new XD(e,r):new Rr(e,t,r)}static ct(e,t,r){return"in"===t?new L0(e,r):new F0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(ac(t,this.value)):null!==t&&Dl(this.value)===Dl(t)&&this.at(ac(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class QT extends Rr{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.at(t)}}class L0 extends Rr{constructor(e,t){super(e,"in",t),this.keys=YD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F0 extends Rr{constructor(e,t){super(e,"not-in",t),this.keys=YD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class wt extends Rr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&Uf(t.arrayValue,this.value)}}class QD extends Rr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uf(this.value.arrayValue,t)}}class JD extends Rr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Uf(this.value.arrayValue,t)}}class XD extends Rr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uf(this.value.arrayValue,r))}}class vs{constructor(e,t){this.position=e,this.inclusive=t}}class rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function vm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function jf(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?He.comparator(He.fromName(d.referenceValue),t.key):ac(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Zn(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pa(n.position[t],e.position[t]))return!1;return!0}class cc{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=w,this.lt=null,this.ft=null}}function nv(n,e,t,r,o,u,d,g){return new cc(n,e,t,r,o,u,d,g)}function Ml(n){return new cc(n)}function U0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function wm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Im(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Em(n){return null!==n.collectionGroup}function Al(n){const e=Ze(n);if(null===e.lt){e.lt=[];const t=Im(e),r=wm(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new rh(t)),e.lt.push(new rh(tr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new rh(tr.keyField(),u))}}}return e.lt}function Gi(n){const e=Ze(n);if(!e.ft)if("F"===e.limitType)e.ft=tv(e.path,e.collectionGroup,Al(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Al(e))t.push(new rh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new vs(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new vs(e.startAt.position,e.startAt.inclusive):null;e.ft=tv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.ft}function bm(n,e,t){return new cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $f(n,e){return Do(Gi(n),Gi(e))&&n.limitType===e.limitType}function ih(n){return`${uc(Gi(n))}|lt:${n.limitType}`}function rv(n){return`Query(target=${function P0(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${nh(r.value)}`;var r}).join(", ")}]`),eh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>nh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>nh(t)).join(",")),`Target(${e})`}(Gi(n))}; limitType=${n.limitType})`}function iv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):He.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=jf(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,Al(t),r)||t.endAt&&!function(o,u,d){const g=jf(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,Al(t),r)));var t,r}function V0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zf(n){return(e,t)=>{let r=!1;for(const o of Al(n)){const u=B0(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function B0(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),w=d.data.field(o);return null!==g&&null!==w?ac(g,w):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function sv(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function ov(n){return{integerValue:""+n}}function j0(n,e){return M0(e)?ov(e):sv(n,e)}class lc{constructor(){this._=void 0}}function Hf(n,e,t){return n instanceof sh?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof dc?av(n,e):n instanceof hc?z0(n,e):function(r,o){const u=$0(r,o),d=H0(u)+H0(r._t);return Q_(u)&&Q_(r._t)?ov(d):sv(r.wt,d)}(n,e)}function eC(n,e,t){return n instanceof dc?av(n,e):n instanceof hc?z0(n,e):t}function $0(n,e){return n instanceof Sl?Q_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class sh extends lc{}class dc extends lc{constructor(e){super(),this.elements=e}}function av(n,e){const t=G0(e);for(const r of n.elements)t.some(o=>pa(o,r))||t.push(r);return{arrayValue:{values:t}}}class hc extends lc{constructor(e){super(),this.elements=e}}function z0(n,e){let t=G0(e);for(const r of n.elements)t=t.filter(o=>!pa(o,r));return{arrayValue:{values:t}}}class Sl extends lc{constructor(e,t){super(),this.wt=e,this._t=t}}function H0(n){return An(n.integerValue||n.doubleValue)}function G0(n){return Vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Dm{constructor(e,t){this.field=e,this.transform=t}}class XT{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xl{}function W0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new uh(n.key,nr.none()):new ah(n.key,n.data,nr.none());{const t=n.data,r=Gr.empty();let o=new dn(tr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new mu(n.key,r,new yi(o.toArray()),nr.none())}}function tC(n,e,t){n instanceof ah?function(r,o,u){const d=r.value.clone(),g=q0(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof mu?function(r,o,u){if(!Gf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=q0(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(Z0(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function oh(n,e,t,r){return n instanceof ah?function(o,u,d,g){if(!Gf(o.precondition,u))return d;const w=o.value.clone(),D=uv(o.fieldTransforms,g,u);return w.setAll(D),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof mu?function(o,u,d,g){if(!Gf(o.precondition,u))return d;const w=uv(o.fieldTransforms,g,u),D=u.data;return D.setAll(Z0(o)),D.setAll(w),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,Gf(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function Wf(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=$0(r.transform,o||null);null!=u&&(null===t&&(t=Gr.empty()),t.set(r.field,u))}return t||null}function K0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Il(t,r,(o,u)=>function JT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof dc&&r instanceof dc||t instanceof hc&&r instanceof hc?Il(t.elements,r.elements,pa):t instanceof Sl&&r instanceof Sl?pa(t._t,r._t):t instanceof sh&&r instanceof sh);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ah extends xl{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class mu extends xl{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Z0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function q0(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,eC(d,g,t[o]))}return r}function uv(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,Hf(u,d,e))}return r}class uh extends xl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cv extends xl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ch{constructor(e){this.count=e}}var br,Zt;function Y0(n){switch(n){default:return it();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function lv(n){if(void 0===n)return Kn("GRPC error has no .code"),he.UNKNOWN;switch(n){case br.OK:return he.OK;case br.CANCELLED:return he.CANCELLED;case br.UNKNOWN:return he.UNKNOWN;case br.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case br.INTERNAL:return he.INTERNAL;case br.UNAVAILABLE:return he.UNAVAILABLE;case br.UNAUTHENTICATED:return he.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case br.NOT_FOUND:return he.NOT_FOUND;case br.ALREADY_EXISTS:return he.ALREADY_EXISTS;case br.PERMISSION_DENIED:return he.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case br.ABORTED:return he.ABORTED;case br.OUT_OF_RANGE:return he.OUT_OF_RANGE;case br.UNIMPLEMENTED:return he.UNIMPLEMENTED;case br.DATA_LOSS:return he.DATA_LOSS;default:return it()}}(Zt=br||(br={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class fc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){El(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return hm(this.inner)}size(){return this.innerSize}}const Q0=new bn(He.comparator);function Wi(){return Q0}const Cm=new bn(He.comparator);function Kf(...n){let e=Cm;for(const t of n)e=e.insert(t.key,t);return e}function dv(n){let e=Cm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Co(){return Zf()}function J0(){return Zf()}function Zf(){return new fc(n=>n.toString(),(n,e)=>n.isEqual(e))}const nC=new bn(He.comparator),hv=new dn(He.comparator);function Vt(...n){let e=hv;for(const t of n)e=e.add(t);return e}const X0=new dn(St);function Tm(){return X0}class qf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yf.createSynthesizedTargetChangeForCurrentChange(e,t)),new qf(Dt.min(),r,Tm(),Wi(),Vt())}}class Yf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yf(Er.EMPTY_BYTE_STRING,t,Vt(),Vt(),Vt())}}class Mm{constructor(e,t,r,o){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=o}}class eE{constructor(e,t){this.targetId=e,this.It=t}}class tE{constructor(e,t,r=Er.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class nE{constructor(){this.Tt=0,this.Et=pv(),this.At=Er.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Vt(),t=Vt(),r=Vt();return this.Et.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:it()}}),new Yf(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=pv()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class rC{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Wi(),this.Bt=fv(),this.Lt=new dn(St)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,o)=>{this.jt(o)&&t(o)})}zt(e){const t=e.targetId,r=e.It.count,o=this.Ht(t);if(o){const u=o.target;if(ym(u))if(0===r){const d=new He(u.path);this.Kt(t,d,yn.newNoDocument(d,Dt.min()))}else bt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,d)=>{const g=this.Ht(d);if(g){if(u.current&&ym(g.target)){const w=new He(g.target.path);null!==this.$t.get(w)||this.Xt(d,w)||this.Kt(d,w,yn.newNoDocument(w,e))}u.vt&&(t.set(d,u.St()),u.Dt())}});let r=Vt();this.Bt.forEach((u,d)=>{let g=!0;d.forEachWhile(w=>{const D=this.Ht(w);return!D||2===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.$t.forEach((u,d)=>d.setReadTime(e));const o=new qf(e,t,this.Lt,this.$t,r);return this.$t=Wi(),this.Bt=fv(),this.Lt=new dn(St),o}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const o=this.Qt(e);this.Xt(e,t)?o.Ct(t,1):o.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new nE,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new dn(St),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new nE),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function fv(){return new bn(He.comparator)}function pv(){return new bn(He.comparator)}const iC={asc:"ASCENDING",desc:"DESCENDING"},sC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class rE{constructor(e,t){this.databaseId=e,this.dt=t}}function Qf(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iE(n,e){return n.dt?e.toBase64():e.toUint8Array()}function oC(n,e){return Qf(n,e.toTimestamp())}function Dr(n){return bt(!!n),Dt.fromTimestamp(function(e){const t=gu(e);return new Mn(t.seconds,t.nanos)}(n))}function Jf(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gv(n){const e=Xt.fromString(n);return bt(wv(e)),e}function Rl(n,e){return Jf(n.databaseId,e.path)}function ga(n,e){const t=gv(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(sE(t))}function mv(n,e){return Jf(n.databaseId,e)}function Am(n){const e=gv(n);return 4===e.length?Xt.emptyPath():sE(e)}function Xf(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sE(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kl(n,e,t){return{name:Rl(n,e),fields:t.value.mapValue.fields}}function yv(n,e,t){const r=ga(n,e.name),o=Dr(e.updateTime),u=new Gr({mapValue:{fields:e.fields}}),d=yn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function lh(n,e){let t;if(e instanceof ah)t={update:kl(n,e.key,e.value)};else if(e instanceof uh)t={delete:Rl(n,e.key)};else if(e instanceof mu)t={update:kl(n,e.key,e.data),updateMask:dC(e.fieldMask)};else{if(!(e instanceof cv))return it();t={verify:Rl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof sh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof dc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof hc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sl)return{fieldPath:u.field.canonicalString(),increment:d._t};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:oC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:it()),t;var o}function ep(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?nr.updateTime(Dr(o.updateTime)):void 0!==o.exists?nr.exists(o.exists):nr.none():nr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(bt("REQUEST_TIME"===d.setToServerValue),g=new sh):"appendMissingElements"in d?g=new dc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new hc(d.removeAllFromArray.values||[]):"increment"in d?g=new Sl(u,d.increment):it();const w=tr.fromServerFormat(d.fieldPath);return new Dm(w,g)}(n,o)):[];var o;if(e.update){const o=ga(n,e.update.name),u=new Gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new yi((e.updateMask.fieldPaths||[]).map(D=>tr.fromServerFormat(D)));return new mu(o,u,d,t,r)}return new ah(o,u,t,r)}if(e.delete){const o=ga(n,e.delete);return new uh(o,t)}if(e.verify){const o=ga(n,e.verify);return new cv(o,t)}return it()}function Sm(n,e){return{documents:[mv(n,e.path)]}}function oE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=mv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=mv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const D=w.map(S=>function(k){if("=="===k.op){if(x0(k.value))return{unaryFilter:{field:Ol(k.field),op:"IS_NAN"}};if(S0(k.value))return{unaryFilter:{field:Ol(k.field),op:"IS_NULL"}}}else if("!="===k.op){if(x0(k.value))return{unaryFilter:{field:Ol(k.field),op:"IS_NOT_NAN"}};if(S0(k.value))return{unaryFilter:{field:Ol(k.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ol(k.field),op:cE(k.op),value:k.value}}}(S));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:Ol((S=D).field),direction:uE(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(D=e.limit,n.dt||eh(D)?D:{value:D});var D,g,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function aE(n){let e=Am(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=vv(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new rh(dh((k=S).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let g=null;t.limit&&(g=function(S){let k;return k="object"==typeof S?S.value:S,eh(k)?null:k}(t.limit));let w=null;var S;t.startAt&&(w=new vs((S=t.startAt).values||[],!!S.before));let D=null;return t.endAt&&(D=function(S){return new vs(S.values||[],!S.before)}(t.endAt)),nv(e,o,d,u,g,"F",w,D)}function vv(n){return n?void 0!==n.unaryFilter?[lC(n)]:void 0!==n.fieldFilter?[cC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>vv(e)).reduce((e,t)=>e.concat(t)):it():[]}function uE(n){return iC[n]}function cE(n){return sC[n]}function Ol(n){return{fieldPath:n.canonicalString()}}function dh(n){return tr.fromServerFormat(n.fieldPath)}function cC(n){return Rr.create(dh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function lC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=dh(n.unaryFilter.field);return Rr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=dh(n.unaryFilter.field);return Rr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dh(n.unaryFilter.field);return Rr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dh(n.unaryFilter.field);return Rr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function dC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dE(e)),e=lE(n.get(t),e);return dE(e)}function lE(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function dE(n){return n+"\x01\x01"}function ma(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&it(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let w;0===o.length?w=g:(o+=g,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:it()}u=d+2}return new Xt(r)}const hC=["userId","batchId"];function Iv(n,e){return[n,Ki(e)]}function hE(n,e,t){return[n,Ki(e),t]}const fC={},pC=["prefixPath","collectionGroup","readTime","documentId"],gC=["prefixPath","collectionGroup","documentId"],mC=["collectionGroup","readTime","prefixPath","documentId"],yC=["canonicalId","targetId"],_C=["targetId","path"],vC=["path","targetId"],wC=["collectionId","parent"],IC=["indexId","uid"],EC=["uid","sequenceNumber"],bC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tp=["indexId","uid","orderedDocumentKey"],fE=["userId","collectionPath","documentId"],pE=["userId","collectionPath","largestBatchId"],gE=["userId","collectionGroup","largestBatchId"],Ev=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mE=[...Ev,"documentOverlays"],yE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_E=yE,tM=[..._E,"indexConfiguration","indexState","indexEntries"];class bv extends K_{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=Ze(n);return _s.N(t.ee,e)}class Dv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&tC(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=oh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=oh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=J0();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const w=W0(d,g);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,(t,r)=>K0(t,r))&&Il(this.baseMutations,e.baseMutations,(t,r)=>K0(t,r))}}class Cv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=nC;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Cv(e,t,r,o)}}class Tv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ks{constructor(e,t,r,o,u=Dt.min(),d=Dt.min(),g=Er.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vE{constructor(e){this.ne=e}}function To(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Rl(o=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Qf(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yu(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:yu(e.version)}}var o,u;return r}function xm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mo(n){const e=new Mn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Nl(n,e){const t=(e.baseMutations||[]).map(u=>ep(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ep(n.ne,u)),o=Mn.fromMillis(e.localWriteTimeMs);return new Dv(e.batchId,o,t,r)}function np(n){const e=Mo(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mo(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=Gi(Ml(Am(o.documents[0])))):r=Gi(aE(n.query)),new Ks(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Er.fromBase64String(n.resumeToken))}function wE(n,e){const t=yu(e.snapshotVersion),r=yu(e.lastLimboFreeSnapshotVersion);let o;o=ym(e.target)?Sm(n.ne,e.target):oE(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function hh(n){const e=aE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bm(e,e.limit,"L"):e}function fh(n,e){return new Tv(e.largestBatchId,ep(n.ne,e.overlayMutation))}function IE(n,e){const t=e.path.lastSegment();return[n,Ki(e.path.popLast()),t]}function EE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:yu(r.readTime),documentKey:Ki(r.documentKey.path),largestBatchId:r.largestBatchId}}class bE{getBundleMetadata(e,t){return Av(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Mo(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Av(e).put({bundleId:(r=t).id,createTime:yu(Dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Rm(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:hh(o.bundledQuery),readTime:Mo(o.readTime)};var o})}saveNamedQuery(e,t){return Rm(e).put({name:(r=t).name,readTime:yu(Dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Av(n){return Wr(n,"bundles")}function Rm(n){return Wr(n,"namedQueries")}class rp{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new rp(e,t.uid||"")}getOverlay(e,t){return ip(e).get(IE(this.userId,t)).next(r=>r?fh(this.wt,r):null)}getOverlays(e,t){const r=Co();return le.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new Tv(t,d);o.push(this.ie(e,g))}),le.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ki(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(ip(e).W("collectionPathOverlayIndex",g))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Co(),u=Ki(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return ip(e).K("collectionPathOverlayIndex",d).next(g=>{for(const w of g){const D=fh(this.wt,w);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Co();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ip(e).J({index:"collectionGroupOverlayIndex",range:g},(w,D,S)=>{const k=fh(this.wt,D);u.size()<o||k.largestBatchId===d?(u.set(k.getKey(),k),d=k.largestBatchId):S.done()}).next(()=>u)}ie(e,t){return ip(e).put(function(r,o,u){const[d,g,w]=IE(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:lh(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function ip(n){return Wr(n,"documentOverlays")}class Pl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(An(e.integerValue));else if("doubleValue"in e){const r=An(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),th(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(sc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?R0(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):it()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const o of Object.keys(r))this.le(o,t),this.oe(r[o],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const o of r)this.oe(o,t)}_e(e,t){this.ce(t,37),He.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function nM(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function km(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=nM(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Pl.ye=new Pl;class Sv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const o=t.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}ve(e){const t=this.Ve(e),r=km(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}De(e){const t=this.Ve(e),r=km(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class DE{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class xv{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class Ll{constructor(){this.Oe=new Sv,this.Fe=new DE(this.Oe),this.$e=new xv(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Fl{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fl(this.indexId,this.documentKey,this.arrayValue,r)}}function Ul(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=CE(n.arrayValue,e.arrayValue),0!==t?t:(t=CE(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function CE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class DC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=dr(e);if(void 0!==t&&!this.Qe(t))return!1;const r=nc(e);let o=0,u=0;for(;o<r.length&&this.Qe(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ke){const d=r[o];if(!this.je(this.Ke,d)||!this.We(this.Ue[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ue.length||!this.We(this.Ue[u++],d))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class TE{constructor(){this.ze=new sp}addToCollectionParentIndex(e,t){return this.ze.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(zr.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class sp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new dn(Xt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new dn(Xt.comparator)).toArray()}}const op=new Uint8Array(0);class CC{constructor(e,t){this.user=e,this.databaseId=t,this.He=new sp,this.Je=new fc(r=>uc(r),(r,o)=>Do(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:Ki(o)};return Rv(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[z_(t),""],!1,!0);return Rv(e).K(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(ma(d.parent))}return r})}addFieldIndex(e,t){const r=Om(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=gh(e);return u.next(g=>{d.put(EE(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Om(e),o=gh(e),u=ph(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ph(e);let o=!0;const u=new Map;return le.forEach(this.Ye(t),d=>this.Xe(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=Vt();const g=[];return le.forEach(u,(w,D)=>{var S;Ne("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Bt=>`${Bt.fieldPath}:${Bt.kind}`).join(",")}`} to execute ${uc(t)}`);const k=function(Bt,At){const Lt=dr(At);if(void 0===Lt)return null;for(const Kt of _m(Bt,Lt.fieldPath))switch(Kt.op){case"array-contains-any":return Kt.value.arrayValue.values||[];case"array-contains":return[Kt.value]}return null}(D,w),z=function(Bt,At){const Lt=new Map;for(const Kt of nc(At))for(const oi of _m(Bt,Kt.fieldPath))switch(oi.op){case"==":case"in":Lt.set(Kt.fieldPath.canonicalString(),oi.value);break;case"not-in":case"!=":return Lt.set(Kt.fieldPath.canonicalString(),oi.value),Array.from(Lt.values())}return null}(D,w),X=function(Bt,At){const Lt=[];let Kt=!0;for(const oi of nc(At)){const Pw=0===oi.kind?Tl(Bt,oi.fieldPath,Bt.startAt):qD(Bt,oi.fieldPath,Bt.startAt);Lt.push(Pw.value),Kt&&(Kt=Pw.inclusive)}return new vs(Lt,Kt)}(D,w),se=function(Bt,At){const Lt=[];let Kt=!0;for(const oi of nc(At)){const Pw=0===oi.kind?qD(Bt,oi.fieldPath,Bt.endAt):Tl(Bt,oi.fieldPath,Bt.endAt);Lt.push(Pw.value),Kt&&(Kt=Pw.inclusive)}return new vs(Lt,Kt)}(D,w),xe=this.Ze(w,D,X),Ue=this.Ze(w,D,se),Et=this.tn(w,D,z),Ct=this.en(w.indexId,k,xe,X.inclusive,Ue,se.inclusive,Et);return le.forEach(Ct,Bt=>r.j(Bt,t.limit).next(At=>{At.forEach(Lt=>{const Kt=He.fromSegments(Lt.documentKey);d.has(Kt)||(d=d.add(Kt),g.push(Kt))})}))}).next(()=>g)}return le.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,o,u,d,g){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),D=w/(null!=t?t.length:1),S=[];for(let k=0;k<w;++k){const z=t?this.nn(t[k/D]):op,X=this.sn(e,z,r[k%D],o),se=this.rn(e,z,u[k%D],d),xe=g.map(Ue=>this.sn(e,z,Ue,!0));S.push(...this.createRange(X,se,xe))}return S}sn(e,t,r,o){const u=new Fl(e,He.empty(),t,r);return o?u:u.Le()}rn(e,t,r,o){const u=new Fl(e,He.empty(),t,r);return o?u.Le():u}Xe(e,t){const r=new DC(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.Ge(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;return le.forEach(this.Ye(t),o=>this.Xe(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let g=new dn(tr.comparator),w=!1;for(const D of d.filters){const S=D;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:g=g.add(S.field))}for(const D of d.orderBy)D.field.isKeyField()||(g=g.add(D.field));return g.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Ll;for(const o of nc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Be(o.kind);Pl.ye.re(u,d)}return r.Me()}nn(e){const t=new Ll;return Pl.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new Ll;return Pl.ye.re(Cl(this.databaseId,t),r.Be(function(o){const u=nc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let o=[];o.push(new Ll);let u=0;for(const d of nc(e)){const g=r[u++];for(const w of o)if(this.cn(t,d.fieldPath)&&Vf(g))o=this.an(o,d,g);else{const D=w.Be(d.kind);Pl.ye.re(g,D)}}return this.hn(o)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const w=new Ll;w.seed(g.Me()),Pl.ye.re(d,w.Be(t.kind)),u.push(w)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof Rr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Om(e),o=gh(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const d=[];return le.forEach(u,g=>o.get([g.indexId,this.uid]).next(w=>{d.push(function(D,S){const k=S?new Pf(S.sequenceNumber,new zr(Mo(S.readTime),new He(ma(S.documentKey)),S.largestBatchId)):Pf.empty(),z=D.fields.map(([X,se])=>new cm(tr.fromServerFormat(X),se));return new um(D.indexId,D.collectionGroup,z,k)}(g,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:St(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Om(e),u=gh(e);return this.ln(e).next(d=>o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>le.forEach(g,w=>u.put(EE(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?le.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),le.forEach(g,w=>this.fn(e,o,w).next(D=>{const S=this.dn(u,w);return D.isEqual(S)?le.resolve():this._n(e,u,w,D,S)}))))})}wn(e,t,r,o){return ph(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,o){return ph(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const o=ph(e);let u=new dn(Ul);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(d,g)=>{u=u.add(new Fl(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}dn(e,t){let r=new dn(Ul);const o=this.on(t,e);if(null==o)return r;const u=dr(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Vf(d))for(const g of d.arrayValue.values||[])r=r.add(new Fl(t.indexId,e.key,this.nn(g),o))}else r=r.add(new Fl(t.indexId,e.key,op,o));return r}_n(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,w,D,S,k){const z=g.getIterator(),X=w.getIterator();let se=bl(z),xe=bl(X);for(;se||xe;){let Ue=!1,Et=!1;if(se&&xe){const Ct=D(se,xe);Ct<0?Et=!0:Ct>0&&(Ue=!0)}else null!=se?Et=!0:Ue=!0;Ue?(S(xe),xe=bl(X)):Et?(k(se),se=bl(z)):(se=bl(z),xe=bl(X))}}(o,u,Ul,g=>{d.push(this.wn(e,t,r,g))},g=>{d.push(this.mn(e,t,r,g))}),le.waitFor(d)}ln(e){let t=1;return gh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>Ul(d,g)).filter((d,g,w)=>!g||0!==Ul(d,w[g-1]));const o=[];o.push(e);for(const d of r){const g=Ul(d,e),w=Ul(d,t);if(0===g)o[0]=e.Le();else if(g>0&&w<0)o.push(d),o.push(d.Le());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,op,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,op,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kv)}getMinOffset(e,t){return le.mapArray(this.Ye(t),r=>this.Xe(e,r).next(o=>o||it())).next(kv)}}function Rv(n){return Wr(n,"collectionParents")}function ph(n){return Wr(n,"indexEntries")}function Om(n){return Wr(n,"indexConfiguration")}function gh(n){return Wr(n,"indexState")}function kv(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;W_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new zr(e.readTime,e.documentKey,t)}const ME={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Si{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Si(e,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function AE(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const w=r.J({range:d},(S,k,z)=>(g++,z.delete()));u.push(w.next(()=>{bt(1===g)}));const D=[];for(const S of t.mutations){const k=hE(e,S.key.path,t.batchId);u.push(o.delete(k)),D.push(S.key)}return le.waitFor(u).next(()=>D)}function Kr(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);class _u{constructor(e,t,r,o){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=o,this.gn={}}static se(e,t,r,o){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new _u(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pc(e).J({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=ap(e),d=pc(e);return d.add({}).next(g=>{bt("number"==typeof g);const w=new Dv(g,t,r,o),D=function(z,X,se){const xe=se.baseMutations.map(Et=>lh(z.ne,Et)),Ue=se.mutations.map(Et=>lh(z.ne,Et));return{userId:X,batchId:se.batchId,localWriteTimeMs:se.localWriteTime.toMillis(),baseMutations:xe,mutations:Ue}}(this.wt,this.userId,w),S=[];let k=new dn((z,X)=>St(z.canonicalString(),X.canonicalString()));for(const z of o){const X=hE(this.userId,z.key.path,g);k=k.add(z.key.path.popLast()),S.push(d.put(D)),S.push(u.put(X,fC))}return k.forEach(z=>{S.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.gn[g]=w.keys()}),le.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return pc(e).get(t).next(r=>r?(bt(r.userId===this.userId),Nl(this.wt,r)):null)}yn(e,t){return this.gn[t]?le.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.gn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return pc(e).J({index:"userMutationsIndex",range:o},(d,g,w)=>{g.userId===this.userId&&(bt(g.batchId>=r),u=Nl(this.wt,g)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return pc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pc(e).K("userMutationsIndex",t).next(r=>r.map(o=>Nl(this.wt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Iv(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return ap(e).J({range:o},(d,g,w)=>{const[D,S,k]=d,z=ma(S);if(D===this.userId&&t.path.isEqual(z))return pc(e).get(k).next(X=>{if(!X)throw it();bt(X.userId===this.userId),u.push(Nl(this.wt,X))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(St);const o=[];return t.forEach(u=>{const d=Iv(this.userId,u.path),g=IDBKeyRange.lowerBound(d),w=ap(e).J({range:g},(D,S,k)=>{const[z,X,se]=D,xe=ma(X);z===this.userId&&u.path.isEqual(xe)?r=r.add(se):k.done()});o.push(w)}),le.waitFor(o).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Iv(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new dn(St);return ap(e).J({range:d},(w,D,S)=>{const[k,z,X]=w,se=ma(z);k===this.userId&&r.isPrefixOf(se)?se.length===o&&(g=g.add(X)):S.done()}).next(()=>this.pn(e,g))}pn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(pc(e).get(u).next(d=>{if(null===d)throw it();bt(d.userId===this.userId),r.push(Nl(this.wt,d))}))}),le.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return AE(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),le.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return ap(e).J({range:r},(u,d,g)=>{if(u[0]===this.userId){const w=ma(u[1]);o.push(w)}else g.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return SE(e,this.userId,t)}Tn(e){return TC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function SE(n,e,t){const r=Iv(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return ap(n).J({range:u,H:!0},(g,w,D)=>{const[S,k,z]=g;S===e&&k===o&&(d=!0),D.done()}).next(()=>d)}function pc(n){return Wr(n,"mutations")}function ap(n){return Wr(n,"documentMutations")}function TC(n){return Wr(n,"mutationQueues")}class gc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new gc(0)}static Rn(){return new gc(-1)}}class xE{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new gc(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Dt.fromTimestamp(new Mn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pn(e,o)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ya(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ya(e).J((d,g)=>{const w=np(g);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>le.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ya(e).J((r,o)=>{const u=np(o);t(u)})}bn(e){return RE(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}Pn(e,t){return RE(e).put("targetGlobalKey",t)}vn(e,t){return ya(e).put(wE(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ya(e).J({range:o,index:"queryTargetsIndex"},(d,g,w)=>{const D=np(g);Do(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=_a(e);return t.forEach(d=>{const g=Ki(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),le.waitFor(o)}removeMatchingKeys(e,t,r){const o=_a(e);return le.forEach(t,u=>{const d=Ki(u.path);return le.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=_a(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=_a(e);let u=Vt();return o.J({range:r,H:!0},(d,g,w)=>{const D=ma(d[1]),S=new He(D);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ki(t.path),o=IDBKeyRange.bound([r],[z_(r)],!1,!0);let u=0;return _a(e).J({index:"documentTargetsIndex",H:!0,range:o},([d,g],w,D)=>{0!==d&&(u++,D.done())}).next(()=>u>0)}te(e,t){return ya(e).get(t).next(r=>r?np(r):null)}}function ya(n){return Wr(n,"targets")}function RE(n){return Wr(n,"targetGlobal")}function _a(n){return Wr(n,"targetDocuments")}function kE([n,e],[t,r]){const o=St(n,t);return 0===o?St(e,r):o}class OE{constructor(e){this.Sn=e,this.buffer=new dn(kE),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ic(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield rc(r)}yield t.kn(3e5)}))}}class AC{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Hi.ot);const r=new OE(t);return this.Mn.forEachTarget(e,o=>r.xn(o.sequenceNumber)).next(()=>this.Mn.Fn(e,o=>r.xn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(ME)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ME):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,o,u,d,g,w,D;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),o=this.params.maximumSequenceNumbersToCollect):o=k,d=Date.now(),this.nthSequenceNumber(e,o))).next(k=>(r=k,g=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(D=Date.now(),Qd()<=su.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(w-g)+`ms\n\tRemoved ${k} documents in `+(D-w)+`ms\nTotal Duration: ${D-S}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:k})))}}class mh{constructor(e,t){this.db=e,this.garbageCollector=new AC(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,o)=>t(o))}addReference(e,t,r){return Nm(e,r)}removeReference(e,t,r){return Nm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nm(e,t)}Un(e,t){return function(r,o){let u=!1;return TC(r).Y(d=>SE(r,d,o).next(g=>(g&&(u=!0),le.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ln(e,(d,g)=>{if(g<=t){const w=this.Un(e,d).next(D=>{if(!D)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Dt.min()),_a(e).delete([0,Ki(d.path)])))});o.push(w)}}).next(()=>le.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nm(e,t)}Ln(e,t){const r=_a(e);let o,u=Hi.ot;return r.J({index:"documentTargetsIndex"},([d,g],{path:w,sequenceNumber:D})=>{0===d?(u!==Hi.ot&&t(new He(ma(o)),u),u=D,o=w):u=Hi.ot}).next(()=>{u!==Hi.ot&&t(new He(ma(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nm(n,e){return _a(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ki(e.path),sequenceNumber:r}));var r}class Pm{constructor(){this.changes=new fc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NE{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yh(e).put(r)}removeEntry(e,t,r){return yh(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],xm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=yn.newInvalidDocument(t);return yh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_h(t))},(o,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:yn.newInvalidDocument(t)};return yh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_h(t))},(o,u)=>{r={document:this.Kn(t,u),size:Kr(u)}}).next(()=>r)}getEntries(e,t){let r=Wi();return this.Qn(e,t,(o,u)=>{const d=this.Kn(o,u);r=r.insert(o,d)}).next(()=>r)}jn(e,t){let r=Wi(),o=new bn(He.comparator);return this.Qn(e,t,(u,d)=>{const g=this.Kn(u,d);r=r.insert(u,g),o=o.insert(u,Kr(d))}).next(()=>({documents:r,Wn:o}))}Qn(e,t,r){if(t.isEmpty())return le.resolve();let o=new dn(Nv);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(_h(o.first()),_h(o.last())),d=o.getIterator();let g=d.getNext();return yh(e).J({index:"documentKeyIndex",range:u},(w,D,S)=>{const k=He.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&Nv(g,k)<0;)r(g,null),g=d.getNext();g&&g.isEqual(k)&&(r(g,D),g=d.hasNext()?d.getNext():null),g?S.q(_h(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),xm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yh(e).K(IDBKeyRange.bound(o,u,!0)).next(d=>{let g=Wi();for(const w of d){const D=this.Kn(He.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);g=g.insert(D.key,D)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=Wi();const d=PE(t,r),g=PE(t,zr.max());return yh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(w,D,S)=>{const k=this.Kn(He.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(k.key,k),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new Lm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Fm(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}qn(e,t){return Fm(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function Mv(n,e){let t;if(e.document)t=yv(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),o=Mo(e.noDocument.readTime);t=yn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=He.fromSegments(e.unknownDocument.path),o=Mo(e.unknownDocument.version);t=yn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Mn(r[0],r[1]);return Dt.fromTimestamp(o)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return yn.newInvalidDocument(e)}}function Ov(n){return new NE(n)}class Lm extends Pm{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new fc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new dn((u,d)=>St(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const w=To(this.zn.wt,d);o=o.add(u.path.popLast()),r+=Kr(w)-g.size,t.push(this.zn.addEntry(e,u,w))}else if(r-=g.size,this.trackRemovals){const w=To(this.zn.wt,d.convertToNoDocument(Dt.min()));t.push(this.zn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:o})=>(o.forEach((u,d)=>{this.Hn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Fm(n){return Wr(n,"remoteDocumentGlobal")}function yh(n){return Wr(n,"remoteDocumentsV14")}function _h(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function PE(n,e){const t=e.documentKey.path.toArray();return[n,xm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Nv(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=St(t[u],r[u]),o)return o;return o=St(t.length,r.length),o||(o=St(t[t.length-2],r[r.length-2]),o||St(t[t.length-1],r[r.length-1]))}class vh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class LE{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&oh(r.mutation,o,yi.empty(),Mn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const o=Co();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Kf();return u.forEach((g,w)=>{d=d.insert(g,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=Wi();const d=Zf(),g=Zf();return t.forEach((w,D)=>{const S=r.get(D.key);o.has(D.key)&&(void 0===S||S.mutation instanceof mu)?u=u.insert(D.key,D):void 0!==S&&(d.set(D.key,S.mutation.getFieldMask()),oh(S.mutation,D,S.mutation.getFieldMask(),Mn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((D,S)=>d.set(D,S)),t.forEach((D,S)=>{var k;return g.set(D,new vh(S,null!==(k=d.get(D))&&void 0!==k?k:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Zf();let o=new bn((d,g)=>d-g),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let S=r.get(w)||yi.empty();S=g.applyToLocalView(D,S),r.set(w,S);const k=(o.get(g.batchId)||Vt()).add(w);o=o.insert(g.batchId,k)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const w=g.getNext(),D=w.key,S=w.value,k=J0();S.forEach(z=>{if(!u.has(z)){const X=W0(t.get(z),r.get(z));null!==X&&k.set(z,X),u=u.add(z)}}),d.push(this.documentOverlayCache.saveOverlays(e,D,k))}return le.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return He.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Em(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):le.resolve(Co());let g=-1,w=u;return d.next(D=>le.forEach(D,(S,k)=>(g<k.largestBatchId&&(g=k.largestBatchId),u.get(S)?le.resolve():this.getBaseDocument(e,S,k).next(z=>{w=w.insert(S,z)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,w,D,Vt())).next(S=>({batchId:g,changes:dv(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let o=Kf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Kf();return this.indexManager.getCollectionParents(e,o).next(d=>le.forEach(d,g=>{const w=(D=t,S=g.child(o),new cc(S,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((S,k)=>{u=u.insert(S,k)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,w)=>{const D=w.getKey();null===o.get(D)&&(o=o.insert(D,yn.newInvalidDocument(D)))});let d=Kf();return o.forEach((g,w)=>{const D=u.get(g);void 0!==D&&oh(D.mutation,w,yi.empty(),Mn.now()),iv(t,w)&&(d=d.insert(g,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):le.resolve(yn.newInvalidDocument(t))}}class FE{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return le.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Dr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:hh(r.bundledQuery),readTime:Dr(r.readTime)}),le.resolve();var r}}class Pv{constructor(){this.overlays=new bn(He.comparator),this.Xn=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Co();return le.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ie(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Xn.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const o=Co(),u=t.length+1,d=new He(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const w=g.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new bn((D,S)=>D-S);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let S=u.get(D.largestBatchId);null===S&&(S=Co(),u=u.insert(D.largestBatchId,S)),S.set(D.getKey(),D)}}const g=Co(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,S)=>g.set(D,S)),!(g.size()>=o)););return le.resolve(g)}ie(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.Xn.get(o.largestBatchId).delete(r.key);this.Xn.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Tv(t,r));let u=this.Xn.get(t);void 0===u&&(u=Vt(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class UE{constructor(){this.Zn=new dn(Zr.ts),this.es=new dn(Zr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Zr(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Zr(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new He(new Xt([])),r=new Zr(t,e),o=new Zr(t,e+1),u=[];return this.es.forEachInRange([r,o],d=>{this.rs(d),u.push(d.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new He(new Xt([])),r=new Zr(t,e),o=new Zr(t,e+1);let u=Vt();return this.es.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Zr(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Zr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return He.comparator(e.key,t.key)||St(e.ls,t.ls)}static ns(e,t){return St(e.ls,t.ls)||He.comparator(e.key,t.key)}}class rM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new dn(Zr.ts)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.fs;this.fs++;const d=new Dv(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.ds=this.ds.add(new Zr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ws(t+1),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zr(t,0),o=new Zr(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,o],d=>{const g=this._s(d.ls);u.push(g)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(St);return t.forEach(o=>{const u=new Zr(o,0),d=new Zr(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,d],g=>{r=r.add(g.ls)})}),le.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const d=new Zr(new He(u),0);let g=new dn(St);return this.ds.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(g=g.add(w.ls)),!0)},d),le.resolve(this.gs(g))}gs(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return le.forEach(t.mutations,o=>{const u=new Zr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Zr(t,0),o=this.ds.firstAfterOrEqual(r);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return le.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class SC{constructor(e){this.ps=e,this.docs=new bn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=Wi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():yn.newInvalidDocument(o))}),le.resolve(r)}getAllFromCollection(e,t,r){let o=Wi();const u=new He(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:w}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||W_(G_(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,t,r,o){it()}Is(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xC(this)}getSize(e){return le.resolve(this.size)}}class xC extends Pm{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.zn.addEntry(e,o)):this.zn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class RC{constructor(e){this.persistence=e,this.Ts=new fc(t=>uc(t),Do),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Es=0,this.As=new UE,this.targetCount=0,this.Rs=gc.An()}forEachTarget(e,t){return this.Ts.forEach((r,o)=>t(o)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),le.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new gc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.vn(t),le.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Ts.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Ts.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),le.waitFor(u).next(()=>o)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.As.containsKey(t))}}class Lv{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Hi(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new RC(this),this.indexManager=new TE,this.remoteDocumentCache=new SC(r=>this.referenceDelegate.Ss(r)),this.wt=new vE(t),this.Ds=new FE(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new rM(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new VE(this.Ps.next());return this.referenceDelegate.Cs(),r(o).next(u=>this.referenceDelegate.xs(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ns(e,t){return le.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class VE extends K_{constructor(e){super(),this.currentSequenceNumber=e}}class Um{constructor(e){this.persistence=e,this.ks=new UE,this.Ms=null}static Os(e){return new Um(e)}get Fs(){if(this.Ms)return this.Ms;throw it()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),le.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(o=>this.Fs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Fs,r=>{const o=He.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o,Dt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return le.or([()=>le.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class BE{constructor(e){this.wt=e}M(e,t,r,o){const u=new Lf("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hC,{unique:!0}),g.createObjectStore("documentMutations"),Fv(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=le.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),Fv(e)),d=d.next(()=>function(g){const w=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,w){return w.store("mutations").K().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hC,{unique:!0});const S=w.store("mutations"),k=D.map(z=>S.put(z));return le.waitFor(k)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Bs(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&o>=7&&(d=d.next(()=>this.Us(u))),r<8&&o>=8&&(d=d.next(()=>this.qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Ks(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const w=g.createObjectStore("documentOverlays",{keyPath:fE});w.createIndex("collectionPathOverlayIndex",pE,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",gE,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const w=g.createObjectStore("remoteDocumentsV14",{keyPath:pC});w.createIndex("documentKeyIndex",gC),w.createIndex("collectionGroupIndex",mC)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.Qs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:IC}).createIndex("sequenceNumberIndex",EC,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:bC}).createIndex("documentKeyIndex",tp,{unique:!1})}(e))),d}Ls(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=Kr(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(o=>le.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",d).next(g=>le.forEach(g,w=>{bt(w.userId===u.userId);const D=Nl(this.wt,w);return AE(e,u.userId,D).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.J((d,g)=>{const w=new Xt(d),D=[0,Ki(w)];u.push(t.get(D).next(S=>S?le.resolve():t.put({targetId:0,path:Ki(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:wC});const r=t.store("collectionParents"),o=new sp,u=d=>{if(o.add(d)){const g=d.lastSegment(),w=d.popLast();return r.put({collectionId:g,parent:Ki(w)})}};return t.store("remoteDocuments").J({H:!0},(d,g)=>{const w=new Xt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([d,g,w],D)=>{const S=ma(g);return u(S.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,o)=>{const u=np(o),d=wE(this.wt,u);return t.put(d)})}Gs(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((u,d)=>{const g=t.store("remoteDocumentsV14"),w=(D=d,D.document?new He(Xt.fromString(D.document.name).popFirst(5)):D.noDocument?He.fromSegments(D.noDocument.path):D.unknownDocument?He.fromSegments(D.unknownDocument.path):it()).path.toArray();var D;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(S))}).next(()=>le.waitFor(o))}Qs(e,t){const r=t.store("mutations"),o=Ov(this.wt),u=new Lv(Um.Os,this.wt.ne);return r.K().next(d=>{const g=new Map;return d.forEach(w=>{var D;let S=null!==(D=g.get(w.userId))&&void 0!==D?D:Vt();Nl(this.wt,w).keys().forEach(k=>S=S.add(k)),g.set(w.userId,S)}),le.forEach(g,(w,D)=>{const S=new Ir(D),k=rp.se(this.wt,S),z=u.getIndexManager(S),X=_u.se(S,this.wt,z,u.referenceDelegate);return new LE(o,X,k,z).recalculateAndSaveOverlaysForDocumentKeys(new bv(t,Hi.ot),w).next()})})}}function Fv(n){n.createObjectStore("targetDocuments",{keyPath:_C}).createIndex("documentTargetsIndex",vC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yC,{unique:!0}),n.createObjectStore("targetGlobal")}const Uv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vv{constructor(e,t,r,o,u,d,g,w,D,S,k=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=d,this.document=g,this.Ws=D,this.zs=S,this.Hs=k,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=z=>Promise.resolve(),!Vv.V())throw new ke(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mh(this,o),this.ei=t+"main",this.wt=new vE(w),this.ni=new _s(this.ei,this.Hs,new BE(this.wt)),this.Vs=new xE(this.referenceDelegate,this.wt),this.remoteDocumentCache=Ov(this.wt),this.Ds=new bE,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===S&&Kn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,Uv);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Hi(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,we.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(ic(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return wh(e).get("owner").next(t=>le.resolve(this.di(t)))}_i(e){return Vm(e).delete(this.clientId)}wi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Wr(r,"clientMetadata");return o.K().next(u=>{const d=e.gi(u,18e5),g=u.filter(w=>-1===d.indexOf(w));return le.forEach(g,w=>o.delete(w.clientId)).next(()=>g)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?le.resolve(!0):wh(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new ke(he.FAILED_PRECONDITION,Uv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vm(e).K().next(r=>void 0===this.gi(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bv(t,Hi.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Vm(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return _u.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new CC(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return rp.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Hs)?tM:14===d?_E:13===d?yE:12===d?mE:11===d?Ev:void it();var d;let g;return this.ni.runTransaction(e,o,u,w=>(g=new bv(w,this.Ps?this.Ps.next():Hi.ot),"readwrite-primary"===t?this.ai(g).next(D=>!!D||this.hi(g)).next(D=>{if(!D)throw Kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new ke(he.FAILED_PRECONDITION,E0);return r(g)}).next(D=>this.fi(g).next(()=>D)):this.bi(g).next(()=>r(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}bi(e){return wh(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(he.FAILED_PRECONDITION,Uv)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wh(e).put("owner",t)}static V(){return _s.V()}li(e){const t=wh(e);return t.get("owner").next(r=>this.di(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Kn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,zt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Kn("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wh(n){return Wr(n,"owner")}function Vm(n){return Wr(n,"clientMetadata")}function Bm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=o}static Vi(e,t){let r=Vt(),o=Vt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jm(e,t.fromCache,r,o)}}class Bv{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ci(e,t).next(u=>u||this.xi(e,t,o,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){if(U0(t))return le.resolve(null);let r=Gi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=bm(t,null,"F"),r=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Vt(...u);return this.Di.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.ki(t,g);return this.Mi(t,D,d,w.readTime)?this.Ci(e,bm(t,null,"F")):this.Oi(e,D,t,w)}))})))}xi(e,t,r,o){return U0(t)||o.isEqual(Dt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const d=this.ki(t,u);return this.Mi(t,d,r,o)?this.Ni(e,t):(Qd()<=su.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),rv(t)),this.Oi(e,d,t,H_(o,-1)))})}ki(e,t){let r=new dn(zf(e));return t.forEach((o,u)=>{iv(e,u)&&(r=r.add(u))}),r}Mi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ni(e,t){return Qd()<=su.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",rv(t)),this.Di.getDocumentsMatchingQuery(e,t,zr.min())}Oi(e,t,r,o){return this.Di.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class jE{constructor(e,t,r,o){this.persistence=e,this.Fi=t,this.wt=o,this.$i=new bn(St),this.Bi=new fc(u=>uc(u),Do),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LE(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function $E(n,e,t,r){return new jE(n,e,t,r)}function zE(n,e){return HE.apply(this,arguments)}function HE(){return HE=(0,we.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let w=Vt();for(const D of o){d.push(D.batchId);for(const S of D.mutations)w=w.add(S.key)}for(const D of u){g.push(D.batchId);for(const S of D.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(D=>({Ki:D,removedBatchIds:d,addedBatchIds:g}))})})}),HE.apply(this,arguments)}function GE(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(d,g,w,D){const S=w.batch,k=S.keys();let z=le.resolve();return k.forEach(X=>{z=z.next(()=>D.getEntry(g,X)).next(se=>{const xe=w.docVersions.get(X);bt(null!==xe),se.version.compareTo(xe)<0&&(S.applyToRemoteDocument(se,w),se.isValidDocument()&&(se.setReadTime(w.commitVersion),D.addEntry(se)))})}),z.next(()=>d.mutationQueue.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Vt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(g=g.add(d.batch.mutations[w].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function kC(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function iM(n,e){const t=Ze(n),r=e.snapshotVersion;let o=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Ui.newChangeBuffer({trackRemovals:!0});o=t.$i;const g=[];e.targetChanges.forEach((S,k)=>{const z=o.get(k);if(!z)return;g.push(t.Vs.removeMatchingKeys(u,S.removedDocuments,k).next(()=>t.Vs.addMatchingKeys(u,S.addedDocuments,k)));let X=z.withSequenceNumber(u.currentSequenceNumber);var se,xe,Ue;e.targetMismatches.has(k)?X=X.withResumeToken(Er.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):S.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(S.resumeToken,r)),o=o.insert(k,X),xe=X,Ue=S,(0===(se=z).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-se.snapshotVersion.toMicroseconds()>=3e8||Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0)&&g.push(t.Vs.updateTargetData(u,X))});let w=Wi(),D=Vt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(OC(u,d,e.documentUpdates).next(S=>{w=S.Gi,D=S.Qi})),!r.isEqual(Dt.min())){const S=t.Vs.getLastRemoteSnapshotVersion(u).next(k=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return le.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,D)).next(()=>w)}).then(u=>(t.$i=o,u))}function OC(n,e,t){let r=Vt(),o=Vt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Wi();return t.forEach((g,w)=>{const D=u.get(g);w.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(g)),w.isNoDocument()&&w.version.isEqual(Dt.min())?(e.removeEntry(g,w.readTime),d=d.insert(g,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),d=d.insert(g,w)):Ne("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",w.version)}),{Gi:d,Qi:o}})}function sM(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function up(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Vs.getTargetData(r,e).next(u=>u?(o=u,le.resolve(o)):t.Vs.allocateTargetId(r).next(d=>(o=new Ks(e,d,0,r.currentSequenceNumber),t.Vs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.$i.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function cp(n,e,t){return WE.apply(this,arguments)}function WE(){return WE=(0,we.Z)(function*(n,e,t){const r=Ze(n),o=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ic(d))throw d;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.$i=r.$i.remove(e),r.Bi.delete(o.target)}),WE.apply(this,arguments)}function jv(n,e,t){const r=Ze(n);let o=Dt.min(),u=Vt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,w,D){const S=Ze(g),k=S.Bi.get(D);return void 0!==k?le.resolve(S.$i.get(k)):S.Vs.getTargetData(w,D)}(r,d,Gi(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(d,g.targetId).next(w=>{u=w})}).next(()=>r.Fi.getDocumentsMatchingQuery(d,e,t?o:Dt.min(),t?u:Vt())).next(g=>($v(r,V0(e),g),{documents:g,ji:u})))}function lp(n,e){const t=Ze(n),r=Ze(t.Vs),o=t.$i.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(d=>d?d.target:null))}function NC(n,e){const t=Ze(n),r=t.Li.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ui.getAllFromCollectionGroup(o,e,H_(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>($v(t,e,o),o))}function $v(n,e,t){let r=Dt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function zm(){return zm=(0,we.Z)(function*(n,e,t,r){const o=Ze(n);let u=Vt(),d=Wi();for(const D of t){const S=e.Wi(D.metadata.name);D.document&&(u=u.add(S));const k=e.zi(D);k.setReadTime(e.Hi(D.metadata.readTime)),d=d.insert(S,k)}const g=o.Ui.newChangeBuffer({trackRemovals:!0}),w=yield up(o,(D=r,Gi(Ml(Xt.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>OC(D,g,d).next(S=>(g.apply(D),S)).next(S=>o.Vs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>o.Vs.addMatchingKeys(D,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,S.Gi,S.Qi)).next(()=>S.Gi)))}),zm.apply(this,arguments)}function KE(n,e){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,we.Z)(function*(n,e,t=Vt()){const r=yield up(n,Gi(hh(e.bundledQuery))),o=Ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Dr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ds.saveNamedQuery(u,e);const g=r.withResumeToken(Er.EMPTY_BYTE_STRING,d);return o.$i=o.$i.insert(g.targetId,g),o.Vs.updateTargetData(u,g).next(()=>o.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ds.saveNamedQuery(u,e))})}),ZE.apply(this,arguments)}function Hm(n,e){return`firestore_clients_${n}_${e}`}function zv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Hv(n,e){return`firestore_targets_${n}_${e}`}class dp{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new ke(o.error.code,o.error.message))),d?new dp(e,t,o.state,u):(Kn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new ke(r.error.code,r.error.message))),u?new Gm(e,r.state,o):(Kn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Tm();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=M0(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Gv(e,u):(Kn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Wv{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Wv(t.clientId,t.onlineState):(Kn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kv{constructor(){this.activeTargetIds=Tm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ih{constructor(e,t,r,o,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new bn(St),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=Hm(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Kv),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.Ri();for(const o of t){if(o===e.tr)continue;const u=e.getItem(Hm(e.persistenceKey,o));if(u){const d=Gv.Ji(o,u);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Hv(this.persistenceKey,e));if(r){const o=Gm.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let d=Hi.ot;if(null!=u)try{const g=JSON.parse(u);bt("number"==typeof g),d=g}catch(g){Kn("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==Hi.ot&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new dp(this.currentUser,e,t,r),u=zv(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=zv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=Hv(this.persistenceKey,e),u=new Gm(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Gv.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),o=Number(r[1]);return dp.Ji(new Ir(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Gm.Ji(o,t)}wr(e){return Wv.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),d=[],g=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||g.push(w)}),this.syncEngine.Or(d,g).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Tm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class qE{constructor(){this.Fr=new Kv,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Kv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oM{Br(e){}shutdown(){}}class PC{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const aM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class LC{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class FC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const d=this.oo(e,t);Ne("RestConnection","Sending: ",d,r);const g={};return this.uo(g,o,u),this.co(e,d,g,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw pu("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}ao(e,t,r,o,u,d){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${aM[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,d)=>{const g=new zD;g.listenOnce(jD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case im.NO_ERROR:const D=g.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(D)),u(D);break;case im.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),d(new ke(he.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const S=g.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const k=g.getResponseJson().error;if(k&&k.status&&k.message){const z=function(X){const se=X.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(se)>=0?se:he.UNKNOWN}(k.status);d(new ke(z,k.message))}else d(new ke(he.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new ke(he.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);g.send(t,"POST",w,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=c0(),d=l0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new h0({})),this.uo(g.initMessageHeaders,t,r),(0,zt.uI)()||(0,zt.b$)()||(0,zt.d)()||(0,zt.w1)()||(0,zt.Mn)()||(0,zt.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Ne("Connection","Creating WebChannel: "+w,g);const D=u.createWebChannel(w,g);let S=!1,k=!1;const z=new LC({jr:se=>{k?Ne("Connection","Not sending because WebChannel is closed:",se):(S||(Ne("Connection","Opening WebChannel transport."),D.open(),S=!0),Ne("Connection","WebChannel sending:",se),D.send(se))},Wr:()=>D.close()}),X=(se,xe,Ue)=>{se.listen(xe,Et=>{try{Ue(Et)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return X(D,sm.EventType.OPEN,()=>{k||Ne("Connection","WebChannel transport opened.")}),X(D,sm.EventType.CLOSE,()=>{k||(k=!0,Ne("Connection","WebChannel transport closed"),z.eo())}),X(D,sm.EventType.ERROR,se=>{k||(k=!0,pu("Connection","WebChannel transport errored:",se),z.eo(new ke(he.UNAVAILABLE,"The operation could not be completed")))}),X(D,sm.EventType.MESSAGE,se=>{var xe;if(!k){const Ue=se.data[0];bt(!!Ue);const Et=Ue,Ct=Et.error||(null===(xe=Et[0])||void 0===xe?void 0:xe.error);if(Ct){Ne("Connection","WebChannel received error:",Ct);const Bt=Ct.status;let At=function(Kt){const oi=br[Kt];if(void 0!==oi)return lv(oi)}(Bt),Lt=Ct.message;void 0===At&&(At=he.INTERNAL,Lt="Unknown error status: "+Bt+" with message "+Ct.message),k=!0,z.eo(new ke(At,Lt)),D.close()}else Ne("Connection","WebChannel received:",Ue),z.no(Ue)}}),X(d,$D.STAT_EVENT,se=>{se.stat===d0.PROXY?Ne("Connection","Detected buffering proxy"):se.stat===d0.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.Zr()},0),z}}function YE(){return typeof window<"u"?window:null}function Zv(){return typeof document<"u"?document:null}function hp(n){return new rE(n,!0)}class Wm{constructor(e,t,r=1e3,o=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class qv{constructor(e,t,r,o,u,d,g,w){this.js=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=w,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Wm(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,we.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,we.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new ke(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,we.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uM extends qv{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function eM(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:it(),o=e.targetChange.targetIds||[],u=function(w,D){return w.dt?(bt(void 0===D||"string"==typeof D),Er.fromBase64String(D||"")):(bt(void 0===D||D instanceof Uint8Array),Er.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(w){const D=void 0===w.code?he.UNKNOWN:lv(w.code);return new ke(D,w.message||"")}(d);t=new tE(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=ga(n,r.document.name),u=Dr(r.document.updateTime),d=new Gr({mapValue:{fields:r.document.fields}}),g=yn.newFoundDocument(o,u,d);t=new Mm(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=ga(n,r.document),u=r.readTime?Dr(r.readTime):Dt.min(),d=yn.newNoDocument(o,u);t=new Mm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ga(n,r.document);t=new Mm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new ch(r.count||0);t=new eE(r.targetId,u)}}var w;return t}(this.wt,e),r=function(o){if(!("targetChange"in o))return Dt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?Dr(u.readTime):Dt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Xf(this.wt),t.addTarget=function(o,u){let d;const g=u.target;return d=ym(g)?{documents:Sm(o,g)}:{query:oE(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=iE(o,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(d.readTime=Qf(o,u.snapshotVersion.toTimestamp())),d}(this.wt,e);const r=function _v(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Xf(this.wt),t.removeTarget=e,this.Oo(t)}}class Ao extends qv{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function uC(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let u=Dr(r.updateTime?r.updateTime:o);return u.isEqual(Dt.min())&&(u=Dr(o)),new XT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.Jo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Xf(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lh(this.wt,r))};this.Oo(t)}}class UC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=o,this.Zo=!1}tu(){if(this.Zo)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(he.UNKNOWN,o.toString())})}ao(e,t,r,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.bo.ao(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ke(he.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class Yv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Kn(t),this.su=!1):Ne("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class VC{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(g=>{r.enqueueAndForget((0,we.Z)(function*(){var w;vu(d)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,we.Z)(function*(D){const S=Ze(D);S.lu.add(4),yield mc(S),S._u.set("Unknown"),S.lu.delete(4),yield si(S)}),function(D){return w.apply(this,arguments)})(d))}))}),this._u=new Yv(r,o)}}function si(n){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,we.Z)(function*(n){if(vu(n))for(const e of n.fu)yield e(!0)}),Qv.apply(this,arguments)}function mc(n){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,we.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Jv.apply(this,arguments)}function Km(n,e){const t=Ze(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),qm(t)?ew(t):Bl(t).Co()&&Zm(t,e))}function Vl(n,e){const t=Ze(n),r=Bl(t);t.hu.delete(e),r.Co()&&Xv(t,e),0===t.hu.size&&(r.Co()?r.ko():vu(t)&&t._u.set("Unknown"))}function Zm(n,e){n.wu.Nt(e.targetId),Bl(n).Qo(e)}function Xv(n,e){n.wu.Nt(e),Bl(n).jo(e)}function ew(n){n.wu=new rC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Bl(n).start(),n._u.iu()}function qm(n){return vu(n)&&!Bl(n).Do()&&n.hu.size>0}function vu(n){return 0===Ze(n).lu.size}function QE(n){n.wu=void 0}function JE(n){return tw.apply(this,arguments)}function tw(){return tw=(0,we.Z)(function*(n){n.hu.forEach((e,t)=>{Zm(n,e)})}),tw.apply(this,arguments)}function nw(n,e){return va.apply(this,arguments)}function va(){return va=(0,we.Z)(function*(n,e){QE(n),qm(n)?(n._u.uu(e),ew(n)):n._u.set("Unknown")}),va.apply(this,arguments)}function XE(n,e,t){return fp.apply(this,arguments)}function fp(){return fp=(0,we.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof tE&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.hu.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.hu.delete(g),o.wu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zs(n,r)}else if(e instanceof Mm?n.wu.Ut(e):e instanceof eE?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Dt.min()))try{const r=yield kC(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.wu.Yt(u);return d.targetChanges.forEach((g,w)=>{if(g.resumeToken.approximateByteSize()>0){const D=o.hu.get(w);D&&o.hu.set(w,D.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const w=o.hu.get(g);if(!w)return;o.hu.set(g,w.withResumeToken(Er.EMPTY_BYTE_STRING,w.snapshotVersion)),Xv(o,g);const D=new Ks(w.target,g,1,w.sequenceNumber);Zm(o,D)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield Zs(n,r)}var r}),fp.apply(this,arguments)}function Zs(n,e,t){return rw.apply(this,arguments)}function rw(){return rw=(0,we.Z)(function*(n,e,t){if(!ic(e))throw e;n.lu.add(1),yield mc(n),n._u.set("Offline"),t||(t=()=>kC(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield si(n)}))}),rw.apply(this,arguments)}function BC(n,e){return e().catch(t=>Zs(n,t,e))}function Eh(n){return iw.apply(this,arguments)}function iw(){return iw=(0,we.Z)(function*(n){const e=Ze(n),t=yc(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;jC(e);)try{const o=yield sM(e.localStore,r);if(null===o){0===e.au.length&&t.ko();break}r=o.batchId,$C(e,o)}catch(o){yield Zs(e,o)}sw(e)&&zC(e)}),iw.apply(this,arguments)}function jC(n){return vu(n)&&n.au.length<10}function $C(n,e){n.au.push(e);const t=yc(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function sw(n){return vu(n)&&!yc(n).Do()&&n.au.length>0}function zC(n){yc(n).start()}function eb(n){return ow.apply(this,arguments)}function ow(){return ow=(0,we.Z)(function*(n){yc(n).Xo()}),ow.apply(this,arguments)}function tb(n){return nb.apply(this,arguments)}function nb(){return nb=(0,we.Z)(function*(n){const e=yc(n);for(const t of n.au)e.Ho(t.mutations)}),nb.apply(this,arguments)}function aw(n,e,t){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,we.Z)(function*(n,e,t){const r=n.au.shift(),o=Cv.from(r,e,t);yield BC(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Eh(n)}),Ym.apply(this,arguments)}function rb(n,e){return uw.apply(this,arguments)}function uw(){return uw=(0,we.Z)(function*(n,e){var t;e&&yc(n).zo&&(yield(t=(0,we.Z)(function*(r,o){if(Y0(u=o.code)&&u!==he.ABORTED){const d=r.au.shift();yc(r).No(),yield BC(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Eh(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),sw(n)&&zC(n)}),uw.apply(this,arguments)}function cw(n,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,we.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=vu(t);t.lu.add(3),yield mc(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield si(t)}),Qm.apply(this,arguments)}function bh(n,e){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,we.Z)(function*(n,e){const t=Ze(n);e?(t.lu.delete(2),yield si(t)):e||(t.lu.add(2),yield mc(t),t._u.set("Unknown"))}),Dh.apply(this,arguments)}function Bl(n){return n.mu||(n.mu=function(e,t,r){const o=Ze(e);return o.tu(),new uM(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:JE.bind(null,n),Jr:nw.bind(null,n),Go:XE.bind(null,n)}),n.fu.push(function(){var e=(0,we.Z)(function*(t){t?(n.mu.No(),qm(n)?ew(n):n._u.set("Unknown")):(yield n.mu.stop(),QE(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function yc(n){return n.gu||(n.gu=function(e,t,r){const o=Ze(e);return o.tu(),new Ao(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:eb.bind(null,n),Jr:rb.bind(null,n),Yo:tb.bind(null,n),Jo:aw.bind(null,n)}),n.fu.push(function(){var e=(0,we.Z)(function*(t){t?(n.gu.No(),yield Eh(n)):(yield n.gu.stop(),n.au.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Jm{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new Jm(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jl(n,e){if(Kn("AsyncQueue",`${e}: ${n}`),ic(n))return new ke(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Ch{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Kf(),this.sortedSet=new bn(this.comparator)}static emptySet(e){return new Ch(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ch)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ch;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ib{constructor(){this.yu=new bn(He.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class pp{constructor(e,t,r,o,u,d,g,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new pp(e,t,Ch.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class cM{constructor(){this.Iu=void 0,this.listeners=[]}}class sb{constructor(){this.queries=new fc(e=>ih(e),$f),this.onlineState="Unknown",this.Tu=new Set}}function lw(n,e){return dw.apply(this,arguments)}function dw(){return dw=(0,we.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new cM),o)try{u.Iu=yield t.onListen(r)}catch(d){const g=jl(d,`Initialization of query '${rv(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&ab(t)}),dw.apply(this,arguments)}function hw(n,e){return ob.apply(this,arguments)}function ob(){return ob=(0,we.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),ob.apply(this,arguments)}function lM(n,e){const t=Ze(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Au(o)&&(r=!0);d.Iu=o}}r&&ab(t)}function dM(n,e,t){const r=Ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function ab(n){n.Tu.forEach(e=>{e.next()})}class ub{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new pp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=pp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class HC{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class gp{constructor(e){this.wt=e}Wi(e){return ga(this.wt,e)}zi(e){return e.metadata.exists?yv(this.wt,e.document,!1):yn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Dr(e)}}class GC{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cb(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new gp(this.wt);for(const o of e)if(o.metadata.queries){const u=r.Wi(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||Vt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function $m(n,e,t,r){return zm.apply(this,arguments)}(e.localStore,new gp(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield KE(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function cb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fw{constructor(e){this.key=e}}class _c{constructor(e){this.key=e}}class pw{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Vt(),this.mutatedKeys=Vt(),this.Lu=zf(e),this.Uu=new Ch(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new ib,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,k)=>{const z=o.get(S),X=iv(this.query,k)?k:null,se=!!z&&this.mutatedKeys.has(z.key),xe=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let Ue=!1;z&&X?z.data.isEqual(X.data)?se!==xe&&(r.track({type:3,doc:X}),Ue=!0):this.Qu(z,X)||(r.track({type:2,doc:X}),Ue=!0,(w&&this.Lu(X,w)>0||D&&this.Lu(X,D)<0)&&(g=!0)):!z&&X?(r.track({type:0,doc:X}),Ue=!0):z&&!X&&(r.track({type:1,doc:z}),Ue=!0,(w||D)&&(g=!0)),Ue&&(X?(d=d.add(X),u=xe?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:d,Gu:r,Mi:g,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((D,S)=>function(k,z){const X=se=>{switch(se){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return X(k)-X(z)}(D.type,S.type)||this.Lu(D.doc,S.doc)),this.ju(r);const d=t?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,w=g!==this.$u;return this.$u=g,0!==u.length||w?{snapshot:new pp(this.query,e.Uu,o,u,e.mutatedKeys,0===g,w,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new ib,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Vt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new _c(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new fw(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Vt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return pp.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class gw{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mw{constructor(e){this.key=e,this.Xu=!1}}class WC{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Zu={},this.tc=new fc(g=>ih(g),$f),this.ec=new Map,this.nc=new Set,this.sc=new bn(He.comparator),this.ic=new Map,this.rc=new UE,this.oc={},this.uc=new Map,this.cc=gc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function yw(n,e){return mp.apply(this,arguments)}function mp(){return mp=(0,we.Z)(function*(n,e){const t=_(n);let r,o;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const d=yield up(t.localStore,Gi(e));t.isPrimaryClient&&Km(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Th(t,e,r,"current"===g)}return o}),mp.apply(this,arguments)}function Th(n,e,t,r){return lb.apply(this,arguments)}function lb(){return lb=(0,we.Z)(function*(n,e,t,r){n.hc=(S,k,z)=>{return(X=(0,we.Z)(function*(se,xe,Ue,Et){let Ct=xe.view.Ku(Ue);Ct.Mi&&(Ct=yield jv(se.localStore,xe.query,!1).then(({documents:Lt})=>xe.view.Ku(Lt,Ct)));const Bt=Et&&Et.targetChanges.get(xe.targetId),At=xe.view.applyChanges(Ct,se.isPrimaryClient,Bt);return ww(se,xe.targetId,At.zu),At.snapshot}),function(se,xe,Ue,Et){return X.apply(this,arguments)})(n,S,k,z);var X};const o=yield jv(n.localStore,e,!0),u=new pw(e,o.ji),d=u.Ku(o.documents),g=Yf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,g);ww(n,t,w.zu);const D=new gw(e,t,u);return n.tc.set(e,D),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),w.snapshot}),lb.apply(this,arguments)}function hM(n,e){return db.apply(this,arguments)}function db(){return db=(0,we.Z)(function*(n,e){const t=Ze(n),r=t.tc.get(e),o=t.ec.get(r.targetId);if(o.length>1)return t.ec.set(r.targetId,o.filter(u=>!$f(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Vl(t.remoteStore,r.targetId),vc(t,r.targetId)}).catch(rc))):(vc(t,r.targetId),yield cp(t.localStore,r.targetId,!0))}),db.apply(this,arguments)}function Xm(){return Xm=(0,we.Z)(function*(n,e,t){const r=I(n);try{const o=yield function(u,d){const g=Ze(u),w=Mn.now(),D=d.reduce((z,X)=>z.add(X.key),Vt());let S,k;return g.persistence.runTransaction("Locally write mutations","readwrite",z=>{let X=Wi(),se=Vt();return g.Ui.getEntries(z,D).next(xe=>{X=xe,X.forEach((Ue,Et)=>{Et.isValidDocument()||(se=se.add(Ue))})}).next(()=>g.localDocuments.getOverlayedDocuments(z,X)).next(xe=>{S=xe;const Ue=[];for(const Et of d){const Ct=Wf(Et,S.get(Et.key).overlayedDocument);null!=Ct&&Ue.push(new mu(Et.key,Ct,ev(Ct.value.mapValue),nr.exists(!0)))}return g.mutationQueue.addMutationBatch(z,w,Ue,d)}).next(xe=>{k=xe;const Ue=xe.applyToLocalDocumentSet(S,se);return g.documentOverlayCache.saveOverlays(z,xe.batchId,Ue)})}).then(()=>({batchId:k.batchId,changes:dv(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let w=u.oc[u.currentUser.toKey()];w||(w=new bn(St)),w=w.insert(d,g),u.oc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield wu(r,o.changes),yield Eh(r.remoteStore)}catch(o){const u=jl(o,"Failed to persist write");t.reject(u)}}),Xm.apply(this,arguments)}function hb(n,e){return _w.apply(this,arguments)}function _w(){return _w=(0,we.Z)(function*(n,e){const t=Ze(n);try{const r=yield iM(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ic.get(u);d&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Xu=!0:o.modifiedDocuments.size>0?bt(d.Xu):o.removedDocuments.size>0&&(bt(d.Xu),d.Xu=!1))}),yield wu(t,r,e)}catch(r){yield rc(r)}}),_w.apply(this,arguments)}function fb(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.tc.forEach((u,d)=>{const g=d.view.Eu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=Ze(u);g.onlineState=d;let w=!1;g.queries.forEach((D,S)=>{for(const k of S.listeners)k.Eu(d)&&(w=!0)}),w&&ab(g)}(r.eventManager,e),o.length&&r.Zu.Go(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function KC(n,e,t){return ey.apply(this,arguments)}function ey(){return ey=(0,we.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ic.get(e),u=o&&o.key;if(u){let d=new bn(He.comparator);d=d.insert(u,yn.newNoDocument(u,Dt.min()));const g=Vt().add(u),w=new qf(Dt.min(),new Map,new dn(St),d,g);yield hb(r,w),r.sc=r.sc.remove(u),r.ic.delete(e),_b(r)}else yield cp(r.localStore,e,!1).then(()=>vc(r,e,t)).catch(rc)}),ey.apply(this,arguments)}function pb(n,e){return ty.apply(this,arguments)}function ty(){return ty=(0,we.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const o=yield GE(t.localStore,e);ny(t,r,null),mb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wu(t,o)}catch(o){yield rc(o)}}),ty.apply(this,arguments)}function ZC(n,e,t){return vw.apply(this,arguments)}function vw(){return vw=(0,we.Z)(function*(n,e,t){const r=Ze(n);try{const o=yield function(u,d){const g=Ze(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return g.mutationQueue.lookupMutationBatch(w,d).next(S=>(bt(null!==S),D=S.keys(),g.mutationQueue.removeMutationBatch(w,S))).next(()=>g.mutationQueue.performConsistencyCheck(w)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(w,D,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>g.localDocuments.getDocuments(w,D))})}(r.localStore,e);ny(r,e,t),mb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wu(r,o)}catch(o){yield rc(o)}}),vw.apply(this,arguments)}function yp(){return yp=(0,we.Z)(function*(n,e){const t=Ze(n);vu(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.uc.get(r)||[];o.push(e),t.uc.set(r,o)}catch(r){const o=jl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),yp.apply(this,arguments)}function mb(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function ny(n,e,t){const r=Ze(n);let o=r.oc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oc[r.currentUser.toKey()]=o}}function vc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||yb(n,r)})}function yb(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Vl(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),_b(n))}function ww(n,e,t){for(const r of t)r instanceof fw?(n.rc.addReference(r.key,e),pM(n,r)):r instanceof _c?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||yb(n,r.key)):it()}function pM(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.nc.add(r),_b(n))}function _b(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new He(Xt.fromString(e)),r=n.cc.next();n.ic.set(r,new mw(t)),n.sc=n.sc.insert(t,r),Km(n.remoteStore,new Ks(Gi(Ml(t.path)),r,2,Hi.ot))}}function wu(n,e,t){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,we.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[],d=[];var g;r.tc.isEmpty()||(r.tc.forEach((g,w)=>{d.push(r.hc(w,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,D.fromCache?"not-current":"current"),o.push(D);const S=jm.Vi(w.targetId,D);u.push(S)}}))}),yield Promise.all(d),r.Zu.Go(o),yield(g=(0,we.Z)(function*(w,D){const S=Ze(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>le.forEach(D,z=>le.forEach(z.Pi,X=>S.persistence.referenceDelegate.addReference(k,z.targetId,X)).next(()=>le.forEach(z.vi,X=>S.persistence.referenceDelegate.removeReference(k,z.targetId,X)))))}catch(k){if(!ic(k))throw k;Ne("LocalStore","Failed to update sequence numbers: "+k)}for(const k of D){const z=k.targetId;if(!k.fromCache){const X=S.$i.get(z),xe=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);S.$i=S.$i.insert(z,xe)}}}),function(w,D){return g.apply(this,arguments)})(r.localStore,u))}),Iw.apply(this,arguments)}function qC(n,e){return vb.apply(this,arguments)}function vb(){return vb=(0,we.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield zE(t.localStore,e);t.currentUser=e,(o=t).uc.forEach(d=>{d.forEach(g=>{g.reject(new ke(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wu(t,r.Ki)}var o}),vb.apply(this,arguments)}function gM(n,e){const t=Ze(n),r=t.ic.get(e);if(r&&r.Xu)return Vt().add(r.key);{let o=Vt();const u=t.ec.get(e);if(!u)return o;for(const d of u){const g=t.tc.get(d);o=o.unionWith(g.view.qu)}return o}}function mM(n,e){return wb.apply(this,arguments)}function wb(){return wb=(0,we.Z)(function*(n,e){const t=Ze(n),r=yield jv(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&ww(t,e.targetId,o.zu),o}),wb.apply(this,arguments)}function yM(n,e){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,we.Z)(function*(n,e){const t=Ze(n);return NC(t.localStore,e).then(r=>wu(t,r))}),Ew.apply(this,arguments)}function _M(n,e,t,r){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,we.Z)(function*(n,e,t,r){const o=Ze(n),u=yield function(d,g){const w=Ze(d),D=Ze(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>D.yn(S,g).next(k=>k?w.localDocuments.getDocuments(S,k):le.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Eh(o.remoteStore):"acknowledged"===t||"rejected"===t?(ny(o,e,r||null),mb(o,e),g=e,Ze(Ze(o.localStore).mutationQueue).In(g)):it(),yield wu(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ib.apply(this,arguments)}function Eb(){return Eb=(0,we.Z)(function*(n,e){const t=Ze(n);if(_(t),I(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield YC(t,r.toArray());t.ac=!0,yield bh(t.remoteStore,!0);for(const u of o)Km(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let o=Promise.resolve();t.ec.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(vc(t,d),cp(t.localStore,d,!0))),Vl(t.remoteStore,d)}),yield o,yield YC(t,r),function(u){const d=Ze(u);d.ic.forEach((g,w)=>{Vl(d.remoteStore,w)}),d.rc.cs(),d.ic=new Map,d.sc=new bn(He.comparator)}(t),t.ac=!1,yield bh(t.remoteStore,!1)}}),Eb.apply(this,arguments)}function YC(n,e,t){return bb.apply(this,arguments)}function bb(){return bb=(0,we.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[];for(const d of e){let g;const w=r.ec.get(d);if(w&&0!==w.length){g=yield up(r.localStore,Gi(w[0]));for(const D of w){const S=r.tc.get(D),k=yield mM(r,S);k.snapshot&&u.push(k.snapshot)}}else{const D=yield lp(r.localStore,d);g=yield up(r.localStore,D),yield Th(r,i(D),d,!1)}o.push(g)}return r.Zu.Go(u),o}),bb.apply(this,arguments)}function i(n){return nv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function s(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Ri()}function a(n,e,t,r){return c.apply(this,arguments)}function c(){return c=(0,we.Z)(function*(n,e,t,r){const o=Ze(n);if(o.ac)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield NC(o.localStore,V0(u[0])),g=qf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield wu(o,d,g);break}case"rejected":yield cp(o.localStore,e,!0),vc(o,e,r);break;default:it()}}),c.apply(this,arguments)}function l(n,e,t){return f.apply(this,arguments)}function f(){return f=(0,we.Z)(function*(n,e,t){const r=_(n);if(r.ac){for(const o of e){if(r.ec.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield lp(r.localStore,o),d=yield up(r.localStore,u);yield Th(r,i(u),d.targetId,!1),Km(r.remoteStore,d)}for(const o of t)r.ec.has(o)&&(yield cp(r.localStore,o,!1).then(()=>{Vl(r.remoteStore,o),vc(r,o)}).catch(rc))}}),f.apply(this,arguments)}function _(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KC.bind(null,e),e.Zu.Go=lM.bind(null,e.eventManager),e.Zu.lc=dM.bind(null,e.eventManager),e}function I(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZC.bind(null,e),e}class T{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.wt=hp(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return $E(this.persistence,new Bv,e.initialUser,this.wt)}_c(e){return new Lv(Um.Os,this.wt)}dc(e){return new qE}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class R extends T{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield I(r.yc.syncEngine),yield Eh(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return $E(this.persistence,new Bv,e.initialUser,this.wt)}mc(e,t){return new MC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new KD(t,this.persistence);return new b0(e.asyncQueue,r)}_c(e){const t=Bm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Si.withCacheSize(this.cacheSizeBytes):Si.DEFAULT;return new Vv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,YE(),Zv(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new qE}}class L extends R{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const o=r.yc.syncEngine;r.sharedClientState instanceof Ih&&(r.sharedClientState.syncEngine={kr:_M.bind(null,o),Mr:a.bind(null,o),Or:l.bind(null,o),Ri:s.bind(null,o),Nr:yM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,we.Z)(function*(d){yield function vM(n,e){return Eb.apply(this,arguments)}(r.yc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}dc(e){const t=YE();if(!Ih.V(t))throw new ke(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Bm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ih(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class G{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>fb(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=qC.bind(null,r.syncEngine),yield bh(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new sb}createDatastore(e){const t=hp(e.databaseInfo.databaseId),r=new FC(e.databaseInfo);return new UC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>fb(this.syncEngine,g,0),d=PC.V()?new PC:new oM,new VC(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,w,D){const S=new WC(r,o,u,d,g,w);return D&&(S.ac=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=Ze(t);Ne("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield mc(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function te(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ee{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Pe{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new $r,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,we.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),o=Number(r);isNaN(o)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(o);return new HC(JSON.parse(u),t.length+o)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,we.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ke{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,we.Z)(function*(u,d){const g=Ze(u),w=Xf(g.wt)+"/documents",D={documents:d.map(X=>Rl(g.wt,X))},S=yield g.ao("BatchGetDocuments",w,D,d.length),k=new Map;S.forEach(X=>{const se=function aC(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=ga(t,r.found.name),u=Dr(r.found.updateTime),d=new Gr({mapValue:{fields:r.found.fields}});return yn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=ga(t,r.missing),u=Dr(r.readTime);return yn.newNoDocument(o,u)}(n,e):it()}(g.wt,X);k.set(se.key.toString(),se)});const z=[];return d.forEach(X=>{const se=k.get(X.toString());bt(!!se),z.push(se)}),z}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=He.fromPath(o);e.mutations.push(new cv(u,e.precondition(u)))}),yield(r=(0,we.Z)(function*(o,u){const d=Ze(o),g=Xf(d.wt)+"/documents",w={writes:u.map(D=>lh(d.wt,D))};yield d.ro("Commit",g,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?nr.updateTime(t):nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new ke(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nr.updateTime(t)}return nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class et{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Dc=r.maxAttempts,this.So=new Wm(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,we.Z)(function*(){const t=new Ke(e.datastore),r=e.xc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Nc(u)}))}).catch(o=>{e.Nc(o)})}))}xc(e){try{const t=this.updateFunction(e);return!eh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Y0(t)}return!1}}class It{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ir.UNAUTHENTICATED,this.clientId=$_.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,we.Z)(function*(g){Ne("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ne("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=jl(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Re(n,e){return pt.apply(this,arguments)}function pt(){return pt=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,we.Z)(function*(u){r.isEqual(u)||(yield zE(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),pt.apply(this,arguments)}function Gt(n,e){return _n.apply(this,arguments)}function _n(){return _n=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Iu(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>cw(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>cw(e.remoteStore,u)),n.onlineComponents=e}),_n.apply(this,arguments)}function Iu(n){return _p.apply(this,arguments)}function _p(){return _p=(0,we.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield Re(n,new T)),n.offlineComponents}),_p.apply(this,arguments)}function Mh(n){return vp.apply(this,arguments)}function vp(){return vp=(0,we.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield Gt(n,new G)),n.onlineComponents}),vp.apply(this,arguments)}function ry(n){return Iu(n).then(e=>e.persistence)}function Ah(n){return Iu(n).then(e=>e.localStore)}function iy(n){return Mh(n).then(e=>e.remoteStore)}function wp(n){return Mh(n).then(e=>e.syncEngine)}function wc(n){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,we.Z)(function*(n){const e=yield Mh(n),t=e.eventManager;return t.onListen=yw.bind(null,e.syncEngine),t.onUnlisten=hM.bind(null,e.syncEngine),t}),Ip.apply(this,arguments)}function wM(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,d,g,w){const D=new Ee({next:k=>{u.enqueueAndForget(()=>hw(o,S));const z=k.docs.has(d);!z&&k.fromCache?w.reject(new ke(he.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&k.fromCache&&g&&"server"===g.source?w.reject(new ke(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(k)},error:k=>w.reject(k)}),S=new ub(Ml(d.path),D,{includeMetadataChanges:!0,Du:!0});return lw(o,S)}(yield wc(n),n.asyncQueue,e,t,r)})),r.promise}function IM(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,d,g,w){const D=new Ee({next:k=>{u.enqueueAndForget(()=>hw(o,S)),k.fromCache&&"server"===g.source?w.reject(new ke(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(k)},error:k=>w.reject(k)}),S=new ub(d,D,{includeMetadataChanges:!0,Du:!0});return lw(o,S)}(yield wc(n),n.asyncQueue,e,t,r)})),r.promise}const EM=new Map;function QC(n,e,t){if(!t)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bM(n,e,t,r){if(!0===e&&!0===r)throw new ke(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DM(n){if(!He.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CM(n){if(He.isDocumentKey(n))throw new ke(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Db(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Db(n);throw new ke(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function TM(n,e){if(e<=0)throw new ke(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class MM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,bM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MM({}),this._settingsFrozen=!1,e instanceof fa?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new ke(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(o.options.projectId)}(e))}get app(){if(!this._app)throw new ke(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new p0;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new y0(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=EM.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),EM.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class Ic extends Zi{constructor(e,t,r){super(e,t,Ml(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new He(e))}withConverter(e){return new Ic(this.firestore,e,this._path)}}function AM(n,e,...t){if(n=(0,zt.m9)(n),QC("collection","path",e),n instanceof bw){const r=Xt.fromString(e,...t);return CM(r),new Ic(n,null,r)}{if(!(n instanceof qn||n instanceof Ic))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return CM(r),new Ic(n.firestore,null,r)}}function Cb(n,e,...t){if(n=(0,zt.m9)(n),1===arguments.length&&(e=$_.I()),QC("doc","path",e),n instanceof bw){const r=Xt.fromString(e,...t);return DM(r),new qn(n,null,new He(r))}{if(!(n instanceof qn||n instanceof Ic))throw new ke(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return DM(r),new qn(n.firestore,n instanceof Ic?n.converter:null,new He(r))}}function SM(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),(n instanceof qn||n instanceof Ic)&&(e instanceof qn||e instanceof Ic)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function xM(n,e){return n=(0,zt.m9)(n),e=(0,zt.m9)(e),n instanceof Zi&&e instanceof Zi&&n.firestore===e.firestore&&$f(n._query,e._query)&&n.converter===e.converter}class bS{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Wm(this,"async_queue_retry"),this.Kc=()=>{const t=Zv();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Zv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Zv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new $r;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!ic(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Kn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const o=Jm.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(o),o}Gc(){this.Bc&&it()}verifyOperationInProgress(){}zc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function JC(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class DS{constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends bw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new bS,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||RM(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||RM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function RM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new T0(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new It(n._authCredentials,n._appCheckCredentials,n._queue,r)}function kM(n,e,t){const r=new $r;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Re(n,t),yield Gt(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===he.FAILED_PRECONDITION||d.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;pu("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function OM(n){if(n._initialized||n._terminated)throw new ke(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $l{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ec(Er.fromBase64String(e))}catch(t){throw new ke(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ec(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ep{constructor(e){this._methodName=e}}class Tb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const NS=/^__.*__$/;class PS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new mu(e,this.data,this.fieldMask,t,this.fieldTransforms):new ah(e,this.data,t,this.fieldTransforms)}}class NM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Mb{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Mb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.sa(e),o}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.Xc(),o}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return xb(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(PM(this.Zc)&&NS.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class LS{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||hp(e)}aa(e,t,r,o=!1){return new Mb({Zc:e,methodName:t,ca:r,path:tr.emptyPath(),na:!1,ua:o},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function bp(n){const e=n._freezeSettings(),t=hp(n._databaseId);return new LS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ab(n,e,t,r,o,u={}){const d=n.aa(u.merge||u.mergeFields?2:0,e,t,o);nT("Data must be an object, but it was:",d,r);const g=UM(r,d);let w,D;if(u.merge)w=new yi(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const k of u.mergeFields){const z=rT(e,k,t);if(!d.contains(z))throw new ke(he.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);BM(S,z)||S.push(z)}w=new yi(S),D=d.fieldTransforms.filter(k=>w.covers(k.field))}else w=null,D=d.fieldTransforms;return new PS(new Gr(g),w,D)}class Dw extends Ep{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dw}}function LM(n,e,t){return new Mb({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class XC extends Ep{_toFieldTransform(e){return new Dm(e.path,new sh)}isEqual(e){return e instanceof XC}}class FS extends Ep{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=LM(this,e,!0),r=this.ha.map(u=>Dp(u,t)),o=new dc(r);return new Dm(e.path,o)}isEqual(e){return this===e}}class US extends Ep{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=LM(this,e,!0),r=this.ha.map(u=>Dp(u,t)),o=new hc(r);return new Dm(e.path,o)}isEqual(e){return this===e}}class VS extends Ep{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Sl(e.wt,j0(e.wt,this.la));return new Dm(e.path,t)}isEqual(e){return this===e}}function eT(n,e,t,r){const o=n.aa(1,e,t);nT("Data must be an object, but it was:",o,r);const u=[],d=Gr.empty();El(r,(w,D)=>{const S=Sb(e,w,t);D=(0,zt.m9)(D);const k=o.ia(S);if(D instanceof Dw)u.push(S);else{const z=Dp(D,k);null!=z&&(u.push(S),d.set(S,z))}});const g=new yi(u);return new NM(d,g,o.fieldTransforms)}function tT(n,e,t,r,o,u){const d=n.aa(1,e,t),g=[rT(e,r,t)],w=[o];if(u.length%2!=0)throw new ke(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)g.push(rT(e,u[z])),w.push(u[z+1]);const D=[],S=Gr.empty();for(let z=g.length-1;z>=0;--z)if(!BM(D,g[z])){const X=g[z];let se=w[z];se=(0,zt.m9)(se);const xe=d.ia(X);if(se instanceof Dw)D.push(X);else{const Ue=Dp(se,xe);null!=Ue&&(D.push(X),S.set(X,Ue))}}const k=new yi(D);return new NM(S,k,d.fieldTransforms)}function FM(n,e,t,r=!1){return Dp(t,n.aa(r?4:3,e))}function Dp(n,e){if(VM(n=(0,zt.m9)(n)))return nT("Unsupported field value:",e,n),UM(n,e);if(n instanceof Ep)return function(t,r){if(!PM(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=Dp(d,r.ra(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return j0(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Mn.fromDate(t);return{timestampValue:Qf(r.wt,o)}}if(t instanceof Mn){const o=new Mn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qf(r.wt,o)}}if(t instanceof Tb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ec)return{bytesValue:iE(r.wt,t._byteString)};if(t instanceof qn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jf(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${Db(t)}`)}(n,e)}function UM(n,e){const t={};return hm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):El(n,(r,o)=>{const u=Dp(o,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function VM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mn||n instanceof Tb||n instanceof Ec||n instanceof qn||n instanceof Ep)}function nT(n,e,t){if(!VM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Db(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function rT(n,e,t){if((e=(0,zt.m9)(e))instanceof $l)return e._internalPath;if("string"==typeof e)return Sb(n,e);throw xb("Field path arguments must be of type string or ",n,!1,void 0,t)}const BS=new RegExp("[~\\*/\\[\\]]");function Sb(n,e,t){if(e.search(BS)>=0)throw xb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $l(...e.split("."))._internalPath}catch{throw xb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xb(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new ke(he.INVALID_ARGUMENT,g+n+w)}function BM(n,e){return n.some(t=>t.isEqual(e))}class Cw{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jS extends Cw{data(){return super.data()}}function Rb(n,e){return"string"==typeof e?Sb(n,e):e instanceof $l?e._internalPath:e._delegate._internalPath}class Cp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zl extends Cw{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Tw extends zl{data(e={}){return super.data(e)}}class Sh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Cp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Tw(this._firestore,this._userDataWriter,r.key,r,new Cp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Tw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Cp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new Tw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Cp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),D=u.indexOf(d.doc.key)),{type:$S(d.type),doc:g,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $S(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function jM(n,e){return n instanceof zl&&e instanceof zl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sh&&e instanceof Sh&&n._firestore===e._firestore&&xM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function $M(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mw{}function xh(n,...e){for(const t of e)n=t._apply(n);return n}class zS extends Mw{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=bp(e.firestore),r=function(o,u,d,g,w,D,S){let k;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){ZM(S,D);const X=[];for(const se of S)X.push(KM(g,o,se));k={arrayValue:{values:X}}}else k=KM(g,o,S)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||ZM(S,D),k=FM(d,"where",S,"in"===D||"not-in"===D);const z=Rr.create(w,D,k);return function(X,se){if(se.ht()){const Ue=Im(X);if(null!==Ue&&!Ue.isEqual(se.field))throw new ke(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${se.field.toString()}'`);const Et=wm(X);null!==Et&&qM(0,se.field,Et)}const xe=function(Ue,Et){for(const Ct of Ue.filters)if(Et.indexOf(Ct.op)>=0)return Ct.op;return null}(X,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(se.op));if(null!==xe)throw new ke(he.INVALID_ARGUMENT,xe===se.op?`Invalid query. You cannot use more than one '${se.op.toString()}' filter.`:`Invalid query. You cannot use '${se.op.toString()}' filters with '${xe.toString()}' filters.`)}(o,z),z}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Zi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new cc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class GS extends Mw{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new rh(o,u);return function(g,w){if(null===wm(g)){const D=Im(g);null!==D&&qM(0,D,w.field)}}(r,d),d}(e._query,this.fa,this.wa);return new Zi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new cc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class zM extends Mw{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Zi(e.firestore,e.converter,bm(e._query,this.ma,this.ga))}}class HM extends Mw{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=WM(e,this.type,this.ya,this.pa);return new Zi(e.firestore,e.converter,(o=t,new cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class GM extends Mw{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=WM(e,this.type,this.ya,this.pa);return new Zi(e.firestore,e.converter,(o=t,new cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function WM(n,e,t,r){if(t[0]=(0,zt.m9)(t[0]),t[0]instanceof Cw)return function(o,u,d,g,w){if(!g)throw new ke(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const D=[];for(const S of Al(o))if(S.field.isKeyField())D.push(Cl(u,g.key));else{const k=g.data.field(S.field);if(pm(k))throw new ke(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const z=S.field.canonicalString();throw new ke(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}D.push(k)}return new vs(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=bp(n.firestore);return function(u,d,g,w,D,S){const k=u.explicitOrderBy;if(D.length>k.length)throw new ke(he.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let X=0;X<D.length;X++){const se=D[X];if(k[X].field.isKeyField()){if("string"!=typeof se)throw new ke(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof se}`);if(!Em(u)&&-1!==se.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${se}' contains a slash.`);const xe=u.path.child(Xt.fromString(se));if(!He.isDocumentKey(xe))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Ue=new He(xe);z.push(Cl(d,Ue))}else{const xe=FM(g,w,se);z.push(xe)}}return new vs(z,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function KM(n,e,t){if("string"==typeof(t=(0,zt.m9)(t))){if(""===t)throw new ke(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Em(e)&&-1!==t.indexOf("/"))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!He.isDocumentKey(r))throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cl(n,new He(r))}if(t instanceof qn)return Cl(n,t._key);throw new ke(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Db(t)}.`)}function ZM(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function qM(n,e,t){if(!t.isEqual(e))throw new ke(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const XS={maxAttempts:5};class iT{convertValue(e,t="none"){switch(Dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return El(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Tb(An(e.latitude),An(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=q_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xd(e));default:return null}}convertTimestamp(e){const t=gu(e);return new Mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);bt(wv(r));const o=new fa(r.get(1),r.get(3)),u=new He(r.popFirst(5));return o.isEqual(t)||Kn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function kb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ex extends iT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class YM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bp(e)}set(e,t,r){this._verifyNotCommitted();const o=Rh(e,this._firestore),u=kb(o.converter,t,r),d=Ab(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,nr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Rh(e,this._firestore);let d;return d="string"==typeof(t=(0,zt.m9)(t))||t instanceof $l?tT(this._dataReader,"WriteBatch.update",u._key,t,r,o):eT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rh(e,this._firestore);return this._mutations=this._mutations.concat(new uh(t._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rh(n,e){if((n=(0,zt.m9)(n)).firestore!==e)throw new ke(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Tp extends iT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function QM(n,e,t){n=en(n,qn);const r=en(n.firestore,rr),o=kb(n.converter,e,t);return sy(r,[Ab(bp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,nr.none())])}function JM(n,e,t,...r){n=en(n,qn);const o=en(n.firestore,rr),u=bp(o);let d;return d="string"==typeof(e=(0,zt.m9)(e))||e instanceof $l?tT(u,"updateDoc",n._key,e,t,r):eT(u,"updateDoc",n._key,e),sy(o,[d.toMutation(n._key,nr.exists(!0))])}function XM(n,...e){var t,r,o;n=(0,zt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||JC(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(JC(e[d])){const k=e[d];e[d]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[d+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[d+2]=null===(o=k.complete)||void 0===o?void 0:o.bind(k)}let w,D,S;if(n instanceof qn)D=en(n.firestore,rr),S=Ml(n._key.path),w={next:k=>{e[d]&&e[d](sT(D,n,k))},error:e[d+1],complete:e[d+2]};else{const k=en(n,Zi);D=en(k.firestore,rr),S=k._query;const z=new Tp(D);w={next:X=>{e[d]&&e[d](new Sh(D,z,k,X))},error:e[d+1],complete:e[d+2]},$M(n._query)}return function(k,z,X,se){const xe=new Ee(se),Ue=new ub(z,xe,X);return k.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return lw(yield wc(k),Ue)})),()=>{xe.Tc(),k.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return hw(yield wc(k),Ue)}))}}(qr(D),S,g,w)}function sy(n,e){return function(t,r){const o=new $r;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function fM(n,e,t){return Xm.apply(this,arguments)}(yield wp(t),r,o)})),o.promise}(qr(n),e)}function sT(n,e,t){const r=t.docs.get(e._key),o=new Tp(n);return new zl(n,o,e._key,r,new Cp(t.hasPendingWrites,t.fromCache),e.converter)}class lx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bp(e)}get(e){const t=Rh(e,this._firestore),r=new ex(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return it();const u=o[0];if(u.isFoundDocument())return new Cw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Cw(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const o=Rh(e,this._firestore),u=kb(o.converter,t,r),d=Ab(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Rh(e,this._firestore);let d;return d="string"==typeof(t=(0,zt.m9)(t))||t instanceof $l?tT(this._dataReader,"Transaction.update",u._key,t,r,o):eT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Rh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rh(e,this._firestore),r=new Tp(this._firestore);return super.get(e).then(o=>new zl(this._firestore,r,t._key,o._document,new Cp(!1,!1),t.converter))}}function oT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function tA(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function nA(){if(!function ZD(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Yd=ti.SDK_VERSION,(0,ti._registerComponent)(new Eg.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new rr(o,new m0(t.getProvider("auth-internal")),new _0(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ti.registerVersion)(om,"3.4.14",n),(0,ti.registerVersion)(om,"3.4.14","esm2017")}();class Aw{constructor(e){this._delegate=e}static fromBase64String(e){return nA(),new Aw(Ec.fromBase64String(e))}static fromUint8Array(e){return tA(),new Aw(Ec.fromUint8Array(e))}toBase64(){return nA(),this._delegate.toBase64()}toUint8Array(){return tA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function aT(n){return function vx(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class wx{enableIndexedDbPersistence(e,t){return function TS(n,e){OM(n=en(n,rr));const t=qr(n),r=n._freezeSettings(),o=new G;return kM(t,o,new R(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function MS(n){OM(n=en(n,rr));const e=qr(n),t=n._freezeSettings(),r=new G;return kM(e,r,new L(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function AS(n){if(n._initialized&&!n._terminated)throw new ke(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!_s.V())return Promise.resolve();const o=r+"main";yield _s.delete(o)}),function(r){return t.apply(this,arguments)})(Bm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class rA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function IS(n,e,t,r={}){var o;const u=(n=en(n,bw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&pu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=Ir.MOCK_USER;else{d=(0,zt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ke(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ir(w)}n._authCredentials=new g0(new B_(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function xS(n){return function fS(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield ry(n),t=yield iy(n);return e.setNetworkEnabled(!0),function(r){const o=Ze(r);return o.lu.delete(0),si(o)}(t)}))}(qr(n=en(n,rr)))}(this._delegate)}disableNetwork(){return function RS(n){return function pS(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield ry(n),t=yield iy(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(o){const u=Ze(o);u.lu.add(0),yield mc(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(qr(n=en(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function SS(n){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function gb(n,e){return yp.apply(this,arguments)}(yield wp(e),t)})),t.promise}(qr(n=en(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function cx(n,e){return function yS(n,e){const t=new Ee(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield wc(n),o=t,Ze(r).Tu.add(o),void o.next();var r,o})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield wc(n),o=t,void Ze(r).Tu.delete(o);var r,o}))}}(qr(n=en(n,rr)),JC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oy(this,AM(this._delegate,e))}catch(t){throw ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,Cb(this._delegate,e))}catch(t){throw ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Is(this,function ES(n,e){if(n=en(n,bw),QC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zi(n,null,(t=e,new cc(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function dx(n,e,t){n=en(n,rr);const r=Object.assign(Object.assign({},XS),t);return function(o){if(o.maxAttempts<1)throw new ke(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function _S(n,e,t){const r=new $r;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const o=yield(u=n,Mh(u).then(d=>d.datastore));var u;new et(n.asyncQueue,o,t,e,r).run()})),r.promise}(qr(n),o=>e(new lx(n,o)),r)}(this._delegate,t=>e(new iA(this,t)))}batch(){return qr(this._delegate),new sA(new YM(this._delegate,e=>sy(this._delegate,e)))}loadBundle(e){return function kS(n,e){const t=qr(n=en(n,rr)),r=new DS;return function vS(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return te(w,D);if(w instanceof ArrayBuffer)return te(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Pe(w,d);var w}(t,hp(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function E(n,e,t){const r=Ze(n);var o;(o=(0,we.Z)(function*(u,d,g){try{const w=yield d.getMetadata();if(yield function(z,X){const se=Ze(z),xe=Dr(X.createTime);return se.persistence.runTransaction("hasNewerBundle","readonly",Ue=>se.Ds.getBundleMetadata(Ue,X.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(xe)>=0)}(u.localStore,w))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(z=w).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);g._updateProgress(cb(w));const D=new GC(w,u.localStore,d.wt);let S=yield d.fc();for(;S;){const z=yield D.Nu(S);z&&g._updateProgress(z),S=yield d.fc()}const k=yield D.complete();return yield wu(u,k.Ou,void 0),yield function(z,X){const se=Ze(z);return se.persistence.runTransaction("Save bundle","readwrite",xe=>se.Ds.saveBundleMetadata(xe,X))}(u.localStore,w),g._completeWith(k.progress),Promise.resolve(k.Mu)}catch(w){return pu("SyncEngine",`Loading bundle failed with ${w}`),g._failWith(w),Promise.resolve(new Set)}var z}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield wp(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function OS(n,e){return function wS(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const o=Ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ds.getNamedQuery(u,r))}(yield Ah(n),e)}))}(qr(n=en(n,rr)),e).then(t=>t?new Zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Is(this,t):null)}}class Ob extends iT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aw(new Ec(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class iA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ob(e)}get(e){const t=Ap(e);return this._delegate.get(t).then(r=>new Sw(this._firestore,new zl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Ap(e);return r?(oT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Ap(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}}class sA{constructor(e){this._delegate=e}set(e,t,r){const o=Ap(e);return r?(oT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Ap(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Tw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Mp(e,new Ob(e),t),o.set(t,u)),u}}Mp.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ob(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new qn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new wa(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oy(this.firestore,AM(this._delegate,e))}catch(t){throw ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,zt.m9)(e))instanceof qn&&SM(this._delegate,e)}set(e,t){t=oT("DocumentReference.set",t);try{return t?QM(this._delegate,e,t):QM(this._delegate,e)}catch(r){throw ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?JM(this._delegate,e):JM(this._delegate,e,t,...r)}catch(o){throw ws(o,"updateDoc()","DocumentReference.update()")}}delete(){return function ax(n){return sy(en(n.firestore,rr),[new uh(n._key,nr.none())])}(this._delegate)}onSnapshot(...e){const t=oA(e),r=aA(e,o=>new Sw(this.firestore,new zl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return XM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function nx(n){n=en(n,qn);const e=en(n.firestore,rr),t=qr(e),r=new Tp(e);return function gS(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,d){try{const g=yield function(w,D){const S=Ze(w);return S.persistence.runTransaction("read document","readonly",k=>S.localDocuments.getDocument(k,D))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new ke(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const w=jl(g,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield Ah(n),e,t);var r})),t.promise}(t,n._key).then(o=>new zl(e,r,n._key,o,new Cp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function rx(n){n=en(n,qn);const e=en(n.firestore,rr);return wM(qr(e),n._key,{source:"server"}).then(t=>sT(e,n,t))}(this._delegate):function tx(n){n=en(n,qn);const e=en(n.firestore,rr);return wM(qr(e),n._key).then(t=>sT(e,n,t))}(this._delegate),t.then(r=>new Sw(this.firestore,new zl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function ws(n,e,t){return n.message=n.message.replace(e,t),n}function oA(n){for(const e of n)if("object"==typeof e&&!aT(e))return e;return{}}function aA(n,e){var t,r;let o;return o=aT(n[0])?n[0]:aT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Sw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jM(this._delegate,e._delegate)}}class xw extends Sw{data(e){const t=this._delegate.data(e);return function f0(n,e){n||it()}(void 0!==t),t}}class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ob(e)}where(e,t,r){try{return new Is(this.firestore,xh(this._delegate,function HS(n,e,t){const r=e,o=Rb("where",n);return new zS(o,r,t)}(e,t,r)))}catch(o){throw ws(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Is(this.firestore,xh(this._delegate,function WS(n,e="asc"){const t=e,r=Rb("orderBy",n);return new GS(r,t)}(e,t)))}catch(r){throw ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Is(this.firestore,xh(this._delegate,function KS(n){return TM("limit",n),new zM("limit",n,"F")}(e)))}catch(t){throw ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Is(this.firestore,xh(this._delegate,function ZS(n){return TM("limitToLast",n),new zM("limitToLast",n,"L")}(e)))}catch(t){throw ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Is(this.firestore,xh(this._delegate,function qS(...n){return new HM("startAt",n,!0)}(...e)))}catch(t){throw ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Is(this.firestore,xh(this._delegate,function YS(...n){return new HM("startAfter",n,!1)}(...e)))}catch(t){throw ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Is(this.firestore,xh(this._delegate,function QS(...n){return new GM("endBefore",n,!1)}(...e)))}catch(t){throw ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Is(this.firestore,xh(this._delegate,function JS(...n){return new GM("endAt",n,!0)}(...e)))}catch(t){throw ws(t,"endAt()","Query.endAt()")}}isEqual(e){return xM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function sx(n){n=en(n,Zi);const e=en(n.firestore,rr),t=qr(e),r=new Tp(e);return function mS(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,d){try{const g=yield jv(o,u,!0),w=new pw(u,g.ji),D=w.Ku(g.documents),S=w.applyChanges(D,!1);d.resolve(S.snapshot)}catch(g){const w=jl(g,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield Ah(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Sh(e,r,n,o))}(this._delegate):"server"===e?.source?function ox(n){n=en(n,Zi);const e=en(n.firestore,rr),t=qr(e),r=new Tp(e);return IM(t,n._query,{source:"server"}).then(o=>new Sh(e,r,n,o))}(this._delegate):function ix(n){n=en(n,Zi);const e=en(n.firestore,rr),t=qr(e),r=new Tp(e);return $M(n._query),IM(t,n._query).then(o=>new Sh(e,r,n,o))}(this._delegate),t.then(r=>new uT(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=oA(e),r=aA(e,o=>new uT(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return XM(this._delegate,t,r)}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}class Ex{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ex(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new xw(this._firestore,r))})}isEqual(e){return jM(this._delegate,e._delegate)}}class oy extends Is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?Cb(this._delegate):Cb(this._delegate,e))}catch(t){throw ws(t,"doc()","CollectionReference.doc()")}}add(e){return function ux(n,e){const t=en(n.firestore,rr),r=Cb(n),o=kb(n.converter,e);return sy(t,[Ab(bp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return SM(this._delegate,e._delegate)}withConverter(e){return new oy(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function Ap(n){return en(n,qn)}class cT{constructor(...e){this._delegate=new $l(...e)}static documentId(){return new cT(tr.keyField().canonicalString())}isEqual(e){return(e=(0,zt.m9)(e))instanceof $l&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fx(){return new XC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sp(e)}static delete(){const e=function hx(){return new Dw("deleteField")}();return e._methodName="FieldValue.delete",new Sp(e)}static arrayUnion(...e){const t=function px(...n){return new FS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sp(t)}static arrayRemove(...e){const t=function gx(...n){return new US("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sp(t)}static increment(e){const t=function mx(n){return new VS("increment",n)}(e);return t._methodName="FieldValue.increment",new Sp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bx={Firestore:rA,GeoPoint:Tb,Timestamp:Mn,Blob:Aw,Transaction:iA,WriteBatch:sA,DocumentReference:wa,DocumentSnapshot:Sw,Query:Is,QueryDocumentSnapshot:xw,QuerySnapshot:uT,CollectionReference:oy,FieldPath:cT,FieldValue:Sp,setLogLevel:function Ix(n){!function V_(n){bo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Cx(n){(function Dx(n,e){n.INTERNAL.registerComponent(new Eg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},bx)))})(n,(e,t)=>new rA(e,t,new wx)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(gD.Z);var Tx=P(6451),Nb=P(5363),Mx=P(6063);class Ax extends Pn.x{constructor(e=1/0,t=1/0,r=Mx.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)g=w;g&&r.splice(0,g+1)}}}var Sx=P(3099);function uA(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,Sx.B)({connector:()=>new Ax(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function cA(n,e){return(0,ho.m)(e)?$n(()=>n,e):$n(()=>n)}var lT=P(9468);P(5867);const dA=new Map,Nx={activated:!1,tokenObservers:[]},Px={initialized:!1,enabled:!1};function _i(n){return dA.get(n)||Nx}function Eu(n,e){dA.set(n,e)}function Lb(){return Px}class Bx{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new zt.BH,yield function jx(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new zt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Es=new zt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fA(n){if(!_i(n).activated)throw Es.create("use-before-activation",{appName:n.name})}function pT(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,we.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const X=yield d.getHeartbeatsHeader();X&&(u["X-Firebase-Client"]=X)}const g={method:"POST",body:JSON.stringify(e),headers:u};let w,D;try{w=yield fetch(n,g)}catch(X){throw Es.create("fetch-network-error",{originalErrorMessage:null===(r=X)||void 0===r?void 0:r.message})}if(200!==w.status)throw Es.create("fetch-status-error",{httpStatus:w.status});try{D=yield w.json()}catch(X){throw Es.create("fetch-parse-error",{originalErrorMessage:null===(o=X)||void 0===o?void 0:o.message})}const S=D.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw Es.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const k=1e3*Number(S[1]),z=Date.now();return{token:D.token,expireTimeMillis:z+k,issuedAtTimeMillis:z}}),gT.apply(this,arguments)}function Gx(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Rw="firebase-app-check-store";let Vb=null;function gA(){return Vb||(Vb=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(Es.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Rw,{keyPath:"compositeKey"})}}catch(r){e(Es.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Vb)}function mT(){return mT=(0,we.Z)(function*(n,e){const r=(yield gA()).transaction(Rw,"readwrite"),u=r.objectStore(Rw).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var D;g(Es.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),mT.apply(this,arguments)}const kw=new su.Yd("@firebase/app-check");function vA(n,e){return(0,zt.hl)()?function qx(n,e){return function mA(n,e){return mT.apply(this,arguments)}(function _A(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{kw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wA(){return Lb().enabled}function IA(){return wT.apply(this,arguments)}function wT(){return wT=(0,we.Z)(function*(){const n=Lb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),wT.apply(this,arguments)}const tR={error:"UNKNOWN_ERROR"};function nR(n){return zt.US.encodeString(JSON.stringify(n),!1)}function Bb(n){return IT.apply(this,arguments)}function IT(){return IT=(0,we.Z)(function*(n,e=!1){const t=n.app;fA(t);const r=_i(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&jb(w)&&(o=w)}if(!e&&o&&jb(o))return{token:o.token};let g,d=!1;if(wA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=pT(Gx(t,yield IA()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),d=!0);const w=yield r.exchangeTokenPromise;return yield vA(t,w),Eu(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?kw.warn(w.message):kw.error(w),u=w}return o?(g={token:o.token},Eu(t,Object.assign(Object.assign({},r),{token:o})),yield vA(t,o)):g=iR(u),d&&bA(t,g),g}),IT.apply(this,arguments)}function bT(n,e){const t=_i(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Eu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function EA(n){const{app:e}=n,t=_i(e);let r=t.tokenRefresher;r||(r=function rR(n){const{app:e}=n;return new Bx((0,we.Z)(function*(){let r;if(r=_i(e).token?yield Bb(n,!0):yield Bb(n),r.error)throw r.error}),()=>!0,()=>{const t=_i(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Eu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function bA(n,e){const t=_i(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function jb(n){return n.expireTimeMillis-Date.now()>0}function iR(n){return{token:nR(tR),error:n}}class sR{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_i(this.app);for(const t of e)bT(this.app,t.next);return Promise.resolve()}}const RA="app-check-internal";!function vR(){(0,ti._registerComponent)(new Eg.wA("app-check",n=>function oR(n,e){return new sR(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(RA).initialize()})),(0,ti._registerComponent)(new Eg.wA(RA,n=>function aR(n){return{getToken:e=>Bb(n,e),addTokenListener:e=>function ET(n,e,t,r){const{app:o}=n,u=_i(o),d={next:t,error:r,type:e};if(Eu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&jb(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),EA(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>EA(n))}(n,"INTERNAL",e),removeTokenListener:e=>bT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ti.registerVersion)("@firebase/app-check","0.5.12")}();class MT{constructor(){return(0,xr.vb)("app-check")}}typeof window<"u"&&window;var DR=P(127);const OA=new m.OlP("angularfire2.auth.use-emulator"),NA=new m.OlP("angularfire2.auth.settings"),PA=new m.OlP("angularfire2.auth.tenant-id"),LA=new m.OlP("angularfire2.auth.langugage-code"),FA=new m.OlP("angularfire2.auth.use-device-language"),UA=new m.OlP("angularfire.auth.persistence"),VA=(n,e,t,r,o,u,d,g)=>(0,wo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[D,S]of Object.entries(d))w.settings[D]=S;return g&&w.setPersistence(g),w},[t,r,o,u,d,g]);let BA=(()=>{class n{constructor(t,r,o,u,d,g,w,D,S,k,z,X){const se=new Pn.x,xe=lt(void 0).pipe((0,Nb.Q)(d.outsideAngular),$n(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1451)))),(0,ht.U)(()=>(0,wo.on)(t,u,r)),(0,ht.U)(Ue=>VA(Ue,u,g,D,S,k,w,z)),uA({bufferSize:1,refCount:!1}));if(Qr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=lt(null);else{xe.pipe(cr()).subscribe();const Et=xe.pipe($n(At=>At.getRedirectResult().then(Lt=>Lt,()=>null)),xr.iC,uA({bufferSize:1,refCount:!1})),Ct=xe.pipe($n(At=>new Cn.y(Lt=>({unsubscribe:u.runOutsideAngular(()=>At.onAuthStateChanged(Kt=>Lt.next(Kt),Kt=>Lt.error(Kt),()=>Lt.complete()))})))),Bt=xe.pipe($n(At=>new Cn.y(Lt=>({unsubscribe:u.runOutsideAngular(()=>At.onIdTokenChanged(Kt=>Lt.next(Kt),Kt=>Lt.error(Kt),()=>Lt.complete()))}))));this.authState=Et.pipe(cA(Ct),(0,lT.R)(d.outsideAngular),(0,Nb.Q)(d.insideAngular)),this.user=Et.pipe(cA(Bt),(0,lT.R)(d.outsideAngular),(0,Nb.Q)(d.insideAngular)),this.idToken=this.user.pipe($n(At=>At?(0,cn.D)(At.getIdToken()):lt(null))),this.idTokenResult=this.user.pipe($n(At=>At?(0,cn.D)(At.getIdTokenResult()):lt(null))),this.credential=(0,Tx.T)(Et,se,this.authState.pipe(Sr(At=>!At))).pipe((0,ht.U)(At=>At?.user?At:null),(0,lT.R)(d.outsideAngular),(0,Nb.Q)(d.insideAngular))}return(0,wo.pX)(this,xe,u,{spy:{apply:(Ue,Et,Ct)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Ct.then(Bt=>se.next(Bt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(wo.Dh),m.LFG(wo.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(xr.HU),m.LFG(OA,8),m.LFG(NA,8),m.LFG(PA,8),m.LFG(LA,8),m.LFG(FA,8),m.LFG(UA,8),m.LFG(MT,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function jA(n,e){return function TR(n,e=r_.z){return new Cn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ST(n,e){return jA(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function zb(n,e){return ST(n,e).pipe(ju(void 0),Ig(),(0,ht.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const w=o.find(S=>S.doc.ref.isEqual(d.ref)),D=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function $A(n,e,t){return zb(n,t).pipe(lr((r,o)=>function AR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function SR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function $T(n,e=os.y){return n=n??mI,(0,Ln.e)((t,r)=>{let o,u=!0;t.subscribe((0,jn.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,ht.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function xT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function zA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ju(void 0),Ig(),Sr(([r,o])=>o.length>0||!r),(0,ht.U)(([r,o])=>o),xr.iC)}auditTrail(e){return this.stateChanges(e).pipe(lr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zA(e);return $A(this.query,t,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return ST(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),xr.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(xr.iC)}add(e){return this.ref.add(e)}doc(e){return new GA(this.ref.doc(e),this.afs)}}class GA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=ZA(r,t);return new HA(o,u,this.afs)}snapshotChanges(){return function MR(n,e){return jA(n,e).pipe(ju(void 0),Ig(),(0,ht.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,cn.D)(this.ref.get(e)).pipe(xr.iC)}}class xR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zb(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Sr(t=>t.length>0),xr.iC):zb(this.query,this.afs.schedulers.outsideAngular).pipe(xr.iC)}auditTrail(e){return this.stateChanges(e).pipe(lr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zA(e);return $A(this.query,t,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return ST(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),xr.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(xr.iC)}}const WA=new m.OlP("angularfire2.enableFirestorePersistence"),KA=new m.OlP("angularfire2.firestore.persistenceSettings"),RR=new m.OlP("angularfire2.firestore.settings"),kR=new m.OlP("angularfire2.firestore.use-emulator");function ZA(n,e=(t=>t)){return{query:e(n),ref:n}}let RT,qA=(()=>{class n{constructor(t,r,o,u,d,g,w,D,S,k,z,X,se,xe,Ue,Et,Ct){this.schedulers=w;const Bt=(0,wo.on)(t,g,r),At=S;k&&VA(Bt,g,z,se,xe,Ue,X,Et),[this.firestore,this.persistenceEnabled$]=(0,wo.cc)(`${Bt.name}.firestore`,"AngularFirestore",Bt.name,()=>{const Lt=g.runOutsideAngular(()=>Bt.firestore());if(u&&Lt.settings(u),At&&Lt.useEmulator(...At),o&&!Qr(d)){const Kt=()=>{try{return(0,cn.D)(Lt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(oi){return typeof console<"u"&&console.warn(oi),lt(!1)}};return[Lt,g.runOutsideAngular(Kt)]}return[Lt,lt(!1)]},[u,At,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=ZA(o,r),g=this.schedulers.ngZone.run(()=>u);return new HA(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new xR(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new GA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(wo.Dh),m.LFG(wo.xv,8),m.LFG(WA,8),m.LFG(RR,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(xr.HU),m.LFG(KA,8),m.LFG(kR,8),m.LFG(BA,8),m.LFG(OA,8),m.LFG(NA,8),m.LFG(PA,8),m.LFG(LA,8),m.LFG(FA,8),m.LFG(UA,8),m.LFG(MT,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OR=(()=>{class n{constructor(){DR.Z.registerVersion("angularfire",xr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WA,useValue:!0},{provide:KA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[qA]}),n})();try{RT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{RT=!1}let kT=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Du(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!RT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.Lbi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QA(n){return Array.isArray(n)?n:[n]}const JA=new Set;let uy,GR=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):KR}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function WR(n){if(!JA.has(n))try{uy||(uy=document.createElement("style"),uy.setAttribute("type","text/css"),document.head.appendChild(uy)),uy.sheet&&(uy.sheet.insertRule(`@media ${n} {body{ }}`,0),JA.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(kT))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KR(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let ZR=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Pn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return XA(QA(t)).some(o=>this._registerQuery(o).mql.matches)}observe(t){let u=fi(XA(QA(t)).map(d=>this._registerQuery(d).observable));return u=cs(u.pipe(Fn(1)),u.pipe(function zR(n){return Sr((e,t)=>n<=t)}(1),function HR(n,e=r_.z){return(0,Ln.e)((t,r)=>{let o=null,u=null,d=null;const g=()=>{if(o){o.unsubscribe(),o=null;const D=u;u=null,r.next(D)}};function w(){const D=d+n,S=e.now();if(S<D)return o=this.schedule(void 0,D-S),void r.add(o);g()}t.subscribe((0,jn.x)(r,D=>{u=D,d=e.now(),o||(o=e.schedule(w,n),r.add(o))},()=>{g(),r.complete()},void 0,()=>{u=o=null}))})}(0))),u.pipe((0,ht.U)(d=>{const g={matches:!1,breakpoints:{}};return d.forEach(({matches:w,query:D})=>{g.matches=g.matches||w,g.breakpoints[D]=w}),g}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),u={observable:new Cn.y(d=>{const g=w=>this._zone.run(()=>d.next(w));return r.addListener(g),()=>{r.removeListener(g)}}).pipe(ju(r),(0,ht.U)(({matches:d})=>({query:t,matches:d})),ln(this._destroySubject)),mql:r};return this._queries.set(t,u),u}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(GR),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XA(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const rS="cdk-high-contrast-black-on-white",iS="cdk-high-contrast-white-on-black",PT="cdk-high-contrast-active";let rk=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,m.f3M)(ZR).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(t):null,u=(o&&o.backgroundColor||"").replace(/ /g,"");switch(t.remove(),u){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(PT,rS,iS),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(PT,rS):2===r&&t.add(PT,iS)}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(kT),m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const ak=new m.OlP("mat-sanity-checks",{providedIn:"root",factory:function ok(){return!0}});let uS=(()=>{class n{constructor(t,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function LR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(rk),m.LFG(ak,8),m.LFG(de))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[sS,sS]}),n})();function uk(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}const fk=["*",[["mat-toolbar-row"]]],pk=["*","mat-toolbar-row"],gk=uk(class{constructor(n){this._elementRef=n}});let mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),yk=(()=>{class n extends gk{constructor(t,r,o){super(t),this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(kT),m.Y36(de))},n.\u0275cmp=m.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,o){if(1&t&&m.Suo(o,mk,5),2&t){let u;m.iGM(u=m.CRH())&&(r._toolbarRows=u)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&m.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[m.qOj],ngContentSelectors:pk,decls:2,vars:0,template:function(t,r){1&t&&(m.F$t(fk),m.Hsn(0),m.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),_k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[uS,uS]}),n})(),vk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-navbar"]],decls:3,vars:0,consts:[["color","primary"]],template:function(t,r){1&t&&(m.TgZ(0,"mat-toolbar",0)(1,"span"),m._uU(2,"Tracker Web"),m.qZA()())},dependencies:[yk]}),n})();function wk(n,e){if(1&n&&m._UZ(0,"map-marker",9),2&n){const t=e.$implicit,r=m.oxw(2);m.Q6J("position",t)("options",r.markerOptions)}}function Ik(n,e){if(1&n&&(m.TgZ(0,"div"),m.YNc(1,wk,1,2,"map-marker",8),m.qZA()),2&n){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.markerPositions)}}function Ek(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"a",10),m.NdJ("click",function(){const u=m.CHM(t).$implicit,d=m.oxw();return m.KtG(d.seguir(u))}),m._uU(1),m.qZA()}if(2&n){const t=e.$implicit;m.xp6(1),m.hij(" ",t.nombre," ")}}function bk(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"button",11),m.NdJ("click",function(){m.CHM(t);const o=m.oxw();return m.KtG(o.dejarDeSeguir())}),m._uU(1," Dejar de seguir "),m.qZA()}}const Dk=[{path:"",redirectTo:"/map",pathMatch:"full"},{path:"map",component:(()=>{class n{constructor(t){this.position={lat:-17.359886,lng:-66.171915},this.markerOptions={draggable:!0},this.markerPositions=[],this.siguiendoA="",this.siguiendoNombre="",this.siguiendo=!1,this.formatMap=!1,t.collection("usuarios").valueChanges().subscribe(r=>{this.taxistas=r,""!=this.siguiendoA&&r.forEach(o=>{o.clave===this.siguiendoA&&(this.position.lat=o.lat,this.position.lng=o.lng,this.addMarker())})})}addMarker(){this.markerPositions=[],this.markerPositions.push(this.position)}removeMarker(){this.markerPositions=[]}ngOnInit(){this.interval=setInterval(()=>this.changeState(),500)}changeState(){this.formatMap=!this.formatMap}seguir(t){this.siguiendoA=t.clave,this.siguiendoNombre=t.nombre,this.position.lat=t.lat,this.position.lng=t.lng,this.siguiendo=!0,this.addMarker()}dejarDeSeguir(){this.siguiendoA="",this.siguiendoNombre="",this.siguiendo=!1,this.markerPositions=[]}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(qA))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-map"]],decls:13,vars:4,consts:[[1,"row","pad-10"],[1,"col-8"],["width","100%",3,"center"],[4,"ngIf"],[1,"col-4"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],["class","btn btn-primary btn-block",3,"click",4,"ngIf"],[3,"position","options",4,"ngFor","ngForOf"],[3,"position","options"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"btn","btn-primary","btn-block",3,"click"]],template:function(t,r){1&t&&(m._UZ(0,"app-navbar"),m.TgZ(1,"div",0)(2,"div",1)(3,"h2"),m._uU(4,"MAPA"),m.qZA(),m.TgZ(5,"google-map",2),m.YNc(6,Ik,2,1,"div",3),m.qZA()(),m.TgZ(7,"div",4)(8,"h2"),m._uU(9,"MOVILES"),m.qZA(),m.TgZ(10,"div",5),m.YNc(11,Ek,2,1,"a",6),m.YNc(12,bk,2,0,"button",7),m.qZA()()()),2&t&&(m.xp6(5),m.Q6J("center",r.position),m.xp6(1),m.Q6J("ngIf",r.formatMap),m.xp6(5),m.Q6J("ngForOf",r.taxistas),m.xp6(1),m.Q6J("ngIf",r.siguiendoNombre))},dependencies:[Ji,Tr,mr,Hh,vk],styles:[".pad-10[_ngcontent-%COMP%]{padding:20px}"]}),n})()}];let Ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[lI.forRoot(Dk),lI]}),n})(),Tk=(()=>{class n{constructor(){this.title="tracker-web"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[qc]}),n})();const hS_firebaseConfig={apiKey:"AIzaSyDdFXUkAYYt6J8w07jctuW3spjepFaRwFA",authDomain:"tracker-2c9c8.firebaseapp.com",projectId:"tracker-2c9c8",storageBucket:"tracker-2c9c8.appspot.com",messagingSenderId:"675057084203",appId:"1:675057084203:web:1551d51062bc504e29076e",measurementId:"G-24HKY6TB33"};let Mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[Tk]}),n.\u0275inj=m.cJS({imports:[In,Ck,Uu,_k,OR,wo.hO.initializeApp(hS_firebaseConfig)]}),n})();(0,m.G48)(),Ph().bootstrapModule(Mk).catch(n=>console.error(n))},5867:(ot,Te,P)=>{P.d(Te,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=P(9681);(0,m.registerVersion)("firebase","9.9.2","app")},127:(ot,Te,P)=>{P.d(Te,{Z:()=>m.Z});var m=P(3942);m.Z.registerVersion("firebase","9.9.2","app-compat")},1451:(ot,Te,P)=>{P.r(Te);var m=P(5861),ne=P(3942),N=P(2090),ue=P(9681),oe=P(655),fe=P(1877),de=P(4859);const Ie=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Je=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new fe.Yd("@firebase/auth");function st(y,...h){Ye.logLevel<=fe.in.ERROR&&Ye.error(`Auth (${ue.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw ze(y,...h)}function ve(y,...h){return ze(y,...h)}function be(y,h,p){const v=Object.assign(Object.assign({},Je()),{[h]:p});return new N.LL("auth","Firebase",v).create(h,{appName:y.name})}function je(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ae(y,"argument-error"),be(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return _e.create(y,...h)}function V(y,h,...p){if(!y)throw ze(h,...p)}function ye(y){const h="INTERNAL ASSERTION FAILED: "+y;throw st(h),new Error(h)}function Y(y,h){y||ye(h)}const ee=new Map;function ae(y){Y(y instanceof Function,"Expected a class definition");let h=ee.get(y);return h?(Y(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ee.set(y,h),h)}function Oe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function dt(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class nn{constructor(h,p){this.shortDelay=h,this.longDelay=p,Y(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sn(y,h){Y(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class qt{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},kr=new nn(3e4,6e4);function kt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function rn(y,h,p,v){return So.apply(this,arguments)}function So(){return(So=(0,m.Z)(function*(y,h,p,v,M={}){return ai(y,M,(0,m.Z)(function*(){let O={},K={};v&&("GET"===h?K=v:O={body:JSON.stringify(v)});const ce=(0,N.xO)(Object.assign({key:y.config.apiKey},K)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),qt.fetch()(qi(y,y.config.apiHost,p,ce),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ai(y,h,p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,m.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Yt),h);try{const M=new ui(y),O=yield Promise.race([p(),M.promise]);M.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw Ri(y,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const ce=O.ok?K.errorMessage:K.error.message,[Fe,Qe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Ri(y,"credential-already-in-use",K);if("EMAIL_EXISTS"===Fe)throw Ri(y,"email-already-in-use",K);if("USER_DISABLED"===Fe)throw Ri(y,"user-disabled",K);const yt=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw be(y,yt,Qe);Ae(y,yt)}}catch(M){if(M instanceof N.ZR)throw M;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Or(y,h,p,v){return xi.apply(this,arguments)}function xi(){return(xi=(0,m.Z)(function*(y,h,p,v,M={}){const O=yield rn(y,h,p,v,M);return"mfaPendingCredential"in O&&Ae(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function qi(y,h,p,v){const M=`${h}${p}?${v}`;return y.config.emulator?Sn(y.config,M):`${y.config.apiScheme}://${M}`}class ui{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ve(this.auth,"network-request-failed")),kr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ri(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const M=ve(y,h,v);return M.customData._tokenResponse=p,M}function an(){return(an=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function vi(y,h){return xn.apply(this,arguments)}function xn(){return(xn=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ki(y,h){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Rn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function un(){return(un=(0,m.Z)(function*(y,h=!1){const p=(0,N.m9)(y),v=yield p.getIdToken(h),M=qe(v);V(M&&M.exp&&M.auth_time&&M.iat,p.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,K=O?.sign_in_provider;return{claims:M,token:v,authTime:Rn(tt(M.auth_time)),issuedAtTime:Rn(tt(M.iat)),expirationTime:Rn(tt(M.exp)),signInProvider:K||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function tt(y){return 1e3*Number(y)}function qe(y){var h;const[p,v,M]=y.split(".");if(void 0===p||void 0===v||void 0===M)return st("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,N.tV)(v);return O?JSON.parse(O):(st("Failed to decode base64 JWT payload"),null)}catch(O){return st("Caught error parsing JWT payload as JSON",null===(h=O)||void 0===h?void 0:h.toString()),null}}function ir(y,h){return fn.apply(this,arguments)}function fn(){return(fn=(0,m.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof N.ZR&&Ot(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ot({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Un{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const M=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,m.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===(null===(p=v)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class bs{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qt(y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,m.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),M=yield ir(y,ki(p,{idToken:v}));V(M?.users.length,p,"internal-error");const O=M.users[0];y._notifyReloadListener(O);const K=null!==(h=O.providerUserInfo)&&void 0!==h&&h.length?U(O.providerUserInfo):[],ce=$(y.providerData,K),yt=!!y.isAnonymous&&!(y.email&&O.passwordHash||ce?.length),ut={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ce,metadata:new bs(O.createdAt,O.lastLoginAt),isAnonymous:yt};Object.assign(y,ut)})).apply(this,arguments)}function q(){return(q=(0,m.Z)(function*(y){const h=(0,N.m9)(y);yield Qt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function $(y,h){return[...y.filter(v=>!h.some(M=>M.providerId===v.providerId)),...h]}function U(y){return y.map(h=>{var{providerId:p}=h,v=(0,oe._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function W(){return(W=(0,m.Z)(function*(y,h){const p=yield ai(y,{},(0,m.Z)(function*(){const v=(0,N.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:M,apiKey:O}=y.config,K=qi(y,M,"/v1/token",`key=${O}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",qt.fetch()(K,{method:"POST",headers:ce,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function xo(y){const h=qe(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,m.Z)(function*(){return V(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,m.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:K}=yield function H(y,h){return W.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(M,O,Number(K))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:M,expirationTime:O}=p,K=new Ce;return v&&(V("string"==typeof v,"internal-error",{appName:h}),K.refreshToken=v),M&&(V("string"==typeof M,"internal-error",{appName:h}),K.accessToken=M),O&&(V("number"==typeof O,"internal-error",{appName:h}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ce,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Be(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class ct{constructor(h){var{uid:p,auth:v,stsTokenManager:M}=h,O=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new bs(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const v=yield ir(p,p.stsTokenManager.getToken(p.auth,h));return V(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function qs(y){return un.apply(this,arguments)}(this,h)}reload(){return function Ft(y){return q.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new ct(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,m.Z)(function*(){let M=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),M=!0),p&&(yield Qt(v)),yield v.auth._persistUserIfCurrent(v),M&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield ir(h,function gt(y,h){return an.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,M,O,K,ce,Fe,Qe,yt;const ut=null!==(v=p.displayName)&&void 0!==v?v:void 0,Tn=null!==(M=p.email)&&void 0!==M?M:void 0,fs=null!==(O=p.phoneNumber)&&void 0!==O?O:void 0,el=null!==(K=p.photoURL)&&void 0!==K?K:void 0,sf=null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,tl=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,ug=null!==(Qe=p.createdAt)&&void 0!==Qe?Qe:void 0,cg=null!==(yt=p.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:Rd,emailVerified:xy,isAnonymous:af,providerData:ca,stsTokenManager:Qu}=p;V(Rd&&Qu,h,"internal-error");const jw=Ce.fromJSON(this.name,Qu);V("string"==typeof Rd,h,"internal-error"),Be(ut,h.name),Be(Tn,h.name),V("boolean"==typeof xy,h,"internal-error"),V("boolean"==typeof af,h,"internal-error"),Be(fs,h.name),Be(el,h.name),Be(sf,h.name),Be(tl,h.name),Be(ug,h.name),Be(cg,h.name);const lg=new ct({uid:Rd,auth:h,email:Tn,emailVerified:xy,displayName:ut,isAnonymous:af,photoURL:el,phoneNumber:fs,tenantId:sf,stsTokenManager:jw,createdAt:ug,lastLoginAt:cg});return ca&&Array.isArray(ca)&&(lg.providerData=ca.map($w=>Object.assign({},$w))),tl&&(lg._redirectEventId=tl),lg}static _fromIdTokenResponse(h,p,v=!1){return(0,m.Z)(function*(){const M=new Ce;M.updateFromServerResponse(p);const O=new ct({uid:p.localId,auth:h,stsTokenManager:M,isAnonymous:v});return yield Qt(O),O})()}}const Jt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,v){var M=this;return(0,m.Z)(function*(){M.storage[p]=v})()}_get(p){var v=this;return(0,m.Z)(function*(){const M=v.storage[p];return void 0===M?null:M})()}_remove(p){var v=this;return(0,m.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function Yn(y,h,p){return`firebase:${y}:${h}:${p}`}class Xe{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:M,name:O}=this.auth;this.fullUserKey=Yn(this.userKey,M.apiKey,O),this.fullPersistenceKey=Yn("persistence",M.apiKey,O),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?ct._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,m.Z)(function*(){if(!p.length)return new Xe(ae(Jt),h,v);const M=(yield Promise.all(p.map(function(){var Qe=(0,m.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let O=M[0]||ae(Jt);const K=Yn(v,h.config.apiKey,h.name);let ce=null;for(const Qe of p)try{const yt=yield Qe._get(K);if(yt){const ut=ct._fromJSON(h,yt);Qe!==O&&(ce=ut),O=Qe;break}}catch{}const Fe=M.filter(Qe=>Qe._shouldAllowMigration);return O._shouldAllowMigration&&Fe.length?(O=Fe[0],ce&&(yield O._set(K,ce.toJSON())),yield Promise.all(p.map(function(){var Qe=(0,m.Z)(function*(yt){if(yt!==O)try{yield yt._remove(K)}catch{}});return function(yt){return Qe.apply(this,arguments)}}())),new Xe(O,h,v)):new Xe(O,h,v)})()}}function on(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(We(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(pn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(tn(h))return"Blackberry";if(kn(h))return"Webos";if(sr(h))return"Safari";if((h.includes("chrome/")||hr(h))&&!h.includes("edge/"))return"Chrome";if(_t(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function pn(y=(0,N.z$)()){return/firefox\//i.test(y)}function sr(y=(0,N.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function hr(y=(0,N.z$)()){return/crios\//i.test(y)}function We(y=(0,N.z$)()){return/iemobile/i.test(y)}function _t(y=(0,N.z$)()){return/android/i.test(y)}function tn(y=(0,N.z$)()){return/blackberry/i.test(y)}function kn(y=(0,N.z$)()){return/webos/i.test(y)}function ci(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ia(y=(0,N.z$)()){return ci(y)||_t(y)||kn(y)||tn(y)||/windows phone/i.test(y)||We(y)}function Mt(y,h=[]){let p;switch(y){case"Browser":p=on((0,N.z$)());break;case"Worker":p=`${on((0,N.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ue.SDK_VERSION}/${v}`}class Ea{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=O=>new Promise((K,ce)=>{try{K(h(O))}catch(Fe){ce(Fe)}});v.onAbort=p,this.queue.push(v);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,m.Z)(function*(){var v;if(p.auth.currentUser===h)return;const M=[];try{for(const O of p.queue)yield O(h),O.onAbort&&M.push(O.onAbort)}catch(O){M.reverse();for(const K of M)try{K()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(v=O)||void 0===v?void 0:v.message})}})()}}class Ro{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cs(this),this.idTokenSubscription=new Cs(this),this.beforeStateQueue=new Ea(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=ae(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var M,O;if(!v._deleted&&(v.persistenceManager=yield Xe.create(v,h),!v._deleted)){if(null!==(M=v._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(O=v.currentUser)||void 0===O?void 0:O.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var v;const M=yield p.assertedPersistence.getCurrentUser();let O=M,K=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ce=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=O?._redirectEventId,Qe=yield p.tryRedirectSignIn(h);(!ce||ce===Fe)&&Qe?.user&&(O=Qe.user,K=!0)}if(!O)return p.directlySetCurrentUser(null);if(!O._redirectEventId){if(K)try{yield p.beforeStateQueue.runMiddleware(O)}catch(ce){O=M,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ce))}return O?p.reloadAndSetCurrentUserOrClear(O):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===O._redirectEventId?p.directlySetCurrentUser(O):p.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){var v;try{yield Qt(h)}catch(M){if("auth/network-request-failed"!==(null===(v=M)||void 0===v?void 0:v.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ge(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const v=h?(0,N.m9)(h):null;return v&&V(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,m.Z)(function*(){if(!v._deleted)return h&&V(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,m.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(ae(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new N.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,m.Z)(function*(){const M=yield v.getOrInitRedirectPersistenceManager(p);return null===h?M.removeCurrentUser():M.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&ae(h)||p._popupRedirectResolver;V(v,p,"argument-error"),p.redirectPersistenceManager=yield Xe.create(p,[ae(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var v,M;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(M=p.redirectUser)||void 0===M?void 0:M._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,M){if(this._deleted)return()=>{};const O="function"==typeof p?p:p.next.bind(p),K=this._isInitialized?Promise.resolve():this._initializationPromise;return V(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof p?h.addObserver(p,v,M):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Mt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const M=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return M&&(v["X-Firebase-Client"]=M),v})()}}function wn(y){return(0,N.m9)(y)}class Cs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,N.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ts(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Nr(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Ys{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ye("not implemented")}_getIdTokenResponse(h){return ye("not implemented")}_linkToIdToken(h,p){return ye("not implemented")}_getReauthenticationResolver(h){return ye("not implemented")}}function Nt(y,h){return bc.apply(this,arguments)}function bc(){return(bc=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:resetPassword",kt(y,h))})).apply(this,arguments)}function Hl(y,h){return ko.apply(this,arguments)}function ko(){return(ko=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ba(y,h){return As.apply(this,arguments)}function As(){return(As=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:update",kt(y,h))})).apply(this,arguments)}function Ji(){return(Ji=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPassword",kt(y,h))})).apply(this,arguments)}function On(y,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:sendOobCode",kt(y,h))})).apply(this,arguments)}function Tr(y,h){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,m.Z)(function*(y,h){return On(y,h)})).apply(this,arguments)}function No(y,h){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,m.Z)(function*(y,h){return On(y,h)})).apply(this,arguments)}function Ca(y,h){return li.apply(this,arguments)}function li(){return(li=(0,m.Z)(function*(y,h){return On(y,h)})).apply(this,arguments)}function Rp(y,h){return bu.apply(this,arguments)}function bu(){return(bu=(0,m.Z)(function*(y,h){return On(y,h)})).apply(this,arguments)}function Dc(){return(Dc=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,h))})).apply(this,arguments)}function Gl(){return(Gl=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,h))})).apply(this,arguments)}class Cc extends Ys{constructor(h,p,v,M=null){super("password",v),this._email=h,this._password=p,this._tenantId=M}static _fromEmailAndPassword(h,p){return new Cc(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new Cc(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function Oo(y,h){return Ji.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function kh(y,h){return Dc.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,m.Z)(function*(){switch(v.signInMethod){case"password":return Hl(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function kp(y,h){return Gl.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Qn(y,h){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithIdp",kt(y,h))})).apply(this,arguments)}class Xi extends Ys{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Xi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ae("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:M}=p,O=(0,oe._T)(p,["providerId","signInMethod"]);if(!v||!M)return null;const K=new Xi(v,M);return K.idToken=O.idToken||void 0,K.accessToken=O.accessToken||void 0,K.secret=O.secret,K.nonce=O.nonce,K.pendingToken=O.pendingToken||null,K}_getIdTokenResponse(h){return Qn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Qn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Qn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,N.xO)(p)}return h}}function Np(y,h){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:sendVerificationCode",kt(y,h))})).apply(this,arguments)}function Ss(){return(Ss=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,h))})).apply(this,arguments)}function Zl(){return(Zl=(0,m.Z)(function*(y,h){const p=yield Or(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,h));if(p.temporaryProof)throw Ri(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Lp={USER_NOT_FOUND:"user-not-found"};function Ta(){return(Ta=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Lp)})).apply(this,arguments)}class Po extends Ys{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Po({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Po({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Tc(y,h){return Ss.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Pp(y,h){return Zl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ql(y,h){return Ta.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:M}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:M}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:M,temporaryProof:O}=h;return v||p||M||O?new Po({verificationId:p,verificationCode:v,phoneNumber:M,temporaryProof:O}):null}}class Ii{constructor(h){var p,v,M,O,K,ce;const Fe=(0,N.zd)((0,N.pd)(h)),Qe=null!==(p=Fe.apiKey)&&void 0!==p?p:null,yt=null!==(v=Fe.oobCode)&&void 0!==v?v:null,ut=function cy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Fe.mode)&&void 0!==M?M:null);V(Qe&&yt&&ut,"argument-error"),this.apiKey=Qe,this.operation=ut,this.code=yt,this.continueUrl=null!==(O=Fe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=Fe.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ce=Fe.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const p=function Yl(y){const h=(0,N.zd)((0,N.pd)(y)).link,p=h?(0,N.zd)((0,N.pd)(h)).deep_link_id:null,v=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(v?(0,N.zd)((0,N.pd)(v)).link:null)||v||p||h||y}(h);try{return new Ii(p)}catch{return null}}}let Lo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return Cc._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const M=Ii.parseLink(v);return V(M,"argument-error"),Cc._fromEmailAndCode(p,M.code,M.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ni{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Js extends Ni{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Fo extends Js{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),Xi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Fo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Fo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:M,pendingToken:O,nonce:K,providerId:ce}=h;if(!v&&!M&&!p&&!O||!ce)return null;try{return new Fo(ce)._credential({idToken:p,accessToken:v,nonce:K,pendingToken:O})}catch{return null}}}let Uo=(()=>{class y extends Js{constructor(){super("facebook.com")}static credential(p){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ma=(()=>{class y extends Js{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:M}=p;if(!v&&!M)return null;try{return y.credential(v,M)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Jl=(()=>{class y extends Js{constructor(){super("github.com")}static credential(p){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Aa extends Ys{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Qn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Qn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Qn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:M,pendingToken:O}=p;return v&&M&&O&&v===M?new Aa(v,O):null}static _create(h,p){return new Aa(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends Ni{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Pr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Pr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Aa.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return Aa._create(v,p)}catch{return null}}}let ed=(()=>{class y extends Js{constructor(){super("twitter.com")}static credential(p,v){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:M}=p;if(!v||!M)return null;try{return y.credential(v,M)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Vo(y,h){return Du.apply(this,arguments)}function Du(){return(Du=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signUp",kt(y,h))})).apply(this,arguments)}class Qr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,M=!1){return(0,m.Z)(function*(){const O=yield ct._fromIdTokenResponse(h,v,M),K=Nn(v);return new Qr({user:O,providerId:K,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const M=Nn(v);return new Qr({user:h,providerId:M,_tokenResponse:v,operationType:p})})()}}function Nn(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Oh(){return(Oh=(0,m.Z)(function*(y){var h;const p=wn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Qr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Vo(p,{returnSecureToken:!0}),M=yield Qr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(M.user),M})).apply(this,arguments)}class Xs extends N.ZR{constructor(h,p,v,M){var O;super(p.code,p.message),this.operationType=v,this.user=M,Object.setPrototypeOf(this,Xs.prototype),this.customData={appName:h.name,tenantId:null!==(O=h.tenantId)&&void 0!==O?O:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,M){return new Xs(h,p,v,M)}}function Jr(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Xs._fromErrorAndOperation(y,O,h,v):O})}function es(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function ts(){return(ts=(0,m.Z)(function*(y,h){const p=(0,N.m9)(y);yield Ei(!0,p,h);const{providerUserInfo:v}=yield vi(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),M=es(v||[]);return p.providerData=p.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function pr(y,h){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,m.Z)(function*(y,h,p=!1){const v=yield ir(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Qr._forOperation(y,"link",v)})).apply(this,arguments)}function Ei(y,h,p){return ns.apply(this,arguments)}function ns(){return(ns=(0,m.Z)(function*(y,h,p){yield Qt(h);const M=!1===y?"provider-already-linked":"no-such-provider";V(es(h.providerData).has(p)===y,h.auth,M)})).apply(this,arguments)}function rs(y,h){return is.apply(this,arguments)}function is(){return(is=(0,m.Z)(function*(y,h,p=!1){var v;const{auth:M}=y,O="reauthenticate";try{const K=yield ir(y,Jr(M,O,h,y),p);V(K.idToken,M,"internal-error");const ce=qe(K.idToken);V(ce,M,"internal-error");const{sub:Fe}=ce;return V(y.uid===Fe,M,"user-mismatch"),Qr._forOperation(y,O,K)}catch(K){throw"auth/user-not-found"===(null===(v=K)||void 0===v?void 0:v.code)&&Ae(M,"user-mismatch"),K}})).apply(this,arguments)}function jo(y,h){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(y,h,p=!1){const v="signIn",M=yield Jr(y,v,h),O=yield Qr._fromIdTokenResponse(y,v,M);return p||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Dn(y,h){return nd.apply(this,arguments)}function nd(){return(nd=(0,m.Z)(function*(y,h){return jo(wn(y),h)})).apply(this,arguments)}function Cu(y,h){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,m.Z)(function*(y,h){const p=(0,N.m9)(y);return yield Ei(!1,p,h.providerId),pr(p,h)})).apply(this,arguments)}function eo(y,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,m.Z)(function*(y,h){return rs((0,N.m9)(y),h)})).apply(this,arguments)}function Tu(y,h){return $o.apply(this,arguments)}function $o(){return($o=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,h))})).apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(y,h){const p=wn(y),v=yield Tu(p,{token:h,returnSecureToken:!0}),M=yield Qr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(M.user),M})).apply(this,arguments)}class Rs{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?zo._fromServerResponse(h,p):Ae(h,"internal-error")}}class zo extends Rs{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new zo(p)}}function gn(y,h,p){var v;V((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function ks(){return(ks=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y),M={requestType:"PASSWORD_RESET",email:h};p&&gn(v,M,p),yield No(v,M)})).apply(this,arguments)}function Ra(){return(Ra=(0,m.Z)(function*(y,h,p){yield Nt((0,N.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(y,h){yield ba((0,N.m9)(y),{oobCode:h})})).apply(this,arguments)}function Oa(y,h){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,m.Z)(function*(y,h){const p=(0,N.m9)(y),v=yield Nt(p,{oobCode:h}),M=v.requestType;switch(V(M,p,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(v.mfaInfo,p,"internal-error");default:V(v.email,p,"internal-error")}let O=null;return v.mfaInfo&&(O=Rs._fromServerResponse(wn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function Vn(){return(Vn=(0,m.Z)(function*(y,h){const{data:p}=yield Oa((0,N.m9)(y),h);return p.email})).apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(y,h,p){const v=wn(y),M=yield Vo(v,{returnSecureToken:!0,email:h,password:p}),O=yield Qr._fromIdTokenResponse(v,"signIn",M);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}function Ac(){return(Ac=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y),M={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,v,"argument-error"),p&&gn(v,M,p),yield Ca(v,M)})).apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y),M=Lo.credentialWithLink(h,p||Oe());return V(M._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Dn(v,M)})).apply(this,arguments)}function xc(y,h){return no.apply(this,arguments)}function no(){return(no=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:createAuthUri",kt(y,h))})).apply(this,arguments)}function La(){return(La=(0,m.Z)(function*(y,h){const v={identifier:h,continueUri:dt()?Oe():"http://localhost"},{signinMethods:M}=yield xc((0,N.m9)(y),v);return M||[]})).apply(this,arguments)}function Go(){return(Go=(0,m.Z)(function*(y,h){const p=(0,N.m9)(y),M={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&gn(p.auth,M,h);const{email:O}=yield Tr(p.auth,M);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function Su(){return(Su=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&gn(v.auth,O,p);const{email:K}=yield Rp(v.auth,O);K!==y.email&&(yield y.reload())})).apply(this,arguments)}function xu(y,h){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,m.Z)(function*(y,h){return rn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Wo(){return(Wo=(0,m.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,N.m9)(y),O={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},K=yield ir(v,xu(v.auth,O));v.displayName=K.displayName||null,v.photoURL=K.photoUrl||null;const ce=v.providerData.find(({providerId:Fe})=>"password"===Fe);ce&&(ce.displayName=v.displayName,ce.photoURL=v.photoURL),yield v._updateTokensIfNecessary(K)})).apply(this,arguments)}function Xn(y,h,p){return hi.apply(this,arguments)}function hi(){return(hi=(0,m.Z)(function*(y,h,p){const{auth:v}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(O.email=h),p&&(O.password=p);const K=yield ir(y,Hl(v,O));yield y._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Fa{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class id extends Fa{constructor(h,p,v,M){super(h,p,v),this.username=M}}class Lh extends Fa{constructor(h,p){super(h,"facebook.com",p)}}class kc extends id{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class sd extends Fa{constructor(h,p){super(h,"google.com",p)}}class Oc extends id{constructor(h,p,v){super(h,"twitter.com",p,v)}}function Nu(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function In(y){var h,p;if(!y)return null;const{providerId:v}=y,M=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const K=null===(p=null===(h=qe(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(K)return new Fa(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!v)return null;switch(v){case"facebook.com":return new Lh(O,M);case"github.com":return new kc(O,M);case"google.com":return new sd(O,M);case"twitter.com":return new Oc(O,M,y.screenName||null);case"custom":case"anonymous":return new Fa(O,null);default:return new Fa(O,v,M)}}(p)}class Fi{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Fi("enroll",h)}static _fromMfaPendingCredential(h){return new Fi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Fi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(v=h.multiFactorSession)&&void 0!==v&&v.idToken)return Fi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Va{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=wn(h),M=p.customData._serverResponse,O=(M.mfaInfo||[]).map(ce=>Rs._fromServerResponse(v,ce));V(M.mfaPendingCredential,v,"internal-error");const K=Fi._fromMfaPendingCredential(M.mfaPendingCredential);return new Va(K,O,function(){var ce=(0,m.Z)(function*(Fe){const Qe=yield Fe._process(v,K);delete M.mfaInfo,delete M.mfaPendingCredential;const yt=Object.assign(Object.assign({},M),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(p.operationType){case"signIn":const ut=yield Qr._fromIdTokenResponse(v,p.operationType,yt);return yield v._updateCurrentUser(ut.user),ut;case"reauthenticate":return V(p.user,v,"internal-error"),Qr._forOperation(p.user,p.operationType,yt);default:Ae(v,"internal-error")}});return function(Fe){return ce.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}function Bh(y,h){return rn(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,h))}class Ba{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Rs._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Ba(h)}getSession(){var h=this;return(0,m.Z)(function*(){return Fi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,m.Z)(function*(){const M=h,O=yield v.getSession(),K=yield ir(v.user,M._process(v.user.auth,O,p));return yield v.user._updateTokensIfNecessary(K),v.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){var v;const M="string"==typeof h?h:h.uid,O=yield p.user.getIdToken(),K=yield ir(p.user,function hy(y,h){return rn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,h))}(p.user.auth,{idToken:O,mfaEnrollmentId:M}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ce})=>ce!==M),yield p.user._updateTokensIfNecessary(K);try{yield p.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(v=ce)||void 0===v?void 0:v.code))throw ce}})()}}const ja=new WeakMap,Ns="__sak";class ud{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ns,"1"),this.storage.removeItem(Ns),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const za=(()=>{class y extends ud{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jh(){const y=(0,N.z$)();return sr(y)||ci(y)}()&&function Ds(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ia(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const M=this.storage.getItem(v),O=this.localCache[v];M!==O&&p(v,O,M)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ce,Fe,Qe)=>{this.notifyListeners(ce,Qe)});const M=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(p.newValue!==ce)null!==p.newValue?this.storage.setItem(M,p.newValue):this.storage.removeItem(M);else if(this.localCache[M]===p.newValue&&!v)return}const O=()=>{const ce=this.storage.getItem(M);!v&&this.localCache[M]===ce||this.notifyListeners(M,ce)},K=this.storage.getItem(M);!function vn(){return(0,N.w1)()&&10===document.documentMode}()||K===p.newValue||p.newValue===p.oldValue?O():setTimeout(O,10)}notifyListeners(p,v){this.localCache[p]=v;const M=this.listeners[p];if(M)for(const O of Array.from(M))O(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var M=()=>super._set,O=this;return(0,m.Z)(function*(){yield M().call(O,p,v),O.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,M=this;return(0,m.Z)(function*(){const O=yield v().call(M,p);return M.localCache[p]=JSON.stringify(O),O})()}_remove(p){var v=()=>super._remove,M=this;return(0,m.Z)(function*(){yield v().call(M,p),delete M.localCache[p]})()}}return y.type="LOCAL",y})(),io=(()=>{class y extends ud{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let Pn=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(O=>O.isListeningto(p));if(v)return v;const M=new y(p);return this.receivers.push(M),M}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,m.Z)(function*(){const M=p,{eventId:O,eventType:K,data:ce}=M.data,Fe=v.handlersMap[K];if(!Fe?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const Qe=Array.from(Fe).map(function(){var ut=(0,m.Z)(function*(Tn){return Tn(M.origin,ce)});return function(Tn){return ut.apply(this,arguments)}}()),yt=yield function ld(y){return Promise.all(y.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Qe);M.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:yt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ht(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Cn{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var M=this;return(0,m.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,ce;return new Promise((Fe,Qe)=>{const yt=Ht("",20);O.port1.start();const ut=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);ce={messageChannel:O,onMessage(Tn){const fs=Tn;if(fs.data.eventId===yt)switch(fs.data.status){case"ack":clearTimeout(ut),K=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Fe(fs.data.response);break;default:clearTimeout(ut),clearTimeout(K),Qe(new Error("invalid_response"))}}},M.handlers.add(ce),O.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:h,eventId:yt,data:p},[O.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function Bn(){return window}function Zo(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function qo(){return(qo=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const os="firebaseLocalStorageDb",oo="firebaseLocalStorage",Nc="fbase_key";class ao{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function bi(y,h){return y.transaction([oo],h?"readwrite":"readonly").objectStore(oo)}function jn(){const y=indexedDB.open(os,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(oo,{keyPath:Nc})}catch(M){p(M)}}),y.addEventListener("success",(0,m.Z)(function*(){const v=y.result;v.objectStoreNames.contains(oo)?h(v):(v.close(),yield function uo(){const y=indexedDB.deleteDatabase(os);return new ao(y).toPromise()}(),h(yield jn()))}))})}function Ga(y,h,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(y,h,p){const v=bi(y,!0).put({[Nc]:h,value:p});return new ao(v).toPromise()})).apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(y,h){const p=bi(y,!1).get(h),v=yield new ao(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function co(y,h){const p=bi(y,!0).delete(h);return new ao(p).toPromise()}const Fn=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield jn()),p.db})()}_withRetries(p){var v=this;return(0,m.Z)(function*(){let M=0;for(;;)try{const O=yield v._openDb();return yield p(O)}catch(O){if(M++>3)throw O;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Zo()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=Pn._getInstance(function cn(){return Zo()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,m.Z)(function*(M,O){return{keyProcessed:(yield p._poll()).includes(O.key)}});return function(M,O){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,m.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var v,M;if(p.activeServiceWorker=yield function Ha(){return qo.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Cn(p.activeServiceWorker);const O=yield p.sender._send("ping",{},800);!O||(null===(v=O[0])||void 0===v?void 0:v.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,m.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Pu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield jn();return yield Ga(p,Ns,"1"),yield co(p,Ns),!0}catch{}return!1})()}_withPendingWrite(p){var v=this;return(0,m.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var M=this;return(0,m.Z)(function*(){return M._withPendingWrite((0,m.Z)(function*(){return yield M._withRetries(O=>Ga(O,p,v)),M.localCache[p]=v,M.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,m.Z)(function*(){const M=yield v._withRetries(O=>function Ps(y,h){return Yo.apply(this,arguments)}(O,p));return v.localCache[p]=M,M})()}_remove(p){var v=this;return(0,m.Z)(function*(){return v._withPendingWrite((0,m.Z)(function*(){return yield v._withRetries(M=>co(M,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const v=yield p._withRetries(K=>{const ce=bi(K,!1).getAll();return new ao(ce).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:K,value:ce}of v)O.add(K),JSON.stringify(p.localCache[K])!==JSON.stringify(ce)&&(p.notifyListeners(K,ce),M.push(K));for(const K of Object.keys(p.localCache))p.localCache[K]&&!O.has(K)&&(p.notifyListeners(K,null),M.push(K));return M})()}notifyListeners(p,v){this.localCache[p]=v;const M=this.listeners[p];if(M)for(const O of Array.from(M))O(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ls(y,h){return rn(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,h))}function Ar(){return(Ar=(0,m.Z)(function*(y){return(yield rn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Di(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=M=>{const O=ve("internal-error");O.customData=M,p(O)},v.type="text/javascript",v.charset="UTF-8",function Fs(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Pc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Qo=1e12;class $h{constructor(h){this.auth=h,this.counter=Qo,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Up(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||Qo;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Qo))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var v;return null===(v=p._widgets.get(h||Qo))||void 0===v||v.execute(),""})()}}class Up{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof h?document.getElementById(h):h;V(M,"argument-error",{appName:p}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vp(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zh=Pc("rcb"),Bp=new nn(3e4,6e4);class lo{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Bn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function fy(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Bn().grecaptcha):new Promise((v,M)=>{const O=Bn().setTimeout(()=>{M(ve(h,"network-request-failed"))},Bp.get());Bn()[zh]=()=>{Bn().clearTimeout(O),delete Bn()[zh];const ce=Bn().grecaptcha;if(!ce)return void M(ve(h,"internal-error"));const Fe=ce.render;ce.render=(Qe,yt)=>{const ut=Fe(Qe,yt);return this.counter++,ut},this.hostLanguage=p,v(ce)},Di(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:zh,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(O),M(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Bn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hh{load(h){return(0,m.Z)(function*(){return new $h(h)})()}clearedOneInstance(){}}const zn="recaptcha",dd={theme:"light",type:"image"};class Lu{constructor(h,p=Object.assign({},dd),v){this.parameters=p,this.type=zn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wn(v),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof h?document.getElementById(h):h;V(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hh:new lo,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(O=>{const K=ce=>{!ce||(h.tokenChangeListeners.delete(K),O(ce))};h.tokenChangeListeners.add(K),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=Bn()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){V(dt()&&!Zo(),h.auth,"internal-error"),yield function $p(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Mr(y){return Ar.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hd{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Po._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function pi(){return(pi=(0,m.Z)(function*(y,h,p){const v=wn(y),M=yield Lc(v,h,(0,N.m9)(p));return new hd(M,O=>Dn(v,O))})).apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y);yield Ei(!1,v,"phone");const M=yield Lc(v.auth,h,(0,N.m9)(p));return new hd(M,O=>Cu(v,O))})).apply(this,arguments)}function Uu(){return(Uu=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y),M=yield Lc(v.auth,h,(0,N.m9)(p));return new hd(M,O=>eo(v,O))})).apply(this,arguments)}function Lc(y,h,p){return pd.apply(this,arguments)}function pd(){return(pd=(0,m.Z)(function*(y,h,p){var v;const M=yield p.verify();try{let O;if(V("string"==typeof M,y,"argument-error"),V(p.type===zn,y,"argument-error"),O="string"==typeof h?{phoneNumber:h}:h,"session"in O){const K=O.session;if("phoneNumber"in O)return V("enroll"===K.type,y,"internal-error"),(yield Bh(y,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{V("signin"===K.type,y,"internal-error");const ce=(null===(v=O.multiFactorHint)||void 0===v?void 0:v.uid)||O.multiFactorUid;return V(ce,y,"missing-multi-factor-info"),(yield Ls(y,{mfaPendingCredential:K.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield Np(y,{phoneNumber:O.phoneNumber,recaptchaToken:M});return K}}finally{p._reset()}})).apply(this,arguments)}function gd(){return(gd=(0,m.Z)(function*(y,h){yield pr((0,N.m9)(y),h)})).apply(this,arguments)}let us=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=wn(p)}verifyPhoneNumber(p,v){return Lc(this.auth,p,(0,N.m9)(v))}static credential(p,v){return Po._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:M}=p;return v&&M?Po._fromTokenResponse(v,M):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function mn(y,h){return h?ae(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Wa extends Ys{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Qn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Qn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Qn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function cs(y){return jo(y.auth,new Wa(y),y.bypassAuthState)}function Fc(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),rs(p,new Wa(y),y.bypassAuthState)}function Vu(y){return ho.apply(this,arguments)}function ho(){return(ho=(0,m.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),pr(p,new Wa(y),y.bypassAuthState)})).apply(this,arguments)}class Us{constructor(h,p,v,M,O=!1){this.auth=h,this.resolver=v,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(v,M){h.pendingPromise={resolve:v,reject:M};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(O){h.reject(O)}});return function(v,M){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:v,sessionId:M,postBody:O,tenantId:K,error:ce,type:Fe}=h;if(ce)return void p.reject(ce);const Qe={auth:p.auth,requestUri:v,sessionId:M,tenantId:K||void 0,postBody:O||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Qe))}catch(yt){p.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return cs;case"linkViaPopup":case"linkViaRedirect":return Vu;case"reauthViaPopup":case"reauthViaRedirect":return Fc;default:Ae(this.auth,"internal-error")}}resolve(h){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bu=new nn(2e3,1e4);function Xo(){return(Xo=(0,m.Z)(function*(y,h,p){const v=wn(y);je(y,h,Ni);const M=mn(v,p);return new Vs(v,"signInViaPopup",h,M).executeNotNull()})).apply(this,arguments)}function Sr(){return(Sr=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y);je(v.auth,h,Ni);const M=mn(v.auth,p);return new Vs(v.auth,"reauthViaPopup",h,M,v).executeNotNull()})).apply(this,arguments)}function Za(){return(Za=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y);je(v.auth,h,Ni);const M=mn(v.auth,p);return new Vs(v.auth,"linkViaPopup",h,M,v).executeNotNull()})).apply(this,arguments)}let Vs=(()=>{class y extends Us{constructor(p,v,M,O,K){super(p,v,O,K),this.provider=M,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const v=yield p.execute();return V(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,m.Z)(function*(){Y(1===p.filter.length,"Popup operations only handle one event");const v=Ht();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(M=>{p.reject(M)}),p.resolver._isIframeWebStorageSupported(p.auth,M=>{M||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,M;this.pollId=null!==(M=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Bu.get())};p()}}return y.currentPopupAction=null,y})();const cr=new Map;class fo extends Us{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let v=cr.get(p.auth._key());if(!v){try{const O=(yield function yr(y,h){return _r.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(O)}catch(M){v=()=>Promise.reject(M)}cr.set(p.auth._key(),v)}return p.bypassAuthState||cr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const M=yield v.auth._redirectUserForId(h.eventId);if(M)return v.user=M,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function _r(){return(_r=(0,m.Z)(function*(y,h){const p=Vc(h),v=En(y);if(!(yield v._isAvailable()))return!1;const M="true"===(yield v._get(p));return yield v._remove(p),M})).apply(this,arguments)}function $u(y,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(y,h){return En(y)._set(Vc(h),"true")})).apply(this,arguments)}function Uc(y,h){cr.set(y._key(),h)}function En(y){return ae(y._redirectPersistence)}function Vc(y){return Yn("pendingRedirect",y.config.apiKey,y.name)}function b(){return(b=(0,m.Z)(function*(y,h,p){const v=wn(y);je(y,h,Ni);const M=mn(v,p);return yield $u(M,v),M._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y);je(v.auth,h,Ni);const M=mn(v.auth,p);yield $u(M,v.auth);const O=yield at(v);return M._openRedirect(v.auth,h,"reauthViaRedirect",O)})).apply(this,arguments)}function Me(){return(Me=(0,m.Z)(function*(y,h,p){const v=(0,N.m9)(y);je(v.auth,h,Ni);const M=mn(v.auth,p);yield Ei(!1,v,h.providerId),yield $u(M,v.auth);const O=yield at(v);return M._openRedirect(v.auth,h,"linkViaRedirect",O)})).apply(this,arguments)}function mt(){return(mt=(0,m.Z)(function*(y,h){return yield wn(y)._initializationPromise,nt(y,h,!1)})).apply(this,arguments)}function nt(y,h){return ft.apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(y,h,p=!1){const v=wn(y),M=mn(v,h),K=yield new fo(v,M,p).execute();return K&&!p&&(delete K.user._redirectEventId,yield v._persistUserIfCurrent(K.user),yield v._setRedirectUser(null,h)),K})).apply(this,arguments)}function at(y){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(y){const h=Ht(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class ea{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function md(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ci(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Ci(h)){const M=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,M))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gi(h))}saveEventToCache(h){this.cachedEventUids.add(gi(h)),this.lastProcessedEventTime=Date.now()}}function gi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Ci({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Bc(y){return ls.apply(this,arguments)}function ls(){return(ls=(0,m.Z)(function*(y,h={}){return rn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const js=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$s=/^https?/;function Ut(){return(Ut=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Bc(y);for(const p of h)try{if(jc(p))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function jc(y){const h=Oe(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const K=new URL(y);return""===K.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&K.hostname===v}if(!$s.test(p))return!1;if(js.test(y))return v===y;const M=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(v)}const yd=new nn(3e4,6e4);function go(){const y=Bn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Hu=null;function zp(y){return Hu=Hu||function py(y){return new Promise((h,p)=>{var v,M,O;function K(){go(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{go(),p(ve(y,"network-request-failed"))},timeout:yd.get()})}if(null!==(M=null===(v=Bn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==M&&M.Iframe)h(gapi.iframes.getContext());else{if(null===(O=Bn().gapi)||void 0===O||!O.load){const ce=Pc("iframefcb");return Bn()[ce]=()=>{gapi.load?K():p(ve(y,"network-request-failed"))},Di(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Fe=>p(Fe))}K()}}).catch(h=>{throw Hu=null,h})}(y),Hu}const Hp=new nn(5e3,15e3),Gp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$c=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _d(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?Sn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ue.SDK_VERSION},M=$c.get(y.config.apiHost);M&&(v.eid=M);const O=y._getFrameworks();return O.length&&(v.fw=O.join(",")),`${p}?${(0,N.xO)(v).slice(1)}`}function ds(){return ds=(0,m.Z)(function*(y){const h=yield zp(y),p=Bn().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:_d(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gp,dontclear:!0},v=>new Promise(function(){var M=(0,m.Z)(function*(O,K){yield v.restyle({setHideOnLeave:!1});const ce=ve(y,"network-request-failed"),Fe=Bn().setTimeout(()=>{K(ce)},Hp.get());function Qe(){Bn().clearTimeout(Fe),O(v)}v.ping(Qe).then(Qe,()=>{K(ce)})});return function(O,K){return M.apply(this,arguments)}}()))}),ds.apply(this,arguments)}const Wp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gu{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kh(y,h,p,v,M,O){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const K={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ue.SDK_VERSION,eventId:M};if(h instanceof Ni){h.setDefaultLanguage(y.languageCode),K.providerId=h.providerId||"",(0,N.xb)(h.getCustomParameters())||(K.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Qe]of Object.entries(O||{}))K[Fe]=Qe}if(h instanceof Js){const Fe=h.getScopes().filter(Qe=>""!==Qe);Fe.length>0&&(K.scopes=Fe.join(","))}y.tenantId&&(K.tid=y.tenantId);const ce=K;for(const Fe of Object.keys(ce))void 0===ce[Fe]&&delete ce[Fe];return`${function Zh({config:y}){return y.emulator?Sn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(ce).slice(1)}`}const Wu="webStorageSupport";class Qp extends class Ya{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Qp(h)}_finalizeEnroll(h,p,v){return function dy(y,h){return rn(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function ln(y,h){return rn(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fw=(()=>{class y{constructor(){}static assertion(p){return Qp._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var yy="@firebase/auth";class wd{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var M;h((null===(M=v)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ta(){return window}function Xp(){return(Xp=(0,m.Z)(function*(y,h,p){var v;const{BuildInfo:M}=ta();Y(h.sessionId,"AuthEvent did not contain a session ID");const O=yield Ed(h.sessionId),K={};return ci()?K.ibi=M.packageName:_t()?K.apn=M.packageName:Ae(y,"operation-not-supported-in-this-environment"),M.displayName&&(K.appDisplayName=M.displayName),K.sessionId=O,Kh(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,K)})).apply(this,arguments)}function Ja(){return(Ja=(0,m.Z)(function*(y){const{BuildInfo:h}=ta(),p={};ci()?p.iosBundleId=h.packageName:_t()?p.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield Bc(y,p)})).apply(this,arguments)}function hs(){return(hs=(0,m.Z)(function*(y,h,p){const{cordova:v}=ta();let M=()=>{};try{yield new Promise((O,K)=>{let ce=null;function Fe(){var ut;O();const Tn=null===(ut=v.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof Tn&&Tn(),"function"==typeof p?.close&&p.close()}function Qe(){ce||(ce=window.setTimeout(()=>{K(ve(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Fe),document.addEventListener("resume",Qe,!1),_t()&&document.addEventListener("visibilitychange",yt,!1),M=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",yt,!1),ce&&window.clearTimeout(ce)}})}finally{M()}})).apply(this,arguments)}function Ed(y){return bd.apply(this,arguments)}function bd(){return(bd=(0,m.Z)(function*(y){const h=Iy(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Iy(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function Qa(y){(0,ue._registerComponent)(new de.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),M=h.getProvider("heartbeat"),{apiKey:O,authDomain:K}=v.options;return((ce,Fe)=>{V(O&&!O.includes(":"),"invalid-api-key",{appName:ce.name}),V(!K?.includes(":"),"argument-error",{appName:ce.name});const Qe={apiKey:O,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mt(y)},yt=new Ro(ce,Fe,Qe);return function Le(y,h){const p=h?.persistence||[],v=(Array.isArray(p)?p:[p]).map(ae);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,h?.popupRedirectResolver)}(yt,p),yt})(v,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new de.wA("auth-internal",h=>{const p=wn(h.getProvider("auth").getImmediate());return new wd(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(yy,"0.20.5",function Id(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(yy,"0.20.5","esm2017")}("Browser");class na extends ea{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function Xa(y){return qh.apply(this,arguments)}function qh(){return(qh=(0,m.Z)(function*(y){const h=yield Yh()._get(Qh(y));return h&&(yield Yh()._remove(Qh(y))),h})).apply(this,arguments)}function ng(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Yh(){return ae(za)}function Qh(y){return Yn("authEvent",y.config.apiKey,y.name)}function Gc(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,N.zd)(p.join("?"))}function rg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function ra(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function eu(y=(0,N.z$)()){return!("file:"!==ra()&&"ionic:"!==ra()&&"capacitor:"!==ra()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ag(){try{const y=self.localStorage,h=Ht();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Kc(y=(0,N.z$)()){return function og(){return(0,N.w1)()&&11===document?.documentMode}()||function My(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch{return tu()&&(0,N.hl)()}return!1}function tu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ia(){return(function yo(){return"http:"===ra()||"https:"===ra()}()||(0,N.ru)()||eu())&&!function sg(){return(0,N.b$)()||(0,N.UG)()}()&&ag()&&!tu()}function Cd(){return eu()&&typeof document<"u"}function Zc(){return(Zc=(0,m.Z)(function*(){return!!Cd()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Fr={LOCAL:"local",NONE:"none",SESSION:"session"},Zu=V,sa="persistence";function ef(y){return nu.apply(this,arguments)}function nu(){return(nu=(0,m.Z)(function*(y){yield y._initializationPromise;const h=Md(),p=Yn(sa,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Md(){var y;try{return(null===(y=function Xh(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const oa=V;class _o{constructor(){this.browserResolver=ae(class my{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=io,this._completeRedirectFn=nt,this._overrideRedirectResult=Uc}_openPopup(h,p,v,M){var O=this;return(0,m.Z)(function*(){var K;Y(null===(K=O.eventManagers[h._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ce=Kh(h,p,v,Oe(),M);return function Zp(y,h,p,v=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),K=Math.max((window.screen.availWidth-v)/2,0).toString();let ce="";const Fe=Object.assign(Object.assign({},Wp),{width:v.toString(),height:M.toString(),top:O,left:K}),Qe=(0,N.z$)().toLowerCase();p&&(ce=hr(Qe)?"_blank":p),pn(Qe)&&(h=h||"http://localhost",Fe.scrollbars="yes");const yt=Object.entries(Fe).reduce((Tn,[fs,el])=>`${Tn}${fs}=${el},`,"");if(function wi(y=(0,N.z$)()){var h;return ci(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ce)return function qp(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",ce),new Gu(null);const ut=window.open(h||"",ce,yt);V(ut,y,"popup-blocked");try{ut.focus()}catch{}return new Gu(ut)}(h,ce,Ht())})()}_openRedirect(h,p,v,M){var O=this;return(0,m.Z)(function*(){return yield O._originValidation(h),function so(y){Bn().location.href=y}(Kh(h,p,v,Oe(),M)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:M,promise:O}=this.eventManagers[p];return M?Promise.resolve(M):(Y(O,"If manager is not set, promise should be"),O)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const v=yield function zc(y){return ds.apply(this,arguments)}(h),M=new ea(h);return v.register("authEvent",O=>(V(O?.authEvent,h,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:M},p.iframes[h._key()]=v,M})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Wu,{type:Wu},M=>{var O;const K=null===(O=M?.[0])||void 0===O?void 0:O[Wu];void 0!==K&&p(!!K),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function zs(y){return Ut.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ia()||sr()||ci()}}),this.cordovaResolver=ae(class Cy{constructor(){this._redirectPersistence=io,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nt,this._overrideRedirectResult=Uc}_initialize(h){var p=this;return(0,m.Z)(function*(){const v=h._key();let M=p.eventManagers.get(v);return M||(M=new na(h),p.eventManagers.set(v,M),p.attachCallbackListeners(h,M)),M})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,M){var O=this;return(0,m.Z)(function*(){!function tg(y){var h,p,v,M,O,K,ce,Fe,Qe,yt;const ut=ta();V("function"==typeof(null===(h=ut?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=ut?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(O=null===(M=null===(v=ut?.cordova)||void 0===v?void 0:v.plugins)||void 0===M?void 0:M.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Fe=null===(ce=null===(K=ut?.cordova)||void 0===K?void 0:K.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(yt=null===(Qe=ut?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const K=yield O._initialize(h);yield K.initialized(),K.resetRedirect(),function po(){cr.clear()}(),yield O._originValidation(h);const ce=function Hc(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:ng(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,v,M);yield function mo(y,h){return Yh()._set(Qh(y),h)}(h,ce);const Fe=yield function Ku(y,h,p){return Xp.apply(this,arguments)}(h,ce,p),Qe=yield function eg(y){const{cordova:h}=ta();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let M=null;v?h.plugins.browsertab.openUrl(y):M=h.InAppBrowser.open(y,function or(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(M)})})}(Fe);return function Ui(y,h,p){return hs.apply(this,arguments)}(h,K,Qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function wy(y){return Ja.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:M,BuildInfo:O}=ta(),K=setTimeout((0,m.Z)(function*(){yield Xa(h),p.onEvent(rg())}),500),ce=function(){var yt=(0,m.Z)(function*(ut){clearTimeout(K);const Tn=yield Xa(h);let fs=null;Tn&&ut?.url&&(fs=function Uw(y,h){var p,v;const M=function Dy(y){const h=Gc(y),p=h.link?decodeURIComponent(h.link):void 0,v=Gc(p).link,M=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Gc(M).link||M||v||p||y}(h);if(M.includes("/__/auth/callback")){const O=Gc(M),K=O.firebaseError?function by(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ce=null===(v=null===(p=K?.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Fe=ce?ve(ce):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:M,postBody:null}}return null}(Tn,ut.url)),p.onEvent(fs||rg())});return function(Tn){return yt.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,ce);const Fe=M,Qe=`${O.packageName.toLowerCase()}://`;ta().handleOpenURL=function(){var yt=(0,m.Z)(function*(ut){if(ut.toLowerCase().startsWith(Qe)&&ce({url:ut}),"function"==typeof Fe)try{Fe(ut)}catch(Tn){console.error(Tn)}});return function(ut){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=io,this._completeRedirectFn=nt,this._overrideRedirectResult=Uc}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,M){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(h,p,v,M)})()}_openRedirect(h,p,v,M){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(h,p,v,M)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Cd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return oa(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Td(){return Zc.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Ad(y){return y.unwrap()}function Sd(y){return Yc(y)}function Yc(y){const{_tokenResponse:h}=y instanceof N.ZR?y.customData:y;if(!h)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return us.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Ma;break;case"facebook.com":v=Uo;break;case"github.com":v=Jl;break;case"twitter.com":v=ed;break;default:const{oauthIdToken:M,oauthAccessToken:O,oauthTokenSecret:K,pendingToken:ce,nonce:Fe}=h;return O||K||M||ce?ce?p.startsWith("saml.")?Aa._create(p,ce):Xi._fromParams({providerId:p,signInMethod:p,pendingToken:ce,idToken:M,accessToken:O}):new Fo(p).credential({idToken:M,accessToken:O,rawNonce:Fe}):null}return y instanceof N.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function er(y,h){return h.catch(p=>{throw p instanceof N.ZR&&function qc(y,h){var p,v;const M=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(v=h)||void 0===v?void 0:v.code))h.resolver=new Bw(y,function ar(y,h){var p;const v=(0,N.m9)(y),M=h;return V(h.customData.operationType,v,"argument-error"),V(null===(p=M.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Va._fromError(v,M)}(y,h));else if(M){const O=Yc(h),K=h;O&&(K.credential=O,K.tenantId=M.tenantId||void 0,K.email=M.email||void 0,K.phoneNumber=M.phoneNumber||void 0)}}(y,p),p}).then(p=>{const M=p.user;return{operationType:p.operationType,credential:Sd(p),additionalUserInfo:Nu(p),user:ua.getOrCreate(M)}})}function Qc(y,h){return qu.apply(this,arguments)}function qu(){return(qu=(0,m.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>er(y,p.confirm(v))}})).apply(this,arguments)}class Bw{constructor(h,p){this.resolver=p,this.auth=function aa(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return er(Ad(this.auth),this.resolver.resolveSignIn(h))}}class ua{constructor(h){this._delegate=h,this.multiFactor=function ad(y){const h=(0,N.m9)(y);return ja.has(h)||ja.set(h,Ba._fromUser(h)),ja.get(h)}(h)}static getOrCreate(h){return ua.USER_MAP.has(h)||ua.USER_MAP.set(h,new ua(h)),ua.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return er(p.auth,Cu(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,m.Z)(function*(){return Qc(v.auth,function fd(y,h,p){return Jo.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return er(p.auth,function ur(y,h,p){return Za.apply(this,arguments)}(p._delegate,h,_o))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield ef(wn(p.auth)),function Q(y,h,p){return function ie(y,h,p){return Me.apply(this,arguments)}(y,h,p)}(p._delegate,h,_o)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return er(p.auth,eo(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Qc(this.auth,function Fu(y,h,p){return Uu.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return er(this.auth,function ju(y,h,p){return Sr.apply(this,arguments)}(this._delegate,h,_o))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield ef(wn(p.auth)),function C(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,_o)})()}sendEmailVerification(h){return function Rc(y,h){return Go.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function Sa(y,h){return ts.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Ph(y,h){return Xn((0,N.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Ou(y,h){return Xn((0,N.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function lt(y,h){return gd.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ku(y,h){return Wo.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Au(y,h,p){return Su.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ua.USER_MAP=new WeakMap;const Jc=V;let Yu=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=p.options;Jc(M,"invalid-api-key",{appName:p.name}),Jc(M,"invalid-api-key",{appName:p.name});const O=typeof window<"u"?_o:void 0;this._delegate=v.initialize({options:{persistence:Ay(M,p.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ua.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function fr(y,h,p){const v=wn(y);V(v._canInitEmulator,v,"emulator-config-failed"),V(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const M=!!p?.disableWarnings,O=Ts(h),{host:K,port:ce}=function Qi(y){const h=Ts(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(v);if(M){const O=M[1];return{host:O,port:Nr(v.substr(O.length+1))}}{const[O,K]=v.split(":");return{host:O,port:Nr(K)}}}(h);v.config.emulator={url:`${O}//${K}${null===ce?"":`:${ce}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:K,port:ce,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Ms(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function ka(y,h){return Ho.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Oa(this._delegate,p)}confirmPasswordReset(p,v){return function di(y,h,p){return Ra.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var M=this;return(0,m.Z)(function*(){return er(M._delegate,function Pi(y,h,p){return Na.apply(this,arguments)}(M._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Mu(y,h){return La.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Sc(y,h){return"EMAIL_SIGNIN"===Ii.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){Jc(ia(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function $e(y,h){return mt.apply(this,arguments)}(p._delegate,_o);return v?er(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Gn(y,h){wn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,M){const{next:O,error:K,complete:ce}=xd(p,v,M);return this._delegate.onAuthStateChanged(O,K,ce)}onIdTokenChanged(p,v,M){const{next:O,error:K,complete:ce}=xd(p,v,M);return this._delegate.onIdTokenChanged(O,K,ce)}sendSignInLinkToEmail(p,v){return function ss(y,h,p){return Ac.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function xa(y,h,p){return ks.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,m.Z)(function*(){let M;switch(function Vw(y,h){Zu(Object.values(Fr).includes(h),y,"invalid-persistence-type"),(0,N.b$)()?Zu(h!==Fr.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?Zu(h===Fr.NONE,y,"unsupported-persistence-type"):tu()?Zu(h===Fr.NONE||h===Fr.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):Zu(h===Fr.NONE||ag(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Fr.SESSION:M=io;break;case Fr.LOCAL:M=(yield ae(Fn)._isAvailable())?Fn:za;break;case Fr.NONE:M=Jt;break;default:return Ae("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return er(this._delegate,function td(y){return Oh.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return er(this._delegate,Dn(this._delegate,p))}signInWithCustomToken(p){return er(this._delegate,function De(y,h){return Pt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return er(this._delegate,function to(y,h,p){return Dn((0,N.m9)(y),Lo.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return er(this._delegate,function rd(y,h,p){return Pa.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Qc(this._delegate,function Lr(y,h,p){return pi.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,m.Z)(function*(){return Jc(ia(),v._delegate,"operation-not-supported-in-this-environment"),er(v._delegate,function Ka(y,h,p){return Xo.apply(this,arguments)}(v._delegate,p,_o))})()}signInWithRedirect(p){var v=this;return(0,m.Z)(function*(){return Jc(ia(),v._delegate,"operation-not-supported-in-this-environment"),yield ef(v._delegate),function zu(y,h,p){return function Rt(y,h,p){return b.apply(this,arguments)}(y,h,p)}(v._delegate,p,_o)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Os(y,h){return Vn.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Fr,y})();function xd(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const M=v;return{next:K=>M(K&&ua.getOrCreate(K)),error:h,complete:p}}function Ay(y,h){const p=function tf(y,h){const p=Md();if(!p)return[];const v=Yn(sa,y,h);switch(p.getItem(v)){case Fr.NONE:return[Jt];case Fr.LOCAL:return[Fn,io];case Fr.SESSION:return[io];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Fn)&&p.push(Fn),typeof window<"u")for(const v of[za,io])p.includes(v)||p.push(v);return p.includes(Jt)||p.push(Jt),p}class nf{constructor(){this.providerId="phone",this._delegate=new us(Ad(ne.Z.auth()))}static credential(h,p){return us.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}nf.PHONE_SIGN_IN_METHOD=us.PHONE_SIGN_IN_METHOD,nf.PROVIDER_ID=us.PROVIDER_ID;const Sy=V;class Xc{constructor(h,p,v=ne.Z.app()){var M;Sy(null===(M=v.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Lu(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rf(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Yu(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Lo,FacebookAuthProvider:Uo,GithubAuthProvider:Jl,GoogleAuthProvider:Ma,OAuthProvider:Fo,SAMLAuthProvider:Pr,PhoneAuthProvider:nf,PhoneMultiFactorGenerator:Fw,RecaptchaVerifier:Xc,TwitterAuthProvider:ed,Auth:Yu,AuthCredential:Ys,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(ne.Z)},9751:(ot,Te,P)=>{P.d(Te,{y:()=>pe});var m=P(930),ne=P(727),N=P(8822),ue=P(9635),oe=P(2416),fe=P(576),de=P(2806);let pe=(()=>{class J{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const Ie=new J;return Ie.source=this,Ie.operator=Se,Ie}subscribe(Se,Ie,Je){const _e=function j(J){return J&&J instanceof m.Lv||function B(J){return J&&(0,fe.m)(J.next)&&(0,fe.m)(J.error)&&(0,fe.m)(J.complete)}(J)&&(0,ne.Nn)(J)}(Se)?Se:new m.Hp(Se,Ie,Je);return(0,de.x)(()=>{const{operator:ge,source:Ye}=this;_e.add(ge?ge.call(_e,Ye):Ye?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Se){try{return this._subscribe(Se)}catch(Ie){Se.error(Ie)}}forEach(Se,Ie){return new(Ie=me(Ie))((Je,_e)=>{const ge=new m.Hp({next:Ye=>{try{Se(Ye)}catch(st){_e(st),ge.unsubscribe()}},error:_e,complete:Je});this.subscribe(ge)})}_subscribe(Se){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Se)}[N.L](){return this}pipe(...Se){return(0,ue.U)(Se)(this)}toPromise(Se){return new(Se=me(Se))((Ie,Je)=>{let _e;this.subscribe(ge=>_e=ge,ge=>Je(ge),()=>Ie(_e))})}}return J.create=Ve=>new J(Ve),J})();function me(J){var Ve;return null!==(Ve=J??oe.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(ot,Te,P)=>{P.d(Te,{x:()=>de});var m=P(9751),ne=P(727);const ue=(0,P(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=P(8737),fe=P(2806);let de=(()=>{class me extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const J=new pe(this,this);return J.operator=j,J}_throwIfClosed(){if(this.closed)throw new ue}next(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(j)}})}error(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:J}=this;for(;J.length;)J.shift().error(j)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:J,isStopped:Ve,observers:Se}=this;return J||Ve?ne.Lc:(this.currentObservers=null,Se.push(j),new ne.w0(()=>{this.currentObservers=null,(0,oe.P)(Se,j)}))}_checkFinalizedStatuses(j){const{hasError:J,thrownError:Ve,isStopped:Se}=this;J?j.error(Ve):Se&&j.complete()}asObservable(){const j=new m.y;return j.source=this,j}}return me.create=(B,j)=>new pe(B,j),me})();class pe extends de{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,J;null===(J=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===J||J.call(j,B)}error(B){var j,J;null===(J=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===J||J.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,J;return null!==(J=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==J?J:ne.Lc}}},930:(ot,Te,P)=>{P.d(Te,{Hp:()=>Je,Lv:()=>J});var m=P(576),ne=P(727),N=P(2416),ue=P(7849),oe=P(5032);const fe=me("C",void 0,void 0);function me(Ae,ve,be){return{kind:Ae,value:ve,error:be}}var B=P(3410),j=P(2806);class J extends ne.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,ne.Nn)(ve)&&ve.add(this)):this.destination=st}static create(ve,be,je){return new Je(ve,be,je)}next(ve){this.isStopped?Ye(function pe(Ae){return me("N",Ae,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ye(function de(Ae){return me("E",void 0,Ae)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ye(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Se(Ae,ve){return Ve.call(Ae,ve)}class Ie{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:be}=this;if(be.next)try{be.next(ve)}catch(je){_e(je)}}error(ve){const{partialObserver:be}=this;if(be.error)try{be.error(ve)}catch(je){_e(je)}else _e(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(be){_e(be)}}}class Je extends J{constructor(ve,be,je){let ze;if(super(),(0,m.m)(ve)||!ve)ze={next:ve??void 0,error:be??void 0,complete:je??void 0};else{let V;this&&N.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),ze={next:ve.next&&Se(ve.next,V),error:ve.error&&Se(ve.error,V),complete:ve.complete&&Se(ve.complete,V)}):ze=ve}this.destination=new Ie(ze)}}function _e(Ae){N.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ae):(0,ue.h)(Ae)}function Ye(Ae,ve){const{onStoppedNotification:be}=N.v;be&&B.z.setTimeout(()=>be(Ae,ve))}const st={closed:!0,next:oe.Z,error:function ge(Ae){throw Ae},complete:oe.Z}},727:(ot,Te,P)=>{P.d(Te,{Lc:()=>fe,w0:()=>oe,Nn:()=>de});var m=P(576);const N=(0,P(3888).d)(me=>function(j){me(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((J,Ve)=>`${Ve+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ue=P(8737);class oe{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Se of j)Se.remove(this);else j.remove(this);const{initialTeardown:J}=this;if((0,m.m)(J))try{J()}catch(Se){B=Se instanceof N?Se.errors:[Se]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Se of Ve)try{pe(Se)}catch(Ie){B=B??[],Ie instanceof N?B=[...B,...Ie.errors]:B.push(Ie)}}if(B)throw new N(B)}}add(B){var j;if(B&&B!==this)if(this.closed)pe(B);else{if(B instanceof oe){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,ue.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,ue.P)(j,B),B instanceof oe&&B._removeParent(this)}}oe.EMPTY=(()=>{const me=new oe;return me.closed=!0,me})();const fe=oe.EMPTY;function de(me){return me instanceof oe||me&&"closed"in me&&(0,m.m)(me.remove)&&(0,m.m)(me.add)&&(0,m.m)(me.unsubscribe)}function pe(me){(0,m.m)(me)?me():me.unsubscribe()}},2416:(ot,Te,P)=>{P.d(Te,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Te,P)=>{P.d(Te,{E:()=>ne});const ne=new(P(9751).y)(oe=>oe.complete())},8996:(ot,Te,P)=>{P.d(Te,{D:()=>ve});var m=P(8421),ne=P(5363),N=P(9468),fe=P(9751),pe=P(2202),me=P(576),B=P(9672);function J(be,je){if(!be)throw new Error("Iterable cannot be null");return new fe.y(ze=>{(0,B.f)(ze,je,()=>{const V=be[Symbol.asyncIterator]();(0,B.f)(ze,je,()=>{V.next().then(ye=>{ye.done?ze.complete():ze.next(ye.value)})},0,!0)})})}var Ve=P(3670),Se=P(8239),Ie=P(1144),Je=P(6495),_e=P(2206),ge=P(4532),Ye=P(3260);function ve(be,je){return je?function Ae(be,je){if(null!=be){if((0,Ve.c)(be))return function ue(be,je){return(0,m.Xf)(be).pipe((0,N.R)(je),(0,ne.Q)(je))}(be,je);if((0,Ie.z)(be))return function de(be,je){return new fe.y(ze=>{let V=0;return je.schedule(function(){V===be.length?ze.complete():(ze.next(be[V++]),ze.closed||this.schedule())})})}(be,je);if((0,Se.t)(be))return function oe(be,je){return(0,m.Xf)(be).pipe((0,N.R)(je),(0,ne.Q)(je))}(be,je);if((0,_e.D)(be))return J(be,je);if((0,Je.T)(be))return function j(be,je){return new fe.y(ze=>{let V;return(0,B.f)(ze,je,()=>{V=be[pe.h](),(0,B.f)(ze,je,()=>{let ye,Y;try{({value:ye,done:Y}=V.next())}catch(ee){return void ze.error(ee)}Y?ze.complete():ze.next(ye)},0,!0)}),()=>(0,me.m)(V?.return)&&V.return()})}(be,je);if((0,Ye.L)(be))return function st(be,je){return J((0,Ye.Q)(be),je)}(be,je)}throw(0,ge.z)(be)}(be,je):(0,m.Xf)(be)}},8421:(ot,Te,P)=>{P.d(Te,{Xf:()=>Ve});var m=P(655),ne=P(1144),N=P(8239),ue=P(9751),oe=P(3670),fe=P(2206),de=P(4532),pe=P(6495),me=P(3260),B=P(576),j=P(7849),J=P(8822);function Ve(Ae){if(Ae instanceof ue.y)return Ae;if(null!=Ae){if((0,oe.c)(Ae))return function Se(Ae){return new ue.y(ve=>{const be=Ae[J.L]();if((0,B.m)(be.subscribe))return be.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,ne.z)(Ae))return function Ie(Ae){return new ue.y(ve=>{for(let be=0;be<Ae.length&&!ve.closed;be++)ve.next(Ae[be]);ve.complete()})}(Ae);if((0,N.t)(Ae))return function Je(Ae){return new ue.y(ve=>{Ae.then(be=>{ve.closed||(ve.next(be),ve.complete())},be=>ve.error(be)).then(null,j.h)})}(Ae);if((0,fe.D)(Ae))return ge(Ae);if((0,pe.T)(Ae))return function _e(Ae){return new ue.y(ve=>{for(const be of Ae)if(ve.next(be),ve.closed)return;ve.complete()})}(Ae);if((0,me.L)(Ae))return function Ye(Ae){return ge((0,me.Q)(Ae))}(Ae)}throw(0,de.z)(Ae)}function ge(Ae){return new ue.y(ve=>{(function st(Ae,ve){var be,je,ze,V;return(0,m.mG)(this,void 0,void 0,function*(){try{for(be=(0,m.KL)(Ae);!(je=yield be.next()).done;)if(ve.next(je.value),ve.closed)return}catch(ye){ze={error:ye}}finally{try{je&&!je.done&&(V=be.return)&&(yield V.call(be))}finally{if(ze)throw ze.error}}ve.complete()})})(Ae,ve).catch(be=>ve.error(be))})}},6451:(ot,Te,P)=>{P.d(Te,{T:()=>fe});var m=P(8189),ne=P(8421),N=P(515),ue=P(7669),oe=P(8996);function fe(...de){const pe=(0,ue.yG)(de),me=(0,ue._6)(de,1/0),B=de;return B.length?1===B.length?(0,ne.Xf)(B[0]):(0,m.J)(me)((0,oe.D)(B,pe)):N.E}},5403:(ot,Te,P)=>{P.d(Te,{x:()=>ne});var m=P(930);function ne(ue,oe,fe,de,pe){return new N(ue,oe,fe,de,pe)}class N extends m.Lv{constructor(oe,fe,de,pe,me,B){super(oe),this.onFinalize=me,this.shouldUnsubscribe=B,this._next=fe?function(j){try{fe(j)}catch(J){oe.error(J)}}:super._next,this._error=pe?function(j){try{pe(j)}catch(J){oe.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(j){oe.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(ot,Te,P)=>{P.d(Te,{U:()=>N});var m=P(4482),ne=P(5403);function N(ue,oe){return(0,m.e)((fe,de)=>{let pe=0;fe.subscribe((0,ne.x)(de,me=>{de.next(ue.call(oe,me,pe++))}))})}},8189:(ot,Te,P)=>{P.d(Te,{J:()=>N});var m=P(5577),ne=P(4671);function N(ue=1/0){return(0,m.z)(ne.y,ue)}},5577:(ot,Te,P)=>{P.d(Te,{z:()=>pe});var m=P(4004),ne=P(8421),N=P(4482),ue=P(9672),oe=P(5403),de=P(576);function pe(me,B,j=1/0){return(0,de.m)(B)?pe((J,Ve)=>(0,m.U)((Se,Ie)=>B(J,Se,Ve,Ie))((0,ne.Xf)(me(J,Ve))),j):("number"==typeof B&&(j=B),(0,N.e)((J,Ve)=>function fe(me,B,j,J,Ve,Se,Ie,Je){const _e=[];let ge=0,Ye=0,st=!1;const Ae=()=>{st&&!_e.length&&!ge&&B.complete()},ve=je=>ge<J?be(je):_e.push(je),be=je=>{Se&&B.next(je),ge++;let ze=!1;(0,ne.Xf)(j(je,Ye++)).subscribe((0,oe.x)(B,V=>{Ve?.(V),Se?ve(V):B.next(V)},()=>{ze=!0},void 0,()=>{if(ze)try{for(ge--;_e.length&&ge<J;){const V=_e.shift();Ie?(0,ue.f)(B,Ie,()=>be(V)):be(V)}Ae()}catch(V){B.error(V)}}))};return me.subscribe((0,oe.x)(B,ve,()=>{st=!0,Ae()})),()=>{Je?.()}}(J,Ve,me,j)))}},5363:(ot,Te,P)=>{P.d(Te,{Q:()=>ue});var m=P(9672),ne=P(4482),N=P(5403);function ue(oe,fe=0){return(0,ne.e)((de,pe)=>{de.subscribe((0,N.x)(pe,me=>(0,m.f)(pe,oe,()=>pe.next(me),fe),()=>(0,m.f)(pe,oe,()=>pe.complete(),fe),me=>(0,m.f)(pe,oe,()=>pe.error(me),fe)))})}},3099:(ot,Te,P)=>{P.d(Te,{B:()=>oe});var m=P(8421),ne=P(7579),N=P(930),ue=P(4482);function oe(de={}){const{connector:pe=(()=>new ne.x),resetOnError:me=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=de;return J=>{let Ve,Se,Ie,Je=0,_e=!1,ge=!1;const Ye=()=>{Se?.unsubscribe(),Se=void 0},st=()=>{Ye(),Ve=Ie=void 0,_e=ge=!1},Ae=()=>{const ve=Ve;st(),ve?.unsubscribe()};return(0,ue.e)((ve,be)=>{Je++,!ge&&!_e&&Ye();const je=Ie=Ie??pe();be.add(()=>{Je--,0===Je&&!ge&&!_e&&(Se=fe(Ae,j))}),je.subscribe(be),!Ve&&Je>0&&(Ve=new N.Hp({next:ze=>je.next(ze),error:ze=>{ge=!0,Ye(),Se=fe(st,me,ze),je.error(ze)},complete:()=>{_e=!0,Ye(),Se=fe(st,B),je.complete()}}),(0,m.Xf)(ve).subscribe(Ve))})(J)}}function fe(de,pe,...me){if(!0===pe)return void de();if(!1===pe)return;const B=new N.Hp({next:()=>{B.unsubscribe(),de()}});return pe(...me).subscribe(B)}},9468:(ot,Te,P)=>{P.d(Te,{R:()=>ne});var m=P(4482);function ne(N,ue=0){return(0,m.e)((oe,fe)=>{fe.add(N.schedule(()=>oe.subscribe(fe),ue))})}},8505:(ot,Te,P)=>{P.d(Te,{b:()=>oe});var m=P(576),ne=P(4482),N=P(5403),ue=P(4671);function oe(fe,de,pe){const me=(0,m.m)(fe)||de||pe?{next:fe,error:de,complete:pe}:fe;return me?(0,ne.e)((B,j)=>{var J;null===(J=me.subscribe)||void 0===J||J.call(me);let Ve=!0;B.subscribe((0,N.x)(j,Se=>{var Ie;null===(Ie=me.next)||void 0===Ie||Ie.call(me,Se),j.next(Se)},()=>{var Se;Ve=!1,null===(Se=me.complete)||void 0===Se||Se.call(me),j.complete()},Se=>{var Ie;Ve=!1,null===(Ie=me.error)||void 0===Ie||Ie.call(me,Se),j.error(Se)},()=>{var Se,Ie;Ve&&(null===(Se=me.unsubscribe)||void 0===Se||Se.call(me)),null===(Ie=me.finalize)||void 0===Ie||Ie.call(me)}))}):ue.y}},4408:(ot,Te,P)=>{P.d(Te,{o:()=>oe});var m=P(727);class ne extends m.w0{constructor(de,pe){super()}schedule(de,pe=0){return this}}const N={setInterval(fe,de,...pe){const{delegate:me}=N;return me?.setInterval?me.setInterval(fe,de,...pe):setInterval(fe,de,...pe)},clearInterval(fe){const{delegate:de}=N;return(de?.clearInterval||clearInterval)(fe)},delegate:void 0};var ue=P(8737);class oe extends ne{constructor(de,pe){super(de,pe),this.scheduler=de,this.work=pe,this.pending=!1}schedule(de,pe=0){if(this.closed)return this;this.state=de;const me=this.id,B=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(B,me,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId(B,this.id,pe),this}requestAsyncId(de,pe,me=0){return N.setInterval(de.flush.bind(de,this),me)}recycleAsyncId(de,pe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return pe;N.clearInterval(pe)}execute(de,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(de,pe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,pe){let B,me=!1;try{this.work(de)}catch(j){me=!0,B=j||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:de,scheduler:pe}=this,{actions:me}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(me,this),null!=de&&(this.id=this.recycleAsyncId(pe,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Te,P)=>{P.d(Te,{v:()=>N});var m=P(6063);class ne{constructor(oe,fe=ne.now){this.schedulerActionCtor=oe,this.now=fe}schedule(oe,fe=0,de){return new this.schedulerActionCtor(this,oe).schedule(de,fe)}}ne.now=m.l.now;class N extends ne{constructor(oe,fe=ne.now){super(oe,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:fe}=this;if(this._active)return void fe.push(oe);let de;this._active=!0;do{if(de=oe.execute(oe.state,oe.delay))break}while(oe=fe.shift());if(this._active=!1,de){for(;oe=fe.shift();)oe.unsubscribe();throw de}}}},4986:(ot,Te,P)=>{P.d(Te,{z:()=>N});var m=P(4408);const N=new(P(7565).v)(m.o)},6063:(ot,Te,P)=>{P.d(Te,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ot,Te,P)=>{P.d(Te,{z:()=>m});const m={setTimeout(ne,N,...ue){const{delegate:oe}=m;return oe?.setTimeout?oe.setTimeout(ne,N,...ue):setTimeout(ne,N,...ue)},clearTimeout(ne){const{delegate:N}=m;return(N?.clearTimeout||clearTimeout)(ne)},delegate:void 0}},2202:(ot,Te,P)=>{P.d(Te,{h:()=>ne});const ne=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Te,P)=>{P.d(Te,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Te,P)=>{P.d(Te,{_6:()=>fe,jO:()=>ue,yG:()=>oe});var m=P(576);function N(de){return de[de.length-1]}function ue(de){return(0,m.m)(N(de))?de.pop():void 0}function oe(de){return function ne(de){return de&&(0,m.m)(de.schedule)}(N(de))?de.pop():void 0}function fe(de,pe){return"number"==typeof N(de)?de.pop():pe}},8737:(ot,Te,P)=>{function m(ne,N){if(ne){const ue=ne.indexOf(N);0<=ue&&ne.splice(ue,1)}}P.d(Te,{P:()=>m})},3888:(ot,Te,P)=>{function m(ne){const ue=ne(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}P.d(Te,{d:()=>m})},2806:(ot,Te,P)=>{P.d(Te,{O:()=>ue,x:()=>N});var m=P(2416);let ne=null;function N(oe){if(m.v.useDeprecatedSynchronousErrorHandling){const fe=!ne;if(fe&&(ne={errorThrown:!1,error:null}),oe(),fe){const{errorThrown:de,error:pe}=ne;if(ne=null,de)throw pe}}else oe()}function ue(oe){m.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=oe)}},9672:(ot,Te,P)=>{function m(ne,N,ue,oe=0,fe=!1){const de=N.schedule(function(){ue(),fe?ne.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(ne.add(de),!fe)return de}P.d(Te,{f:()=>m})},4671:(ot,Te,P)=>{function m(ne){return ne}P.d(Te,{y:()=>m})},1144:(ot,Te,P)=>{P.d(Te,{z:()=>m});const m=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(ot,Te,P)=>{P.d(Te,{D:()=>ne});var m=P(576);function ne(N){return Symbol.asyncIterator&&(0,m.m)(N?.[Symbol.asyncIterator])}},576:(ot,Te,P)=>{function m(ne){return"function"==typeof ne}P.d(Te,{m:()=>m})},3670:(ot,Te,P)=>{P.d(Te,{c:()=>N});var m=P(8822),ne=P(576);function N(ue){return(0,ne.m)(ue[m.L])}},6495:(ot,Te,P)=>{P.d(Te,{T:()=>N});var m=P(2202),ne=P(576);function N(ue){return(0,ne.m)(ue?.[m.h])}},8239:(ot,Te,P)=>{P.d(Te,{t:()=>ne});var m=P(576);function ne(N){return(0,m.m)(N?.then)}},3260:(ot,Te,P)=>{P.d(Te,{L:()=>ue,Q:()=>N});var m=P(655),ne=P(576);function N(oe){return(0,m.FC)(this,arguments,function*(){const de=oe.getReader();try{for(;;){const{value:pe,done:me}=yield(0,m.qq)(de.read());if(me)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(pe)}}finally{de.releaseLock()}})}function ue(oe){return(0,ne.m)(oe?.getReader)}},4482:(ot,Te,P)=>{P.d(Te,{A:()=>ne,e:()=>N});var m=P(576);function ne(ue){return(0,m.m)(ue?.lift)}function N(ue){return oe=>{if(ne(oe))return oe.lift(function(fe){try{return ue(fe,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ot,Te,P)=>{function m(){}P.d(Te,{Z:()=>m})},9635:(ot,Te,P)=>{P.d(Te,{U:()=>N,z:()=>ne});var m=P(4671);function ne(...ue){return N(ue)}function N(ue){return 0===ue.length?m.y:1===ue.length?ue[0]:function(fe){return ue.reduce((de,pe)=>pe(de),fe)}}},7849:(ot,Te,P)=>{P.d(Te,{h:()=>N});var m=P(2416),ne=P(3410);function N(ue){ne.z.setTimeout(()=>{const{onUnhandledError:oe}=m.v;if(!oe)throw ue;oe(ue)})}},4532:(ot,Te,P)=>{function m(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Te,{z:()=>m})},655:(ot,Te,P)=>{function ue(Y,ee){var ae={};for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&ee.indexOf(re)<0&&(ae[re]=Y[re]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(re=Object.getOwnPropertySymbols(Y);Le<re.length;Le++)ee.indexOf(re[Le])<0&&Object.prototype.propertyIsEnumerable.call(Y,re[Le])&&(ae[re[Le]]=Y[re[Le]])}return ae}function pe(Y,ee,ae,re){return new(ae||(ae=Promise))(function(Oe,dt){function Wt(nn){try{Ge(re.next(nn))}catch(Sn){dt(Sn)}}function jt(nn){try{Ge(re.throw(nn))}catch(Sn){dt(Sn)}}function Ge(nn){nn.done?Oe(nn.value):function Le(Oe){return Oe instanceof ae?Oe:new ae(function(dt){dt(Oe)})}(nn.value).then(Wt,jt)}Ge((re=re.apply(Y,ee||[])).next())})}function _e(Y){return this instanceof _e?(this.v=Y,this):new _e(Y)}function ge(Y,ee,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,re=ae.apply(Y,ee||[]),Oe=[];return Le={},dt("next"),dt("throw"),dt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function dt(qt){re[qt]&&(Le[qt]=function(Yt){return new Promise(function(kr,kt){Oe.push([qt,Yt,kr,kt])>1||Wt(qt,Yt)})})}function Wt(qt,Yt){try{!function jt(qt){qt.value instanceof _e?Promise.resolve(qt.value.v).then(Ge,nn):Sn(Oe[0][2],qt)}(re[qt](Yt))}catch(kr){Sn(Oe[0][3],kr)}}function Ge(qt){Wt("next",qt)}function nn(qt){Wt("throw",qt)}function Sn(qt,Yt){qt(Yt),Oe.shift(),Oe.length&&Wt(Oe[0][0],Oe[0][1])}}function st(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,ee=Y[Symbol.asyncIterator];return ee?ee.call(Y):(Y=function J(Y){var ee="function"==typeof Symbol&&Symbol.iterator,ae=ee&&Y[ee],re=0;if(ae)return ae.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&re>=Y.length&&(Y=void 0),{value:Y&&Y[re++],done:!Y}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ae={},re("next"),re("throw"),re("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function re(Oe){ae[Oe]=Y[Oe]&&function(dt){return new Promise(function(Wt,jt){!function Le(Oe,dt,Wt,jt){Promise.resolve(jt).then(function(Ge){Oe({value:Ge,done:Wt})},dt)}(Wt,jt,(dt=Y[Oe](dt)).done,dt.value)})}}}P.d(Te,{FC:()=>ge,KL:()=>st,_T:()=>ue,mG:()=>pe,qq:()=>_e})},4650:(ot,Te,P)=>{P.d(Te,{$8M:()=>Fn,$Z:()=>ni,AFp:()=>zm,AaK:()=>pe,CHM:()=>Rs,CRH:()=>ph,CZH:()=>$m,CqO:()=>Ze,D6c:()=>qC,EJc:()=>qE,EpF:()=>it,F$t:()=>y0,F4k:()=>f0,FYo:()=>yt,FiY:()=>ie,G48:()=>ib,GfV:()=>el,Hsn:()=>j_,JOm:()=>vo,KtG:()=>zo,LFG:()=>En,LSH:()=>Wc,Lbi:()=>Hv,Lck:()=>aC,MMx:()=>Sm,NdJ:()=>he,OlP:()=>$t,PXZ:()=>iw,Q6J:()=>om,QGY:()=>bt,QP$:()=>mh,Qsj:()=>ut,R0b:()=>si,RDi:()=>Gp,Rgc:()=>Mo,SBq:()=>ce,Sil:()=>FC,Suo:()=>Rv,TTD:()=>Lo,TgZ:()=>bo,X6Q:()=>Ch,XFs:()=>gt,Xpm:()=>U,Xts:()=>ia,Y36:()=>Vd,YKP:()=>yv,YNc:()=>h0,Yjl:()=>Yn,Yz7:()=>Yt,ZZ4:()=>yp,_UZ:()=>V_,_Vd:()=>M,_c5:()=>wu,_uU:()=>C0,aQg:()=>vc,c2e:()=>Wv,cJS:()=>kt,cg1:()=>Rr,dDg:()=>QE,dqk:()=>qe,eFA:()=>eb,ekj:()=>_s,eoX:()=>JE,f3M:()=>zu,g9A:()=>zv,h0i:()=>kl,hGG:()=>Iw,hij:()=>An,iGM:()=>op,ifc:()=>tt,ip1:()=>$v,kL8:()=>L0,lG2:()=>Jt,lqb:()=>er,lri:()=>qm,n5z:()=>co,oAB:()=>Be,oxw:()=>m0,q4F:()=>sf,qLn:()=>nl,qOj:()=>O_,qZA:()=>Qd,rWj:()=>vu,sBO:()=>lw,sIi:()=>qd,s_b:()=>fh,soG:()=>Ih,tb:()=>dp,tp0:()=>$e,uIk:()=>Of,vHH:()=>Ie,vpe:()=>To,wAp:()=>wt,xp6:()=>yI,z2F:()=>bh,zSh:()=>Ad,zs3:()=>il});var m=P(7579),ne=P(727),N=P(9751),ue=P(6451),oe=P(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function de(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function pe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(pe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function me(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=fe({__forward_ref__:fe});function j(i){return i.__forward_ref__=j,i.toString=function(){return pe(this())},i}function J(i){return Ve(i)?i():i}function Ve(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Ie extends Error{constructor(s,a){super(function Je(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function _e(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,s){throw new Ie(-201,!1)}function jt(i,s){null==i&&function Ge(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function kt(i){return{providers:i.providers||[],imports:i.imports||[]}}function rn(i){return So(i,xi)||So(i,ui)}function So(i,s){return i.hasOwnProperty(s)?i[s]:null}function Or(i){return i&&(i.hasOwnProperty(qi)||i.hasOwnProperty(Ri))?i[qi]:null}const xi=fe({\u0275prov:fe}),qi=fe({\u0275inj:fe}),ui=fe({ngInjectableDef:fe}),Ri=fe({ngInjectorDef:fe});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let an;function xn(i){const s=an;return an=i,s}function ki(i,s,a){const c=rn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&gt.Optional?null:void 0!==s?s:void ve(pe(i))}function Rn(i){return{toString:i}.toString()}var hn=(()=>((hn=hn||{})[hn.OnPush=0]="OnPush",hn[hn.Default=1]="Default",hn))(),tt=(()=>{return(i=tt||(tt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",tt;var i})();const qe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fn={},Ot=[],Un=fe({\u0275cmp:fe}),bs=fe({\u0275dir:fe}),Qt=fe({\u0275pipe:fe}),Oi=fe({\u0275mod:fe}),Ft=fe({\u0275fac:fe}),q=fe({__NG_ELEMENT_ID__:fe});let $=0;function U(i){return Rn(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===hn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Ot,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||tt.Emulated,id:"c"+$++,styles:i.styles||Ot,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,_=i.features;return l.inputs=sn(i.inputs,c),l.outputs=sn(i.outputs),_&&_.forEach(I=>I(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(W).filter(Ce):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(pn).filter(Ce):null,l})}function W(i){return Xe(i)||on(i)}function Ce(i){return null!==i}function Be(i){return Rn(()=>({type:i.type,bootstrap:i.bootstrap||Ot,declarations:i.declarations||Ot,imports:i.imports||Ot,exports:i.exports||Ot,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function sn(i,s){if(null==i)return fn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const Jt=U;function Yn(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Xe(i){return i[Un]||null}function on(i){return i[bs]||null}function pn(i){return i[Qt]||null}function sr(i,s){const a=i[Oi]||null;if(!a&&!0===s)throw new Error(`Type ${pe(i)} does not have '\u0275mod' property.`);return a}function Tr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Yr(i){return Array.isArray(i)&&!0===i[1]}function No(i){return 0!=(8&i.flags)}function Qs(i){return 2==(2&i.flags)}function Ca(i){return 1==(1&i.flags)}function li(i){return null!==i.template}function Rp(i){return 0!=(256&i[2])}function Ii(i,s){return i.hasOwnProperty(Ft)?i[Ft]:null}class Ql{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Lo(){return Ni}function Ni(i){return i.type.prototype.ngOnChanges&&(i.setInput=Fo),Js}function Js(){const i=Ma(this),s=i?.current;if(s){const a=i.previous;if(a===fn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Fo(i,s,a,c){const l=Ma(i)||function Jl(i,s){return i[Uo]=s}(i,{previous:fn,current:null}),f=l.current||(l.current={}),_=l.previous,I=this.declaredInputs[a],E=_[I];f[I]=new Ql(E&&E.currentValue,s,_===fn),i[c]=s}Lo.ngInherit=!0;const Uo="__ngSimpleChanges__";function Ma(i){return i[Uo]||null}function Nn(i){for(;Array.isArray(i);)i=i[0];return i}function Xs(i,s){return Nn(s[i])}function Jr(i,s){return Nn(s[i.index])}function Sa(i,s){return i.data[s]}function pr(i,s){const a=s[i];return Tr(a)?a:a[0]}function Bo(i){return 4==(4&i[2])}function Ei(i){return 64==(64&i[2])}function rs(i,s){return null==s?null:i[s]}function is(i){i[18]=0}function jo(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const vt={lFrame:xu(null),bindingsEnabled:!0};function xs(){return vt.bindingsEnabled}function De(){return vt.lFrame.lView}function Pt(){return vt.lFrame.tView}function Rs(i){return vt.lFrame.contextLView=i,i[8]}function zo(i){return vt.lFrame.contextLView=null,i}function gn(){let i=xa();for(;null!==i&&64===i.type;)i=i.parent;return i}function xa(){return vt.lFrame.currentTNode}function di(i,s){const a=vt.lFrame;a.currentTNode=i,a.isParent=s}function Ra(){return vt.lFrame.isParent}function ka(){vt.lFrame.isParent=!1}function to(){return vt.lFrame.bindingIndex++}function rd(i,s){const a=vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,xc(s)}function xc(i){vt.lFrame.currentDirectiveIndex=i}function Mu(){return vt.lFrame.currentQueryIndex}function La(i){vt.lFrame.currentQueryIndex=i}function Rc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Go(i,s,a){if(a&gt.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&gt.Host||(l=Rc(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=vt.lFrame=Su();return c.currentTNode=s,c.lView=i,!0}function Au(i){const s=Su(),a=i[1];vt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Su(){const i=vt.lFrame,s=null===i?null:i.child;return null===s?xu(i):s}function xu(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Ru(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ku=Ru;function Wo(){const i=Ru();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Xn(){return vt.lFrame.selectedIndex}function hi(i){vt.lFrame.selectedIndex=i}function In(){const i=vt.lFrame;return Sa(i.tView,i.selectedIndex)}function Nu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:R}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Fh(i,s,a){ro(i,s,3,a)}function Uh(i,s,a,c){(3&i[2])===a&&ro(i,s,a,c)}function Ua(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function ro(i,s,a,c){const f=c??-1,_=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<_;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(ly(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function ly(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class Ko{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Ba(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],_=a[c++],I=a[c++];i.setAttribute(s,_,I,f)}else{const f=l,_=a[++c];ad(f)?i.setProperty(s,f,_):i.setAttribute(s,f,_),c++}}return c}function ja(i){return 3===i||4===i||6===i}function ad(i){return 64===i.charCodeAt(0)}function Ns(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||ud(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function ud(i,s,a,c,l){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){_=-1;break}if(I>s){_=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function jh(i){return-1!==i}function $a(i){return 32767&i}function gr(i,s){let a=function Fp(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let za=!0;function cd(i){const s=za;return za=i,s}let Ht=0;const Cn={};function so(i,s){const a=Ha(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Zo(c.data,i),Zo(s,null),Zo(c.blueprint,null));const l=qo(i,s),f=i.injectorIndex;if(jh(l)){const _=$a(l),I=gr(l,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[_+T]|E[_+T]}return s[f+8]=l,f}function Zo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ha(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function qo(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=as(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Pu(i,s,a){!function Bn(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(q)&&(c=a[q]),null==c&&(c=a[q]=Ht++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function os(i,s,a){if(a&gt.Optional)return i;ve()}function ht(i,s,a,c){if(a&gt.Optional&&void 0===c&&(c=null),0==(a&(gt.Self|gt.Host))){const l=i[9],f=xn(void 0);try{return l?l.get(s,c,a&gt.Optional):ki(s,c,a&gt.Optional)}finally{xn(f)}}return os(c,0,a)}function oo(i,s,a,c=gt.Default,l){if(null!==i){if(1024&s[2]){const _=function $n(i,s,a,c,l){let f=i,_=s;for(;null!==f&&null!==_&&1024&_[2]&&!(256&_[2]);){const I=Nc(f,_,a,c|gt.Self,Cn);if(I!==Cn)return I;let E=f.parent;if(!E){const T=_[21];if(T){const R=T.get(a,Cn,c);if(R!==Cn)return R}E=as(_),_=_[15]}f=E}return l}(i,s,a,c,Cn);if(_!==Cn)return _}const f=Nc(i,s,a,c,Cn);if(f!==Cn)return f}return ht(s,a,c,l)}function Nc(i,s,a,c,l){const f=function jn(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(q)?i[q]:void 0;return"number"==typeof s?s>=0?255&s:Yo:s}(a);if("function"==typeof f){if(!Go(s,i,c))return c&gt.Host?os(l,0,c):ht(s,a,c,l);try{const _=f(c);if(null!=_||c&gt.Optional)return _;ve()}finally{ku()}}else if("number"==typeof f){let _=null,I=Ha(i,s),E=-1,T=c&gt.Host?s[16][6]:null;for((-1===I||c&gt.SkipSelf)&&(E=-1===I?qo(i,s):s[I+8],-1!==E&&fi(c,!1)?(_=s[1],I=$a(E),s=gr(E,s)):I=-1);-1!==I;){const R=s[1];if(Ga(f,I,R.data)){const L=ao(I,s,a,_,c,T);if(L!==Cn)return L}E=s[I+8],-1!==E&&fi(c,s[1].data[I+8]===T)&&Ga(f,I,s)?(_=R,I=$a(E),s=gr(E,s)):I=-1}}return l}function ao(i,s,a,c,l,f){const _=s[1],I=_.data[i+8],R=bi(I,_,a,null==c?Qs(I)&&za:c!=_&&0!=(3&I.type),l&gt.Host&&f===I);return null!==R?uo(s,_,R,I):Cn}function bi(i,s,a,c,l){const f=i.providerIndexes,_=s.data,I=1048575&f,E=i.directiveStart,R=f>>20,G=l?I+R:i.directiveEnd;for(let te=c?I:I+R;te<G;te++){const Ee=_[te];if(te<E&&a===Ee||te>=E&&Ee.type===a)return te}if(l){const te=_[E];if(te&&li(te)&&te.type===a)return E}return null}function uo(i,s,a,c){let l=i[a];const f=s.data;if(function Vh(i){return i instanceof Ko}(l)){const _=l;_.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ge(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():_e(i)}(f[a]));const I=cd(_.canSeeViewProviders);_.resolving=!0;const E=_.injectImpl?xn(_.injectImpl):null;Go(i,c,gt.Default);try{l=i[a]=_.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Oc(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const _=Ni(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&xn(E),cd(I),_.resolving=!1,ku()}}return l}function Ga(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function fi(i,s){return!(i&gt.Self||i&gt.Host&&s)}class Ps{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return oo(this._tNode,this._lView,s,c,a)}}function Yo(){return new Ps(gn(),De())}function co(i){return Rn(()=>{const s=i.prototype.constructor,a=s[Ft]||Ln(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[Ft]||Ln(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Ln(i){return Ve(i)?()=>{const s=Ln(J(i));return s&&s()}:Ii(i)}function as(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Fn(i){return function cn(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(ja(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(gn(),i)}const ln="__parameters__";function Di(i,s,a){return Rn(()=>{const c=function Fs(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const _=new l(...f);return I.annotation=_,I;function I(E,T,R){const L=E.hasOwnProperty(ln)?E[ln]:Object.defineProperty(E,ln,{value:[]})[ln];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(_),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class $t{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Lr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Lr(c,s)):s!==i&&s.push(c)}return s}function pi(i,s){i.forEach(a=>Array.isArray(a)?pi(a,s):s(a))}function fd(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Jo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Fu(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}function mn(i,s,a){let c=cs(i,s);return c>=0?i[1|c]=a:(c=~c,function pd(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Wa(i,s){const a=cs(i,s);if(a>=0)return i[1|a]}function cs(i,s){return function Vu(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const f=c+(l-c>>1),_=i[f<<a];if(s===_)return f<<a;_>s?l=f:c=f+1}return~(l<<a)}(i,s,1)}const Vs={},Bs="__NG_DI_FLAG__",cr="ngTempTokenPath",yr=/\n/gm,$u="__source";let lr;function po(i){const s=lr;return lr=i,s}function Uc(i,s=gt.Default){if(void 0===lr)throw new Ie(-203,!1);return null===lr?ki(i,void 0,s):lr.get(i,s&gt.Optional?null:void 0,s)}function En(i,s=gt.Default){return(function vi(){return an}()||Uc)(J(i),s)}function zu(i,s=gt.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),En(i,s)}function Rt(i){const s=[];for(let a=0;a<i.length;a++){const c=J(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Ie(900,!1);let l,f=gt.Default;for(let _=0;_<c.length;_++){const I=c[_],E=C(I);"number"==typeof E?-1===E?l=I.token:f|=E:l=I}s.push(En(l,f))}else s.push(En(c))}return s}function b(i,s){return i[Bs]=s,i.prototype[Bs]=s,i}function C(i){return i[Bs]}const ie=b(Di("Optional"),8),$e=b(Di("SkipSelf"),4);let qa;function Gp(i){qa=i}class Yp{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ei(i){return i instanceof Yp?i.changingThisBreaksApplicationSecurity:i}const Ku=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Gn=(()=>((Gn=Gn||{})[Gn.NONE=0]="NONE",Gn[Gn.HTML=1]="HTML",Gn[Gn.STYLE=2]="STYLE",Gn[Gn.SCRIPT=3]="SCRIPT",Gn[Gn.URL=4]="URL",Gn[Gn.RESOURCE_URL=5]="RESOURCE_URL",Gn))();function Wc(i){const s=function tu(){const i=De();return i&&i[12]}();return s?s.sanitize(Gn.URL,i)||"":function Ya(i,s){const a=function Qp(i){return i instanceof Yp&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ei(i):function Ja(i){return(i=String(i)).match(Ku)||i.match(wy)?i:"unsafe:"+i}(_e(i))}const ia=new $t("ENVIRONMENT_INITIALIZER"),Cd=new $t("INJECTOR",-1),Td=new $t("INJECTOR_DEF_TYPES");class Zc{get(s,a=Vs){if(a===Vs){const c=new Error(`NullInjectorError: No provider for ${pe(s)}!`);throw c.name="NullInjectorError",c}return a}}function Xh(...i){return{\u0275providers:Fr(0,i)}}function Fr(i,...s){const a=[],c=new Set;let l;return pi(s,f=>{const _=f;sa(_,a,[],c)&&(l||(l=[]),l.push(_))}),void 0!==l&&Zu(l,a),a}function Zu(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];pi(l,f=>{s.push(f)})}}function sa(i,s,a,c){if(!(i=J(i)))return!1;let l=null,f=Or(i);const _=!f&&Xe(i);if(f||_){if(_&&!_.standalone)return!1;l=i}else{const E=i.ngModule;if(f=Or(E),!f)return!1;l=E}const I=c.has(l);if(_){if(I)return!1;if(c.add(l),_.dependencies){const E="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of E)sa(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(l);try{pi(f.imports,R=>{sa(R,s,a,c)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&Zu(T,s)}if(!I){const T=Ii(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:Ot},{provide:Td,useValue:l,multi:!0},{provide:ia,useValue:()=>En(l),multi:!0})}const E=f.providers;null==E||I||pi(E,R=>{s.push(R)})}}return l!==i&&void 0!==i.providers}const ef=fe({provide:String,useValue:fe});function nu(i){return null!==i&&"object"==typeof i&&ef in i}function oa(i){return"function"==typeof i}const Ad=new $t("Set Injector scope."),aa={},Sd={};let qc;function Yc(){return void 0===qc&&(qc=new Zc),qc}class er{}class Qc extends er{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xc(s,_=>this.processProvider(_)),this.records.set(Cd,Yu(void 0,this)),l.has("environment")&&this.records.set(er,Yu(void 0,this));const f=this.records.get(Ad);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Td.multi,Ot,gt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=po(this),c=xn(void 0);try{return s()}finally{po(a),xn(c)}}get(s,a=Vs,c=gt.Default){this.assertNotDestroyed();const l=po(this),f=xn(void 0);try{if(!(c&gt.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function nf(i){return"function"==typeof i||"object"==typeof i&&i instanceof $t}(s)&&rn(s);I=E&&this.injectableDefInScope(E)?Yu(qu(s),aa):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&gt.Self?Yc():this.parent).get(s,a=c&gt.Optional&&a===Vs?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[cr]=_[cr]||[]).unshift(pe(s)),l)throw _;return function x(i,s,a,c){const l=i[cr];throw s[$u]&&l.unshift(s[$u]),i.message=function F(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=pe(s);if(Array.isArray(s))l=s.map(pe).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let I=s[_];f.push(_+":"+("string"==typeof I?JSON.stringify(I):pe(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(yr,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[cr]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{xn(f),po(l)}}resolveInjectorInitializers(){const s=po(this),a=xn(void 0);try{const c=this.get(ia.multi,Ot,gt.Self);for(const l of c)l()}finally{po(s),xn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(pe(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(s){let a=oa(s=J(s))?s:J(s&&s.provide);const c=function ua(i){return nu(i)?Yu(void 0,i.useValue):Yu(function Jc(i,s,a){let c;if(oa(i)){const l=J(i);return Ii(l)||qu(l)}if(nu(i))c=()=>J(i.useValue);else if(function Md(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Rt(i.deps||[]));else if(function tf(i){return!(!i||!i.useExisting)}(i))c=()=>En(J(i.useExisting));else{const l=J(i&&(i.useClass||i.provide));if(!function xd(i){return!!i.deps}(i))return Ii(l)||qu(l);c=()=>new l(...Rt(i.deps))}return c}(i),aa)}(s);if(oa(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=Yu(void 0,aa,!0),l.factory=()=>Rt(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===aa&&(a.value=Sd,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ay(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=J(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function qu(i){const s=rn(i),a=null!==s?s.factory:Ii(i);if(null!==a)return a;if(i instanceof $t)throw new Ie(204,!1);if(i instanceof Function)return function Bw(i){const s=i.length;if(s>0)throw Fu(s,"?"),new Ie(204,!1);const a=function ai(i){const s=i&&(i[xi]||i[ui]);if(s){const a=function Cr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ie(204,!1)}function Yu(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Sy(i){return!!i.\u0275providers}function Xc(i,s){for(const a of i)Array.isArray(a)?Xc(a,s):Sy(a)?Xc(a.\u0275providers,s):s(a)}class rf{}class v{resolveComponentFactory(s){throw function y(i){const s=Error(`No component factory found for ${pe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let M=(()=>{class i{}return i.NULL=new v,i})();function O(){return K(gn(),De())}function K(i,s){return new ce(Jr(i,s))}let ce=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=O,i})();function Fe(i){return i instanceof ce?i.nativeElement:i}class yt{}let ut=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Tn(){const i=De(),a=pr(gn().index,i);return(Tr(a)?a:i)[11]}(),i})(),fs=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class el{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const sf=new el("14.1.2"),tl={};function dg(i){return i.ngOriginalError}class nl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&dg(s);for(;a&&dg(a);)a=dg(a);return a||null}}const kd=new Map;let pg=0;const Od="__ngContext__";function mi(i,s){Tr(s)?(i[Od]=s[20],function uf(i){kd.set(i[20],i)}(s)):i[Od]=s}function cf(i){const s=i[Od];return"number"==typeof s?function Py(i){return kd.get(i)||null}(s):s||null}function Fy(i){const s=cf(i);return s?Tr(s)?s:s.lView:null}const eI=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(qe))();function ru(i){return i instanceof Function?i():i}var vo=(()=>((vo=vo||{})[vo.Important=1]="Important",vo[vo.DashCase=2]="DashCase",vo))();function $y(i,s){return undefined(i,s)}function Pd(i){const s=i[3];return Yr(s)?s[3]:s}function Gy(i){return lf(i[13])}function Wy(i){return lf(i[4])}function lf(i){for(;null!==i&&!Yr(i);)i=i[4];return i}function Ld(i,s,a,c,l){if(null!=c){let f,_=!1;Yr(c)?f=c:Tr(c)&&(_=!0,c=c[0]);const I=Nn(c);0===i&&null!==a?null==l?Yy(s,a,I):Fd(s,a,I,l||null,!0):1===i&&null!==a?Fd(s,a,I,l||null,!0):2===i?function t_(i,s,a){const c=vg(i,s);c&&function dD(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,_):3===i&&s.destroyNode(I),null!=f&&function fD(i,s,a,c,l){const f=a[7];f!==Nn(a)&&Ld(s,i,c,f,l);for(let I=10;I<a.length;I++){const E=a[I];rl(E[1],E,i,s,c,f)}}(s,i,f,a,l)}}function yg(i,s,a){return i.createElement(s,a)}function sI(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,jo(l,-1)),a.splice(c,1)}function _g(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&sI(l,c),s>0&&(i[a-1][4]=c[4]);const f=Jo(i,10+s);!function Mi(i,s){rl(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function lD(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&rl(i,s,a,3,null,null),function Zy(i){let s=i[13];if(!s)return oI(i[1],i);for(;s;){let a=null;if(Tr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Tr(s)&&oI(s[1],s),s=s[3];null===s&&(s=i),Tr(s)&&oI(s[1],s),a=s&&s[4]}s=a}}(s)}}function oI(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function uI(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof Ko)){const f=a[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const I=l[f[_]],E=f[_+1];try{E.call(I)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function aI(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],I="function"==typeof _?_(s):Nn(s[_]),E=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const _=c[l=a[f+1]];a[f].call(_)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Yr(s[3])){a!==s[3]&&sI(a,s);const c=s[19];null!==c&&c.detachView(i)}!function qb(i){kd.delete(i[20])}(s)}}function cI(i,s,a){return function iu(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===tt.None||l===tt.Emulated)return null}return Jr(c,a)}(i,s.parent,a)}function Fd(i,s,a,c,l){i.insertBefore(s,a,c,l)}function Yy(i,s,a){i.appendChild(s,a)}function Qy(i,s,a,c,l){null!==c?Fd(i,s,a,c,l):Yy(i,s,a)}function vg(i,s){return i.parentNode(s)}function dI(i,s,a){return fI(i,s,a)}let fI=function hI(i,s,a){return 40&i.type?Jr(i,a):null};function wg(i,s,a,c){const l=cI(i,c,s),f=s[11],I=dI(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)Qy(f,l,a[E],I,!1);else Qy(f,l,a,I,!1)}function df(i,s){if(null!==s){const a=s.type;if(3&a)return Jr(s,i);if(4&a)return e_(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return df(i,c);{const l=i[s.index];return Yr(l)?e_(-1,l):Nn(l)}}if(32&a)return $y(s,i)()||Nn(i[s.index]);{const c=pI(i,s);return null!==c?Array.isArray(c)?c[0]:df(Pd(i[16]),c):df(i,s.next)}}return null}function pI(i,s){return null!==s?i[16][6].projection[s.projection]:null}function e_(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return df(c,l)}return s[7]}function n_(i,s,a,c,l,f,_){for(;null!=a;){const I=c[a.index],E=a.type;if(_&&0===s&&(I&&mi(Nn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)n_(i,s,a.child,c,l,f,!1),Ld(s,i,l,I,f);else if(32&E){const T=$y(a,c);let R;for(;R=T();)Ld(s,i,l,R,f);Ld(s,i,l,I,f)}else 16&E?gI(i,s,c,a,l,f):Ld(s,i,l,I,f);a=_?a.projectionNext:a.next}}function rl(i,s,a,c,l,f){n_(a,c,i.firstChild,s,l,f,!1)}function gI(i,s,a,c,l,f){const _=a[16],E=_[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)Ld(s,i,l,E[T],f);else n_(i,s,E,_[3],l,f,!0)}function r_(i,s,a){i.setAttribute(s,"style",a)}function xr(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Ig(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const mI="ng-template";function wo(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==Ig(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function pD(i){return 4===i.type&&i.value!==mI}function gD(i,s,a){return s===(4!==i.type||a?i.value:mI)}function we(i,s,a){let c=4;const l=i.attrs||[],f=function mD(i){for(let s=0;s<i.length;s++)if(ja(i[s]))return s;return i.length}(l);let _=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!_)if(4&c){if(c=2|1&c,""!==E&&!gD(i,E,a)||""===E&&1===s.length){if(ti(c))return!1;_=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!wo(i.attrs,T,a)){if(ti(c))return!1;_=!0}continue}const L=Eg(8&c?"class":E,l,pD(i),a);if(-1===L){if(ti(c))return!1;_=!0;continue}if(""!==T){let G;G=L>f?"":l[L+1].toLowerCase();const te=8&c?G:null;if(te&&-1!==Ig(te,T,0)||2&c&&T!==G){if(ti(c))return!1;_=!0}}}}else{if(!_&&!ti(c)&&!ti(E))return!1;if(_&&ti(E))continue;_=!1,c=E|1&c}}return ti(c)||_}function ti(i){return 0==(1&i)}function Eg(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const _=s[l];if(_===i)return l;if(3===_||6===_)f=!0;else{if(1===_||2===_){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===_)break;if(0===_){l+=4;continue}}l+=f?1:2}return-1}return function ou(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function su(i,s,a=!1){for(let c=0;c<s.length;c++)if(we(i,s[c],a))return!0;return!1}function rt(i,s){e:for(let a=0;a<s.length;a++){const c=s[a];if(i.length===c.length){for(let l=0;l<i.length;l++)if(i[l]!==c[l])continue e;return!0}}return!1}function bg(i,s){return i?":not("+s.trim()+")":s}function xt(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const I=i[++a];l+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+_:4&c&&(l+=" "+_);else""!==l&&!ti(_)&&(s+=bg(f,l),l=""),c=_,f=f||!ti(c);a++}return""!==l&&(s+=bg(f,l)),s}const Tt={};function yI(i){Cg(Pt(),De(),Xn()+i,!1)}function Cg(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Fh(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Uh(s,f,0,a)}hi(a)}function s_(i,s=null,a=null,c){const l=o_(i,s,a,c);return l.resolveInjectorInitializers(),l}function o_(i,s=null,a=null,c,l=new Set){const f=[a||Ot,Xh(i)];return c=c||("object"==typeof i?void 0:pe(i)),new Qc(f,s||Yc(),c||null,l)}let il=(()=>{class i{static create(a,c){if(Array.isArray(a))return s_({name:""},c,a,"");{const l=a.name??"";return s_({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=Vs,i.NULL=new Zc,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>En(Cd)}),i.__NG_ELEMENT_ID__=-1,i})();function Vd(i,s=gt.Default){const a=De();return null===a?En(i,s):oo(gn(),a,J(i),s)}function ni(){throw new Error("invalid")}function Rg(i,s){return i<<17|s<<2}function Ai(i){return i>>17&32767}function jd(i){return 2|i}function Hs(i){return(131068&i)>>2}function gf(i,s){return-131069&i|s<<2}function mf(i){return 1|i}function wf(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const _=i.data[f];La(l),_.contentQueries(2,s[f],f)}}}function Ef(i,s,a,c,l,f,_,I,E,T,R){const L=s.blueprint.slice();return L[0]=l,L[2]=76|c,(null!==R||i&&1024&i[2])&&(L[2]|=1024),is(L),L[3]=L[15]=i,L[8]=a,L[10]=_||i&&i[10],L[11]=I||i&&i[11],L[12]=E||i&&i[12]||null,L[9]=T||i&&i[9]||null,L[6]=f,L[20]=function qw(){return pg++}(),L[21]=R,L[16]=2==s.type?i[16]:L,L}function vr(i,s,a,c,l){let f=i.data[s];if(null===f)f=function Fg(i,s,a,c,l){const f=xa(),_=Ra(),E=i.data[s]=function C_(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==f&&(_?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,l),function Ac(){return vt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const _=function ks(){const i=vt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return di(f,!0),f}function la(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function ul(i,s,a){Au(s);try{const c=i.viewQuery;null!==c&&Kg(1,c,a);const l=i.template;null!==l&&b_(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&wf(i,s),i.staticViewQueries&&Kg(2,i.viewQuery,a);const f=i.components;null!==f&&function If(i,s){for(let a=0;a<s.length;a++)OD(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Wo()}}function $d(i,s,a,c){const l=s[2];if(128!=(128&l)){Au(s);try{is(s),function Na(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&b_(i,s,a,2,c);const _=3==(3&l);if(_){const T=i.preOrderCheckHooks;null!==T&&Fh(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Uh(s,T,0,null),Ua(s,0)}if(function kD(i){for(let s=Gy(i);null!==s;s=Wy(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&jo(f,1),l[2]|=512}}}(s),function RD(i){for(let s=Gy(i);null!==s;s=Wy(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Ei(c)&&$d(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&wf(i,s),_){const T=i.contentCheckHooks;null!==T&&Fh(s,T)}else{const T=i.contentHooks;null!==T&&Uh(s,T,1),Ua(s,1)}!function BI(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)hi(~l);else{const f=l,_=a[++c],I=a[++c];rd(_,f),I(2,s[f])}}}finally{hi(-1)}}(i,s);const I=i.components;null!==I&&function jI(i,s){for(let a=0;a<s.length;a++)Mf(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&Kg(2,E,c),_){const T=i.viewCheckHooks;null!==T&&Fh(s,T)}else{const T=i.viewHooks;null!==T&&Uh(s,T,2),Ua(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,jo(s[3],-1))}finally{Wo()}}}function E_(i,s,a,c){const l=s[10],_=Bo(s);try{!_&&l.begin&&l.begin(),_&&ul(i,s,c),$d(i,s,a,c)}finally{!_&&l.end&&l.end()}}function b_(i,s,a,c,l){const f=Xn(),_=2&c;try{hi(-1),_&&s.length>22&&Cg(i,s,22,!1),a(c,l)}finally{hi(f)}}function cl(i,s,a){!xs()||(function M_(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||so(a,s),mi(c,s);const _=a.initialInputs;for(let I=l;I<f;I++){const E=i.data[I],T=li(E);T&&uu(s,a,E);const R=uo(s,i,I,a);mi(R,s),null!==_&&Gg(0,I-l,R,E,0,_),T&&(pr(a.index,s)[8]=R)}}(i,s,a,Jr(a,s)),128==(128&a.flags)&&function xD(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,_=function Pa(){return vt.lFrame.currentDirectiveIndex}();try{hi(f);for(let I=c;I<l;I++){const E=i.data[I],T=s[I];xc(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&zg(E,T)}}finally{hi(-1),xc(_)}}(i,s,a))}function bf(i,s,a=Jr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],I=-1===_?a(s,i):i[_];i[l++]=I}}}function Ug(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Df(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Df(i,s,a,c,l,f,_,I,E,T){const R=22+c,L=R+l,G=function Vg(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Tt);return a}(R,L),te="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:s,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:te,incompleteFirstPass:!1}}function zI(i,s,a,c){const l=QI(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&S_(i).push(c,l.length-1))}function Cf(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function jg(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,_=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const R=l[T],L=R.inputs,G=null===f||pD(s)?null:ZI(L,f);_.push(G),I=Cf(L,T,I),E=Cf(R.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=I,s.outputs=E}function T_(i,s){const a=pr(s,i);16&a[2]||(a[2]|=32)}function zd(i,s,a,c){let l=!1;if(xs()){const f=function Gd(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const _=c[f];su(a,_.selectors,!1)&&(l||(l=[]),Pu(so(a,s),i,_.type),li(_)?(Hg(i,a),l.unshift(_)):l.push(_))}return l}(i,s,a),_=null===c?null:{"":-1};if(null!==f){l=!0,KI(a,i.data.length,f.length);for(let R=0;R<f.length;R++){const L=f[R];L.providersResolver&&L.providersResolver(L)}let I=!1,E=!1,T=la(i,s,f.length,null);for(let R=0;R<f.length;R++){const L=f[R];a.mergedAttrs=Ns(a.mergedAttrs,L.hostAttrs),ec(i,a,s,T,L),WI(T,L,_),null!==L.contentQueries&&(a.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(a.flags|=128);const G=L.type.prototype;!I&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(G.ngOnChanges||G.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}jg(i,a)}_&&function dl(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new Ie(-301,!1);c.push(s[l],f)}}}(a,c,_)}return a.mergedAttrs=Ns(a.mergedAttrs,a.attrs),l}function Hd(i,s,a,c,l,f){const _=f.hostBindings;if(_){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function ll(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,_)}}function zg(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Hg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function WI(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;li(s)&&(a[""]=i)}}function KI(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function ec(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=Ii(l.type)),_=new Ko(f,li(l),Vd);i.blueprint[c]=_,a[c]=_,Hd(i,s,0,c,la(i,a,l.hostVars,Tt),l)}function uu(i,s,a){const c=Jr(s,i),l=Ug(a),f=i[10],_=Wg(i,Ef(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=_}function gs(i,s,a,c,l,f){const _=Jr(i,s);!function Wd(i,s,a,c,l,f,_){if(null==f)i.removeAttribute(s,l,a);else{const I=null==_?_e(f):_(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],_,f,i.value,a,c,l)}function Gg(i,s,a,c,l,f){const _=f[s];if(null!==_){const I=c.setInput;for(let E=0;E<_.length;){const T=_[E++],R=_[E++],L=_[E++];null!==I?c.setInput(a,L,T,R):a[R]=L}}}function ZI(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Tf(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Mf(i,s){const a=pr(s,i);if(Ei(a)){const c=a[1];48&a[2]?$d(c,a,c.template,a[8]):a[5]>0&&hl(a)}}function hl(i){for(let c=Gy(i);null!==c;c=Wy(c))for(let l=10;l<c.length;l++){const f=c[l];if(Ei(f))if(512&f[2]){const _=f[1];$d(_,f,_.template,f[8])}else f[5]>0&&hl(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=pr(a[c],i);Ei(l)&&l[5]>0&&hl(l)}}function OD(i,s){const a=pr(s,i),c=a[1];(function qI(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),ul(c,a,a[8])}function Wg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function A_(i){for(;i;){i[2]|=32;const s=Pd(i);if(Rp(i)&&!s)return i;i=s}return null}function cu(i){!function YI(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=Fy(a);if(null!==c){const l=c[1];E_(l,c,l.template,a)}}}(i[8])}function Kg(i,s,a){La(0),s(i,a)}const FD=(()=>Promise.resolve(null))();function QI(i){return i[7]||(i[7]=[])}function S_(i){return i.cleanup||(i.cleanup=[])}function x_(i,s){const a=i[9],c=a?a.get(nl,null):null;c&&c.handleError(s)}function Zg(i,s,a,c,l){for(let f=0;f<a.length;){const _=a[f++],I=a[f++],E=s[_],T=i.data[_];null!==T.setInput?T.setInput(E,l,c,I):E[I]=l}}function Kd(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const I=s[_];"number"==typeof I?f=I:1==f?l=me(l,I):2==f&&(c=me(c,I+": "+s[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function Sf(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Nn(f)),Yr(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&Sf(E[1],E,T,c)}const _=a.type;if(8&_)Sf(i,s,a.child,c);else if(32&_){const I=$y(a,s);let E;for(;E=I();)c.push(E)}else if(16&_){const I=pI(s,a);if(Array.isArray(I))c.push(...I);else{const E=Pd(s[16]);Sf(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class Zd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Sf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Yr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(_g(s,c),Jo(a,c))}this._attachedToViewContainer=!1}lD(this._lView[1],this._lView)}onDestroy(s){zI(this._lView[1],this._lView,null,s)}markForCheck(){A_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function fl(i,s,a){const c=s[10];c.begin&&c.begin();try{$d(i,s,i.template,a)}catch(l){throw x_(s,l),l}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iI(i,s){rl(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=s}}class R_ extends Zd{constructor(s){super(s),this._view=s}detectChanges(){cu(this._view)}checkNoChanges(){}get context(){return null}}class k_ extends M{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Xe(s);return new lu(a,this.ngModule)}}function XI(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class qg{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,tl,c);return l!==tl||a===tl?l:this.parentInjector.get(s,a,c)}}class lu extends rf{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Dg(i){return i.map(xt).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return XI(this.componentDef.inputs)}get outputs(){return XI(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof er?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new qg(s,f):s,I=_.get(yt,null);if(null===I)throw new Ie(407,!1);const E=_.get(fs,null),T=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",L=c?function $I(i,s,a){return i.selectRootElement(s,a===tt.ShadowDom)}(T,c,this.componentDef.encapsulation):yg(I.createRenderer(null,this.componentDef),R,function UD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(R)),G=this.componentDef.onPush?288:272,te=function wr(i,s){return{components:[],scheduler:i||eI,clean:FD,playerHandler:s||null,flags:0}}(),Ee=Df(0,null,null,1,0,null,null,null,null,null),Pe=Ef(null,Ee,te,G,null,null,I,T,E,_,null);let Ke,et;Au(Pe);try{const It=function xf(i,s,a,c,l,f){const _=a[1];a[22]=i;const E=vr(_,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(Kd(E,T,!0),null!==i&&(Ba(l,i,T),null!==E.classes&&xr(l,i,E.classes),null!==E.styles&&r_(l,i,E.styles)));const R=c.createRenderer(i,s),L=Ef(a,Ug(s),null,s.onPush?32:16,a[22],E,c,R,f||null,null,null);return _.firstCreatePass&&(Pu(so(E,a),_,s.type),Hg(_,E),KI(E,a.length,1)),Wg(a,L),a[22]=L}(L,this.componentDef,Pe,I,T);if(L)if(c)Ba(T,L,["ng-version",sf.full]);else{const{attrs:Re,classes:pt}=function i_(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!ti(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Re&&Ba(T,L,Re),pt&&pt.length>0&&xr(T,L,pt.join(" "))}if(et=Sa(Ee,22),void 0!==a){const Re=et.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const Gt=a[pt];Re.push(null!=Gt?Array.from(Gt):null)}}Ke=function VD(i,s,a,c,l){const f=a[1],_=function GI(i,s,a){const c=gn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),ec(i,c,s,la(i,s,1,null),a),jg(i,c));const l=uo(s,i,c.directiveStart,c);mi(l,s);const f=Jr(c,s);return f&&mi(f,s),l}(f,a,s);if(c.components.push(_),i[8]=_,null!==l)for(const E of l)E(_,s);if(s.contentQueries){const E=gn();s.contentQueries(1,_,E.directiveStart)}const I=gn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(hi(I.index),Hd(a[1],I,0,I.directiveStart,I.directiveEnd,s),zg(s,_)),_}(It,this.componentDef,Pe,te,[n0]),ul(Ee,Pe,null)}finally{Wo()}return new t0(this.componentType,Ke,K(et,Pe),Pe,et)}}class t0 extends class Vi{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new R_(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;Zg(f[1],f,l,s,a),T_(f,this._tNode.index)}}get injector(){return new Ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function n0(){const i=gn();Nu(De()[1],i)}function O_(i){let s=function r0(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(li(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ie(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const _=i;_.inputs=Jg(i.inputs),_.declaredInputs=Jg(i.declaredInputs),_.outputs=Jg(i.outputs);const I=l.hostBindings;I&&Xg(i,I);const E=l.viewQuery,T=l.contentQueries;if(E&&s0(i,E),T&&o0(i,T),de(i.inputs,l.inputs),de(i.declaredInputs,l.declaredInputs),de(i.outputs,l.outputs),li(l)&&l.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let _=0;_<f.length;_++){const I=f[_];I&&I.ngInherit&&I(i),I===O_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function BD(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=Ns(l.hostAttrs,a=Ns(a,l.hostAttrs))}}(c)}function Jg(i){return i===fn?{}:i===Ot?[]:i}function s0(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function o0(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,f)=>{s(c,l,f),a(c,l,f)}:s}function Xg(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let em=null;function hu(){if(!em){const i=qe.Symbol;if(i&&i.iterator)em=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(em=c)}}}return em}function qd(i){return!!rm(i)&&(Array.isArray(i)||!(i instanceof Map)&&hu()in i)}function rm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ri(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Of(i,s,a,c){const l=De();return ri(l,to(),s)&&(Pt(),gs(In(),l,i,s,a,c)),Of}function h0(i,s,a,c,l,f,_,I){const E=De(),T=Pt(),R=i+22,L=T.firstCreatePass?function d0(i,s,a,c,l,f,_,I,E){const T=s.consts,R=vr(s,i,4,_||null,rs(T,I));zd(s,a,R,rs(T,E)),Nu(s,R);const L=R.tViews=Df(2,R,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,R),L.queries=s.queries.embeddedTView(R)),R}(R,T,E,s,a,c,l,f,_):T.data[R];di(L,!1);const G=E[11].createComment("");wg(T,E,G,L),mi(G,E),Wg(E,E[R]=Tf(G,E,G,L)),Ca(L)&&cl(T,E,L),null!=_&&bf(E,L,I)}function om(i,s,a){const c=De();return ri(c,to(),s)&&function $i(i,s,a,c,l,f,_,I){const E=Jr(s,a);let R,T=s.inputs;!I&&null!=T&&(R=T[c])?(Zg(i,a,R,c,l),Qs(s)&&T_(a,s.index)):3&s.type&&(c=function HI(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=_?_(l,s.value||"",c):l,f.setProperty(E,c,l))}(Pt(),In(),c,i,s,c[11],a,!1),om}function Ir(i,s,a,c,l){const _=l?"class":"style";Zg(i,a,s.inputs[_],_,c)}function bo(i,s,a,c){const l=De(),f=Pt(),_=22+i,I=l[11],E=l[_]=yg(I,s,function sd(){return vt.lFrame.currentNamespace}()),T=f.firstCreatePass?function Yd(i,s,a,c,l,f,_){const I=s.consts,T=vr(s,i,2,l,rs(I,f));return zd(s,a,T,rs(I,_)),null!==T.attrs&&Kd(T,T.attrs,!1),null!==T.mergedAttrs&&Kd(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,l,0,s,a,c):f.data[_];di(T,!0);const R=T.mergedAttrs;null!==R&&Ba(I,E,R);const L=T.classes;null!==L&&xr(I,E,L);const G=T.styles;return null!==G&&r_(I,E,G),64!=(64&T.flags)&&wg(f,l,E,T),0===function Cu(){return vt.lFrame.elementDepthCount}()&&mi(E,l),function Mc(){vt.lFrame.elementDepthCount++}(),Ca(T)&&(cl(f,l,T),function D_(i,s,a){if(No(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,l)),null!==c&&bf(l,T),bo}function Qd(){let i=gn();Ra()?ka():(i=i.parent,di(i,!1));const s=i;!function eo(){vt.lFrame.elementDepthCount--}();const a=Pt();return a.firstCreatePass&&(Nu(a,i),No(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ar(i){return 0!=(16&i.flags)}(s)&&Ir(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Bh(i){return 0!=(32&i.flags)}(s)&&Ir(a,s,De(),s.stylesWithoutHost,!1),Qd}function V_(i,s,a,c){return bo(i,s,a,c),Qd(),V_}function it(){return De()}function bt(i){return!!i&&"function"==typeof i.then}function f0(i){return!!i&&"function"==typeof i.subscribe}const Ze=f0;function he(i,s,a,c){const l=De(),f=Pt(),_=gn();return function B_(i,s,a,c,l,f,_,I){const E=Ca(c),R=i.firstCreatePass&&S_(i),L=s[8],G=QI(s);let te=!0;if(3&c.type||I){const Ke=Jr(c,s),et=I?I(Ke):Ke,It=G.length,Re=I?Gt=>I(Nn(Gt[c.index])):c.index;let pt=null;if(!I&&E&&(pt=function $r(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const _=l[f];if(_===a&&l[f+1]===c){const I=s[7],E=l[f+2];return I.length>E?I[E]:null}"string"==typeof _&&(f+=2)}return null}(i,s,l,c.index)),null!==pt)(pt.__ngLastListenerFn__||pt).__ngNextListenerFn__=f,pt.__ngLastListenerFn__=f,te=!1;else{f=g0(c,s,L,f,!1);const Gt=a.listen(et,l,f);G.push(f,Gt),R&&R.push(l,Re,It,It+1)}}else f=g0(c,s,L,f,!1);const Ee=c.outputs;let Pe;if(te&&null!==Ee&&(Pe=Ee[l])){const Ke=Pe.length;if(Ke)for(let et=0;et<Ke;et+=2){const _n=s[Pe[et]][Pe[et+1]].subscribe(f),Iu=G.length;G.push(f,_n),R&&R.push(l,c.index,Iu,-(Iu+1))}}}(f,l,l[11],_,i,s,0,c),he}function p0(i,s,a,c){try{return!1!==a(c)}catch(l){return x_(i,l),!1}}function g0(i,s,a,c,l){return function f(_){if(_===Function)return c;A_(2&i.flags?pr(i.index,s):s);let E=p0(s,0,c,_),T=f.__ngNextListenerFn__;for(;T;)E=p0(s,0,T,_)&&E,T=T.__ngNextListenerFn__;return l&&!1===E&&(_.preventDefault(),_.returnValue=!1),E}}function m0(i=1){return function Ph(i){return(vt.lFrame.contextLView=function Ou(i,s){for(;i>0;)s=s[15],i--;return s}(i,vt.lFrame.contextLView))[8]}(i)}function HD(i,s){let a=null;const c=function zt(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let l=0;l<s.length;l++){const f=s[l];if("*"!==f){if(null===c?su(i,f,!0):rt(c,f))return l}else a=l}return a}function y0(i){const s=De()[16][6];if(!s.projection){const c=s.projection=Fu(i?i.length:1,null),l=c.slice();let f=s.child;for(;null!==f;){const _=i?HD(f,i):0;null!==_&&(l[_]?l[_].projectionNext=f:c[_]=f,l[_]=f),f=f.next}}}function j_(i,s=0,a){const c=De(),l=Pt(),f=vr(l,22+i,16,null,a||null);null===f.projection&&(f.projection=s),ka(),64!=(64&f.flags)&&function hD(i,s,a){gI(s[11],0,s,a,cI(i,a,s),dI(a.parent||s[6],a,s))}(l,c,f)}function He(i,s,a,c,l){const f=i[a+1],_=null===s;let I=c?Ai(f):Hs(f),E=!1;for(;0!==I&&(!1===E||_);){const R=i[I+1];um(i[I],s)&&(E=!0,i[I+1]=c?mf(R):jd(R)),I=c?Ai(R):Hs(R)}E&&(i[a+1]=c?jd(f):mf(f))}function um(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&cs(i,s)>=0}function _s(i,s){return function ii(i,s,a,c){const l=De(),f=Pt(),_=function ss(i){const s=vt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function b0(i,s,a,c){const l=i.data;if(null===l[a+1]){const f=l[Xn()],_=function dm(i,s){return s>=i.expandoStartIndex}(i,a);(function Er(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!_&&(s=!1),s=function KD(i,s,a,c){const l=function no(i){const s=vt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=bn(a=hm(null,i,s,a,c),s.attrs,c),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==l)if(a=hm(l,i,s,a,c),null===f){let E=function Hi(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Hs(c))return i[Ai(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=hm(null,i,s,E[1],c),E=bn(E,s.attrs,c),function D0(i,s,a,c){i[Ai(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function El(i,s,a){let c;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)c=bn(c,i[f].hostAttrs,a);return bn(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(l,f,s,c),function GD(i,s,a,c,l,f){let _=f?s.classBindings:s.styleBindings,I=Ai(_),E=Hs(_);i[c]=a;let R,T=!1;if(Array.isArray(a)){const L=a;R=L[1],(null===R||cs(L,R)>0)&&(T=!0)}else R=a;if(l)if(0!==E){const G=Ai(i[I+1]);i[c+1]=Rg(G,I),0!==G&&(i[G+1]=gf(i[G+1],c)),i[I+1]=function ED(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=Rg(I,0),0!==I&&(i[I+1]=gf(i[I+1],c)),I=c;else i[c+1]=Rg(E,0),0===I?I=c:i[E+1]=gf(i[E+1],c),E=c;T&&(i[c+1]=jd(i[c+1])),He(i,R,c,!0),He(i,R,c,!1),function tr(i,s,a,c,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&cs(f,s)>=0&&(a[c+1]=mf(a[c+1]))}(s,R,i,c,f),_=Rg(I,E),f?s.classBindings=_:s.styleBindings=_}(l,f,s,a,_,c)}}(f,i,_,c),s!==Tt&&ri(l,_,s)&&function Z_(i,s,a,c,l,f,_,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];yi(function kg(i){return 1==(1&i)}(T)?bl(E,s,a,l,Hs(T),_):void 0)||(yi(f)||function xI(i){return 2==(2&i)}(T)&&(f=bl(E,null,a,l,I,_)),function jT(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:vo.DashCase;null==l?i.removeStyle(a,c,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=vo.Important),i.setStyle(a,c,l,f))}}(c,_,Xs(Xn(),a),l,f))}(f,f.data[Xn()],l,l[11],i,l[_+1]=function ZD(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=pe(ei(i)))),i}(s,a),c,_)}(i,s,null,!0),_s}function hm(i,s,a,c,l){let f=null;const _=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<_&&(f=s[I],c=bn(c,f.hostAttrs,l),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function bn(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?l=_:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),mn(i,_,!!a||s[++f]))}return void 0===i?null:i}function bl(i,s,a,c,l,f){const _=null===s;let I;for(;l>0;){const E=i[l],T=Array.isArray(E),R=T?E[1]:E,L=null===R;let G=a[l+1];G===Tt&&(G=L?Ot:void 0);let te=L?Wa(G,c):R===c?G:void 0;if(T&&!yi(te)&&(te=Wa(E,c)),yi(te)&&(I=te,_))return I;const Ee=i[l+1];l=_?Ai(Ee):Hs(Ee)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(I=Wa(E,c))}return I}function yi(i){return void 0!==i}function C0(i,s=""){const a=De(),c=Pt(),l=i+22,f=c.firstCreatePass?vr(c,l,1,s,null):c.data[l],_=a[l]=function Ky(i,s){return i.createText(s)}(a[11],s);wg(c,a,_,f),di(f,!1)}function An(i,s,a){const c=De(),l=function pl(i,s,a,c){return ri(i,to(),a)?s+_e(a)+c:Tt}(c,i,s,a);return l!==Tt&&function Io(i,s,a){const c=Xs(s,i);!function rI(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Xn(),l),An}const Do=void 0;var _m=["en",[["a","p"],["AM","PM"],Do],[["AM","PM"],Do,Do],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Do,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Do,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Do,"{1} 'at' {0}",Do],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ym(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Tl={};function Rr(i){const s=function QD(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=F0(s);if(a)return a;const c=s.split("-")[0];if(a=F0(c),a)return a;if("en"===c)return _m;throw new Ie(701,!1)}function L0(i){return Rr(i)[wt.PluralCase]}function F0(i){return i in Tl||(Tl[i]=qe.ng&&qe.ng.common&&qe.ng.common.locales&&qe.ng.common.locales[i]),Tl[i]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const vs="en-US";let nv=vs;class kl{}class yv{}function aC(i,s){return new lh(i,s??null)}class lh extends kl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new k_(this);const c=sr(s);this._bootstrapComponents=ru(c.bootstrap),this._r3Injector=o_(s,a,[{provide:kl,useValue:this},{provide:M,useValue:this.componentFactoryResolver}],pe(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class ep extends yv{constructor(s){super(),this.moduleType=s}create(s){return new lh(this.moduleType,s)}}class uC extends kl{constructor(s,a,c){super(),this.componentFactoryResolver=new k_(this),this.instance=null;const l=new Qc([...s,{provide:kl,useValue:this},{provide:M,useValue:this.componentFactoryResolver}],a||Yc(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Sm(i,s,a=null){return new uC(i,s,a).injector}function Mv(i){return s=>{setTimeout(i,void 0,s)}}const To=class vE extends m.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),_=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),_=E.complete?.bind(E)}this.__isAsync&&(f=Mv(f),l&&(l=Mv(l)),_&&(_=Mv(_)));const I=super.subscribe({next:l,error:f,complete:_});return s instanceof ne.w0&&s.add(I),I}};function xm(){return this._results[hu()]()}class yu{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=hu(),c=yu.prototype;c[a]||(c[a]=xm)}get changes(){return this._changes||(this._changes=new To)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Lr(s);(this._changesDetected=!function hd(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Mo=(()=>{class i{}return i.__NG_ELEMENT_ID__=wE,i})();const Nl=Mo,np=class extends Nl{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Ef(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(l[19]=_.createEmbeddedView(c)),ul(c,l,s),new Zd(l)}};function wE(){return hh(gn(),De())}function hh(i,s){return 4&i.type?new np(s,i,K(i,s)):null}let fh=(()=>{class i{}return i.__NG_ELEMENT_ID__=IE,i})();function IE(){return rp(gn(),De())}const EE=fh,bE=class extends EE{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return K(this._hostTNode,this._hostLView)}get injector(){return new Ps(this._hostTNode,this._hostLView)}get parentInjector(){const s=qo(this._hostTNode,this._hostLView);if(jh(s)){const a=gr(s,this._hostLView),c=$a(s);return new Ps(a[1].data[c+8],a)}return new Ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Av(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const _=s.createEmbeddedView(a||{},f);return this.insert(_,l),_}createComponent(s,a,c,l,f){const _=s&&!function Lu(i){return"function"==typeof i}(s);let I;if(_)I=a;else{const L=a||{};I=L.index,c=L.injector,l=L.projectableNodes,f=L.environmentInjector||L.ngModuleRef}const E=_?s:new lu(Xe(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const G=(_?T:this.parentInjector).get(er,null);G&&(f=G)}const R=E.create(T,l,void 0,f);return this.insert(R.hostView,I),R}insert(s,a){const c=s._lView,l=c[1];if(function ns(i){return Yr(i[3])}(c)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const L=c[3],G=new bE(L,L[6],L[3]);G.detach(G.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function qy(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],fd(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function cD(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,_,f);const I=e_(f,_),E=c[11],T=vg(E,_[7]);return null!==T&&function uD(i,s,a,c,l,f){c[0]=l,c[6]=s,rl(i,c,a,1,l,f)}(l,_[6],E,c,T,I),s.attachToViewContainerRef(),fd(Rm(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Av(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=_g(this._lContainer,a);c&&(Jo(Rm(this._lContainer),a),lD(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=_g(this._lContainer,a);return c&&null!=Jo(Rm(this._lContainer),a)?new Zd(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Av(i){return i[8]}function Rm(i){return i[8]||(i[8]=[])}function rp(i,s){let a;const c=s[i.index];if(Yr(c))a=c;else{let l;if(8&i.type)l=Nn(c);else{const f=s[11];l=f.createComment("");const _=Jr(i,s);Fd(f,vg(f,_),l,function lI(i,s){return i.nextSibling(s)}(f,_),!1)}s[i.index]=a=Tf(c,s,l,i),Wg(s,a)}return new bE(a,i,s)}class km{constructor(s){this.queryList=s,this.matches=null}clone(){return new km(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const _=a.getByIndex(f);l.push(this.queries[_.indexInDeclarationView].clone())}return new Sv(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Si(s,a).matches&&this.queries[a].setDirty()}}class DE{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class xv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new xv(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Ll{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Ll(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,Fl(a,f)),this.matchTNodeWithReadOption(s,a,bi(a,s,f,!1,!1))}else c===Mo?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,bi(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===ce||l===fh||l===Mo&&4&a.type)this.addMatch(a.index,-2);else{const f=bi(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Fl(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function CE(i,s,a,c){return-1===a?function Ul(i,s){return 11&i.type?K(i,s):4&i.type?hh(i,s):null}(s,i):-2===a?function DC(i,s,a){return a===ce?K(s,i):a===Mo?hh(s,i):a===fh?rp(s,i):void 0}(i,s,c):uo(i,i[1],a,s)}function TE(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,_=a.matches,I=[];for(let E=0;E<_.length;E+=2){const T=_[E];I.push(T<0?null:CE(s,f[T],_[E+1],a.metadata.read))}l.matches=I}return l.matches}function sp(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const _=TE(i,s,l,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(_[I/2]);else{const T=f[I+1],R=s[-E];for(let L=10;L<R.length;L++){const G=R[L];G[17]===G[3]&&sp(G[1],G,T,c)}if(null!==R[9]){const L=R[9];for(let G=0;G<L.length;G++){const te=L[G];sp(te[1],te,T,c)}}}}}return c}function op(i){const s=De(),a=Pt(),c=Mu();La(c+1);const l=Si(a,c);if(i.dirty&&Bo(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?sp(a,s,c,[]):TE(a,s,l,c);i.reset(f,Fe),i.notifyOnChanges()}return!0}return!1}function Rv(i,s,a,c){const l=Pt();if(l.firstCreatePass){const f=gn();(function kv(i,s,a){null===i.queries&&(i.queries=new xv),i.queries.track(new Ll(s,a))})(l,new DE(s,a,c),f.index),function ME(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function gh(i,s,a){const c=new yu(4==(4&a));zI(i,s,c,c.destroy),null===s[19]&&(s[19]=new Sv),s[19].queries.push(new km(c))}(l,De(),a)}function ph(){return function Om(i,s){return i[19].queries[s].queryList}(De(),Mu())}function Si(i,s){return i.queries.getByIndex(s)}function mh(i){const s=Xe(i)||on(i)||pn(i);return null!==s&&s.standalone}function lp(...i){}const $v=new $t("Application Initializer");let $m=(()=>{class i{constructor(a){this.appInits=a,this.resolve=lp,this.reject=lp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(bt(f))a.push(f);else if(Ze(f)){const _=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(En($v,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zm=new $t("AppId",{providedIn:"root",factory:function KE(){return`${Hm()}${Hm()}${Hm()}`}});function Hm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zv=new $t("Platform Initializer"),Hv=new $t("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dp=new $t("appBootstrapListener");let Wv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ih=new $t("LocaleId",{providedIn:"root",factory:()=>zu(Ih,gt.Optional|gt.SkipSelf)||function Kv(){return typeof $localize<"u"&&$localize.locale||vs}()}),qE=new $t("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class LC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let FC=(()=>{class i{compileModuleSync(a){return new ep(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=ru(sr(a).declarations).reduce((_,I)=>{const E=Xe(I);return E&&_.push(new lu(E)),_},[]);return new LC(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const UC=(()=>Promise.resolve(0))();function Yv(i){typeof Zone>"u"?UC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class si{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new To(!1),this.onMicrotaskEmpty=new To(!1),this.onStable=new To(!1),this.onError=new To(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function VC(){let i=qe.requestAnimationFrame,s=qe.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Km(i){const s=()=>{!function Jv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(qe,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Vl(i),i.isCheckStableRunning=!0,mc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Vl(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,_,I)=>{try{return Zm(i),a.invokeTask(l,f,_,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Xv(i)}},onInvoke:(a,c,l,f,_,I,E)=>{try{return Zm(i),a.invoke(l,f,_,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Xv(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Vl(i),mc(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!si.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(si.isInAngularZone())throw new Ie(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+l,s,Qv,lp,lp);try{return f.runTask(_,a,c)}finally{f.cancelTask(_)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Qv={};function mc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Vl(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Zm(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Xv(i){i._nesting--,mc(i)}class ew{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new To,this.onMicrotaskEmpty=new To,this.onStable=new To,this.onError=new To}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const qm=new $t(""),vu=new $t("");let nw,QE=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nw||(function tw(i){nw=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{si.assertNotInAngularZone(),Yv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(En(si),En(JE),En(vu))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),JE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return nw?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),va=null;const XE=new $t("AllowMultipleToken"),fp=new $t("PlatformDestroyListeners");class iw{constructor(s,a){this.name=s,this.token=a}}function eb(i,s,a=[]){const c=`Platform: ${s}`,l=new $t(c);return(f=[])=>{let _=aw();if(!_||_.injector.get(XE,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function jC(i){if(va&&!va.get(XE,!1))throw new Ie(400,!1);va=i;const s=i.get(Ym);(function sw(i){const s=i.get(zv,null);s&&s.forEach(a=>a())})(i)}(function tb(i=[],s){return il.create({name:s,providers:[{provide:Ad,useValue:"platform"},{provide:fp,useValue:new Set([()=>va=null])},...i]})}(I,c))}return function ow(i){const s=aw();if(!s)throw new Ie(401,!1);return s}()}}function aw(){return va?.get(Ym)??null}let Ym=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function uw(i,s){let a;return a="noop"===i?new ew:("zone.js"===i?void 0:i)||new si(s),a}(c?.ngZone,function rb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:si,useValue:l}];return l.run(()=>{const _=il.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(_),E=I.injector.get(nl,null);if(!E)throw new Ie(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:R=>{E.handleError(R)}});I.onDestroy(()=>{Dh(this._modules,I),T.unsubscribe()})}),function cw(i,s,a){try{const c=a();return bt(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=I.injector.get($m);return T.runInitializers(),T.donePromise.then(()=>(function Ml(i){jt(i,"Expected localeId to be defined"),"string"==typeof i&&(nv=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Ih,vs)||vs),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=Qm({},c);return function rw(i,s,a){const c=new ep(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(bh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Ie(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(fp,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(En(il))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Qm(i,s){return Array.isArray(s)?s.reduce(Qm,i):{...i,...s}}let bh=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new N.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{si.assertNotInAngularZone(),Yv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{si.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ue.T)(f,_.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof rf;if(!this._injector.get($m).done)throw!l&&mh(a),new Ie(405,false);let _;_=l?a:this._injector.get(M).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function Eh(i){return i.isBoundToModule}(_)?void 0:this._injector.get(kl),T=_.create(il.NULL,[],c||_.selector,I),R=T.location.nativeElement,L=T.injector.get(qm,null);return L?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),Dh(this.components,T),L?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Dh(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(dp,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Dh(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ie(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(En(si),En(er),En(nl))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Dh(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Jm=!0,jl=!1;function Ch(){return jl=!0,Jm}function ib(){if(jl)throw new Error("Cannot enable prod mode after platform setup.");Jm=!1}let lw=(()=>{class i{}return i.__NG_ELEMENT_ID__=dw,i})();function dw(i){return function hw(i,s,a){if(Qs(i)&&!a){const c=pr(i.index,s);return new Zd(c,c)}return 47&i.type?new Zd(s[16],s):null}(gn(),De(),16==(16&i))}class Xm{constructor(){}supports(s){return qd(s)}create(s){return new _w(s)}}const hb=(i,s)=>s;class _w{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||hb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const _=!c||a&&a.currentIndex<pb(c,l,f)?a:c,I=pb(_,l,f),E=_.currentIndex;if(_===c)l--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)l++;else{f||(f=[]);const T=I-l,R=E-l;if(T!=R){for(let G=0;G<T;G++){const te=G<f.length?f[G]:f[G]=0,Ee=te+G;R<=Ee&&Ee<T&&(f[G]=te+1)}f[_.previousIndex]=R-T}}I!==E&&s(_,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!qd(s))throw new Ie(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,_,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],_=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,f,_,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,I),c=!0),a=a._next}else l=0,function nm(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[hu()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{_=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,I,_,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new fb(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new ey),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ey),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class fb{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class ey{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new KC,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pb(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class ty{constructor(){}supports(s){return s instanceof Map||rm(s)}create(){return new ZC}}class ZC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||rm(s)))throw new Ie(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,_=l._next;return f&&(f._next=_),_&&(_._prev=f),l._next=null,l._prev=null,l}const c=new vw(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class vw{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gb(){return new yp([new Xm])}let yp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||gb()),deps:[[i,new $e,new ie]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new Ie(901,!1)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:gb}),i})();function ny(){return new vc([new ty])}let vc=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||ny()),deps:[[i,new $e,new ie]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new Ie(901,!1)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:ny}),i})();const wu=eb(null,"core",[]);let Iw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(En(bh))},i.\u0275mod=Be({type:i}),i.\u0275inj=kt({}),i})();function qC(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ot,Te,P)=>{P.d(Te,{Z:()=>Ie});var m=P(2090),ne=P(4859),N=P(9681),ue=P(1877);class oe{constructor(_e,ge){this._delegate=_e,this.firebase=ge,(0,N._addComponent)(_e,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(_e,ge=N._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(_e);return!st.isInitialized()&&"EXPLICIT"===(null===(Ye=st.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&st.initialize(),st.getImmediate({identifier:ge})}_removeServiceInstance(_e,ge=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(ge)}_addComponent(_e){(0,N._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,N._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function me(){const Je=function pe(Je){const _e={},ge={__esModule:!0,initializeApp:function Ae(ze,V={}){const ye=N.initializeApp(ze,V);if((0,m.r3)(_e,ye.name))return _e[ye.name];const Y=new Je(ye,ge);return _e[ye.name]=Y,Y},app:st,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function be(ze){const V=ze.name,ye=V.replace("-compat","");if(N._registerComponent(ze)&&"PUBLIC"===ze.type){const Y=(ee=st())=>{if("function"!=typeof ee[ye])throw de.create("invalid-app-argument",{appName:V});return ee[ye]()};void 0!==ze.serviceProps&&(0,m.ZB)(Y,ze.serviceProps),ge[ye]=Y,Je.prototype[ye]=function(...ee){return this._getService.bind(this,V).apply(this,ze.multipleInstances?ee:[])}}return"PUBLIC"===ze.type?ge[ye]:null},removeApp:function Ye(ze){delete _e[ze]},useAsService:function je(ze,V){return"serverAuth"===V?null:V},modularAPIs:N}};function st(ze){if(!(0,m.r3)(_e,ze=ze||N._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:ze});return _e[ze]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function ve(){return Object.keys(_e).map(ze=>_e[ze])}}),st.App=Je,ge}(oe);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function _e(ge){(0,m.ZB)(Je,ge)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Je}(),j=new ue.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=B;!function Se(Je){(0,N.registerVersion)("@firebase/app-compat","0.1.31",Je)}()},9681:(ot,Te,P)=>{P.r(Te),P.d(Te,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>qt,_addOrOverwriteComponent:()=>Yt,_apps:()=>nn,_clearComponents:()=>So,_components:()=>Sn,_getProvider:()=>kt,_registerComponent:()=>kr,_removeServiceInstance:()=>rn,deleteApp:()=>gt,getApp:()=>ui,getApps:()=>Ri,initializeApp:()=>qi,onLog:()=>xn,registerVersion:()=>vi,setLogLevel:()=>ki});var m=P(5861),ne=P(4859),N=P(1877),ue=P(2090),oe=P(8766);class fe{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(W=>{if(function de(U){return"VERSION"===U.getComponent()?.type}(W)){const Ce=W.getImmediate();return`${Ce.library}/${Ce.version}`}return null}).filter(W=>W).join(" ")}}const pe="@firebase/app",B=new N.Yd("@firebase/app"),jt="[DEFAULT]",Ge={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,Sn=new Map;function qt(U,H){try{U.container.addComponent(H)}catch(W){B.debug(`Component ${H.name} failed to register with FirebaseApp ${U.name}`,W)}}function Yt(U,H){U.container.addOrOverwriteComponent(H)}function kr(U){const H=U.name;if(Sn.has(H))return B.debug(`There were multiple attempts to register component ${H}.`),!1;Sn.set(H,U);for(const W of nn.values())qt(W,U);return!0}function kt(U,H){const W=U.container.getProvider("heartbeat").getImmediate({optional:!0});return W&&W.triggerHeartbeat(),U.container.getProvider(H)}function rn(U,H,W=jt){kt(U,H).clearInstance(W)}function So(){Sn.clear()}const Cr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Or{constructor(H,W,Ce){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},W),this._name=W.name,this._automaticDataCollectionEnabled=W.automaticDataCollectionEnabled,this._container=Ce,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}const xi="9.9.2";function qi(U,H={}){"object"!=typeof H&&(H={name:H});const W=Object.assign({name:jt,automaticDataCollectionEnabled:!1},H),Ce=W.name;if("string"!=typeof Ce||!Ce)throw Cr.create("bad-app-name",{appName:String(Ce)});const Be=nn.get(Ce);if(Be){if((0,ue.vZ)(U,Be.options)&&(0,ue.vZ)(W,Be.config))return Be;throw Cr.create("duplicate-app",{appName:Ce})}const ct=new ne.H0(Ce);for(const Jt of Sn.values())ct.addComponent(Jt);const sn=new Or(U,W,ct);return nn.set(Ce,sn),sn}function ui(U=jt){const H=nn.get(U);if(!H)throw Cr.create("no-app",{appName:U});return H}function Ri(){return Array.from(nn.values())}function gt(U){return an.apply(this,arguments)}function an(){return(an=(0,m.Z)(function*(U){const H=U.name;nn.has(H)&&(nn.delete(H),yield Promise.all(U.container.getProviders().map(W=>W.delete())),U.isDeleted=!0)})).apply(this,arguments)}function vi(U,H,W){var Ce;let Be=null!==(Ce=Ge[U])&&void 0!==Ce?Ce:U;W&&(Be+=`-${W}`);const ct=Be.match(/\s|\//),sn=H.match(/\s|\//);if(ct||sn){const Jt=[`Unable to register library "${Be}" with version "${H}":`];return ct&&Jt.push(`library name "${Be}" contains illegal characters (whitespace or "/")`),ct&&sn&&Jt.push("and"),sn&&Jt.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void B.warn(Jt.join(" "))}kr(new ne.wA(`${Be}-version`,()=>({library:Be,version:H}),"VERSION"))}function xn(U,H){if(null!==U&&"function"!=typeof U)throw Cr.create("invalid-log-argument");(0,N.Am)(U,H)}function ki(U){(0,N.Ub)(U)}const hn="firebase-heartbeat-store";let qs=null;function un(){return qs||(qs=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(U,H)=>{0===H&&U.createObjectStore(hn)}}).catch(U=>{throw Cr.create("idb-open",{originalErrorMessage:U.message})})),qs}function qe(){return(qe=(0,m.Z)(function*(U){var H;try{return(yield un()).transaction(hn).objectStore(hn).get(fn(U))}catch(W){if(W instanceof ue.ZR)B.warn(W.message);else{const Ce=Cr.create("idb-get",{originalErrorMessage:null===(H=W)||void 0===H?void 0:H.message});B.warn(Ce.message)}}})).apply(this,arguments)}function xo(U,H){return ir.apply(this,arguments)}function ir(){return(ir=(0,m.Z)(function*(U,H){var W;try{const Be=(yield un()).transaction(hn,"readwrite");return yield Be.objectStore(hn).put(H,fn(U)),Be.done}catch(Ce){if(Ce instanceof ue.ZR)B.warn(Ce.message);else{const Be=Cr.create("idb-set",{originalErrorMessage:null===(W=Ce)||void 0===W?void 0:W.message});B.warn(Be.message)}}})).apply(this,arguments)}function fn(U){return`${U.name}!${U.options.appId}`}class bs{constructor(H){this.container=H,this._heartbeatsCache=null;const W=this.container.getProvider("app").getImmediate();this._storage=new Ft(W),this._heartbeatsCachePromise=this._storage.read().then(Ce=>(this._heartbeatsCache=Ce,Ce))}triggerHeartbeat(){var H=this;return(0,m.Z)(function*(){const Ce=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Be=Qt();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Be&&!H._heartbeatsCache.heartbeats.some(ct=>ct.date===Be))return H._heartbeatsCache.heartbeats.push({date:Be,agent:Ce}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(ct=>{const sn=new Date(ct.date).valueOf();return Date.now()-sn<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,m.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const W=Qt(),{heartbeatsToSend:Ce,unsentEntries:Be}=function Oi(U,H=1024){const W=[];let Ce=U.slice();for(const Be of U){const ct=W.find(sn=>sn.agent===Be.agent);if(ct){if(ct.dates.push(Be.date),q(W)>H){ct.dates.pop();break}}else if(W.push({agent:Be.agent,dates:[Be.date]}),q(W)>H){W.pop();break}Ce=Ce.slice(1)}return{heartbeatsToSend:W,unsentEntries:Ce}}(H._heartbeatsCache.heartbeats),ct=(0,ue.L)(JSON.stringify({version:2,heartbeats:Ce}));return H._heartbeatsCache.lastSentHeartbeatDate=W,Be.length>0?(H._heartbeatsCache.heartbeats=Be,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ct})()}}function Qt(){return(new Date).toISOString().substring(0,10)}class Ft{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,m.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function tt(U){return qe.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var W=this;return(0,m.Z)(function*(){var Ce;if(yield W._canUseIndexedDBPromise){const ct=yield W.read();return xo(W.app,{lastSentHeartbeatDate:null!==(Ce=H.lastSentHeartbeatDate)&&void 0!==Ce?Ce:ct.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var W=this;return(0,m.Z)(function*(){var Ce;if(yield W._canUseIndexedDBPromise){const ct=yield W.read();return xo(W.app,{lastSentHeartbeatDate:null!==(Ce=H.lastSentHeartbeatDate)&&void 0!==Ce?Ce:ct.lastSentHeartbeatDate,heartbeats:[...ct.heartbeats,...H.heartbeats]})}})()}}function q(U){return(0,ue.L)(JSON.stringify({version:2,heartbeats:U})).length}!function $(U){kr(new ne.wA("platform-logger",H=>new fe(H),"PRIVATE")),kr(new ne.wA("heartbeat",H=>new bs(H),"PRIVATE")),vi(pe,"0.7.30",U),vi(pe,"0.7.30","esm2017"),vi("fire-js","")}("")},4859:(ot,Te,P)=>{P.d(Te,{H0:()=>pe,wA:()=>N});var m=P(5861),ne=P(2090);class N{constructor(B,j,J){this.name=B,this.instanceFactory=j,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ue="[DEFAULT]";class oe{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const J=new ne.BH;if(this.instancesDeferred.set(j,J),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:j});Ve&&J.resolve(Ve)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const J=this.normalizeInstanceIdentifier(B?.identifier),Ve=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Se){if(Ve)return null;throw Se}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function de(me){return"EAGER"===me.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[j,J]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(j);try{const Se=this.getOrInitializeService({instanceIdentifier:Ve});J.resolve(Se)}catch{}}}}clearInstance(B=ue){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,m.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...j.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ue){return this.instances.has(B)}getOptions(B=ue){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,J=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:J,options:j});for(const[Se,Ie]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Se)&&Ie.resolve(Ve);return Ve}onInit(B,j){var J;const Ve=this.normalizeInstanceIdentifier(j),Se=null!==(J=this.onInitCallbacks.get(Ve))&&void 0!==J?J:new Set;Se.add(B),this.onInitCallbacks.set(Ve,Se);const Ie=this.instances.get(Ve);return Ie&&B(Ie,Ve),()=>{Se.delete(B)}}invokeOnInitCallbacks(B,j){const J=this.onInitCallbacks.get(j);if(J)for(const Ve of J)try{Ve(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let J=this.instances.get(B);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(me=B,me===ue?void 0:me),options:j}),this.instances.set(B,J),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(J,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,J)}catch{}var me;return J||null}normalizeInstanceIdentifier(B=ue){return this.component?this.component.multipleInstances?B:ue:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new oe(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Te,P)=>{P.d(Te,{Am:()=>me,Ub:()=>pe,Yd:()=>de,in:()=>ne});const m=[];var ne=(()=>{return(B=ne||(ne={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",ne;var B})();const N={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ue=ne.INFO,oe={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},fe=(B,j,...J)=>{if(j<B.logLevel)return;const Ve=(new Date).toISOString(),Se=oe[j];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Se](`[${Ve}]  ${B.name}:`,...J)};class de{constructor(j){this.name=j,this._logLevel=ue,this._logHandler=fe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in ne))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?N[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...j),this._logHandler(this,ne.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...j),this._logHandler(this,ne.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...j),this._logHandler(this,ne.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...j),this._logHandler(this,ne.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...j),this._logHandler(this,ne.ERROR,...j)}}function pe(B){m.forEach(j=>{j.setLogLevel(B)})}function me(B,j){for(const J of m){let Ve=null;j&&j.level&&(Ve=N[j.level]),J.userLogHandler=null===B?null:(Se,Ie,...Je)=>{const _e=Je.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");Ie>=(Ve??Se.logLevel)&&B({level:ne[Ie].toLowerCase(),message:_e,args:Je,type:Se.name})}}}},8766:(ot,Te,P)=>{P.d(Te,{Lj:()=>Ae,X3:()=>st});var m=P(5861);let N,ue;const de=new WeakMap,pe=new WeakMap,me=new WeakMap,B=new WeakMap,j=new WeakMap;let Se={get(V,ye,Y){if(V instanceof IDBTransaction){if("done"===ye)return pe.get(V);if("objectStoreNames"===ye)return V.objectStoreNames||me.get(V);if("store"===ye)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return ge(V[ye])},set:(V,ye,Y)=>(V[ye]=Y,!0),has:(V,ye)=>V instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in V};function _e(V){return"function"==typeof V?function Je(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ye){return V.apply(Ye(this),ye),ge(de.get(this))}:function(...ye){return ge(V.apply(Ye(this),ye))}:function(ye,...Y){const ee=V.call(Ye(this),ye,...Y);return me.set(ee,ye.sort?ye.sort():[ye]),ge(ee)}}(V):(V instanceof IDBTransaction&&function Ve(V){if(pe.has(V))return;const ye=new Promise((Y,ee)=>{const ae=()=>{V.removeEventListener("complete",re),V.removeEventListener("error",Le),V.removeEventListener("abort",Le)},re=()=>{Y(),ae()},Le=()=>{ee(V.error||new DOMException("AbortError","AbortError")),ae()};V.addEventListener("complete",re),V.addEventListener("error",Le),V.addEventListener("abort",Le)});pe.set(V,ye)}(V),((V,ye)=>ye.some(Y=>V instanceof Y))(V,function oe(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Se):V)}function ge(V){if(V instanceof IDBRequest)return function J(V){const ye=new Promise((Y,ee)=>{const ae=()=>{V.removeEventListener("success",re),V.removeEventListener("error",Le)},re=()=>{Y(ge(V.result)),ae()},Le=()=>{ee(V.error),ae()};V.addEventListener("success",re),V.addEventListener("error",Le)});return ye.then(Y=>{Y instanceof IDBCursor&&de.set(Y,V)}).catch(()=>{}),j.set(ye,V),ye}(V);if(B.has(V))return B.get(V);const ye=_e(V);return ye!==V&&(B.set(V,ye),j.set(ye,V)),ye}const Ye=V=>j.get(V);function st(V,ye,{blocked:Y,upgrade:ee,blocking:ae,terminated:re}={}){const Le=indexedDB.open(V,ye),Oe=ge(Le);return ee&&Le.addEventListener("upgradeneeded",dt=>{ee(ge(Le.result),dt.oldVersion,dt.newVersion,ge(Le.transaction))}),Y&&Le.addEventListener("blocked",()=>Y()),Oe.then(dt=>{re&&dt.addEventListener("close",()=>re()),ae&&dt.addEventListener("versionchange",()=>ae())}).catch(()=>{}),Oe}function Ae(V,{blocked:ye}={}){const Y=indexedDB.deleteDatabase(V);return ye&&Y.addEventListener("blocked",()=>ye()),ge(Y).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],je=new Map;function ze(V,ye){if(!(V instanceof IDBDatabase)||ye in V||"string"!=typeof ye)return;if(je.get(ye))return je.get(ye);const Y=ye.replace(/FromIndex$/,""),ee=ye!==Y,ae=be.includes(Y);if(!(Y in(ee?IDBIndex:IDBObjectStore).prototype)||!ae&&!ve.includes(Y))return;const re=function(){var Le=(0,m.Z)(function*(Oe,...dt){const Wt=this.transaction(Oe,ae?"readwrite":"readonly");let jt=Wt.store;return ee&&(jt=jt.index(dt.shift())),(yield Promise.all([jt[Y](...dt),ae&&Wt.done]))[0]});return function(dt){return Le.apply(this,arguments)}}();return je.set(ye,re),re}!function Ie(V){Se=V(Se)}(V=>({...V,get:(ye,Y,ee)=>ze(ye,Y)||V.get(ye,Y,ee),has:(ye,Y)=>!!ze(ye,Y)||V.has(ye,Y)}))},5861:(ot,Te,P)=>{function m(N,ue,oe,fe,de,pe,me){try{var B=N[pe](me),j=B.value}catch(J){return void oe(J)}B.done?ue(j):Promise.resolve(j).then(fe,de)}function ne(N){return function(){var ue=this,oe=arguments;return new Promise(function(fe,de){var pe=N.apply(ue,oe);function me(j){m(pe,fe,de,me,B,"next",j)}function B(j){m(pe,fe,de,me,B,"throw",j)}me(void 0)})}}P.d(Te,{Z:()=>ne})}},ot=>{ot(ot.s=8836)}]);